"use strict";exports.id=4896,exports.ids=[4896],exports.modules={21027:(e,s,t)=>{t.d(s,{Z:()=>l});var r=t(10326),a=t(35047);function l({questionCount:e=5}){let s=(0,a.useRouter)();return(0,r.jsxs)("div",{className:"relative",children:[r.jsx("div",{className:"filter blur-sm pointer-events-none",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["\uD83D\uDCDD Interactive Quiz (",e," questions)"]}),Array.from({length:Math.min(e,3)}).map((e,s)=>(0,r.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["Question ",s+1]}),r.jsx("p",{className:"text-gray-900 font-medium",children:"This is a sample quiz question that would appear here..."})]}),r.jsx("div",{className:"space-y-2",children:["A","B","C"].map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"radio",name:`question-${s}`,className:"h-4 w-4 text-blue-600",disabled:!0}),(0,r.jsxs)("span",{className:"text-gray-700",children:[e,". Sample answer option"]})]},e))})]},s)),r.jsx("button",{disabled:!0,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md font-medium opacity-50",children:"Submit Quiz"})]})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:(0,r.jsxs)("div",{className:"text-center p-6 max-w-sm",children:[r.jsx("div",{className:"mb-4",children:r.jsx("svg",{className:"w-12 h-12 text-blue-600 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unlock Interactive Quizzes"}),r.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:"Upgrade to unlock interactive quizzes for your notes and test your knowledge."}),r.jsx("button",{onClick:()=>s.push("/pricing"),className:"bg-blue-600 text-white px-6 py-2 rounded-md font-medium hover:bg-blue-700 transition-colors",children:"Upgrade Plan"})]})})]})}},33947:(e,s,t)=>{t.d(s,{Z:()=>n});var r=t(10326),a=t(17577),l=t(73189);function n({questions:e,noteId:s,noteType:t,onComplete:n}){let{user:i,supabase:d}=(0,l.$)(),[o,c]=(0,a.useState)(0),[m,x]=(0,a.useState)([]),[u,b]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[p,j]=(0,a.useState)(null),[N,y]=(0,a.useState)(""),[f,w]=(0,a.useState)(!1);if(!e||0===e.length)return(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Quiz Not Available"}),r.jsx("p",{className:"text-yellow-700",children:"No quiz questions are available for this note."})]});let v=e=>{b(e)},D=async e=>{if(!i){y("You must be logged in to submit quiz answers");return}g(!0),y("");try{let{data:{session:r}}=await d.auth.getSession(),a=r?.access_token;if(!a)throw Error("No authentication token available");console.log("[Quiz] Submitting quiz answers:",{noteId:s,noteType:t,answersCount:e.length});let l=await fetch("/api/quiz-attempts",{method:"POST",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({noteId:s,noteType:t,answers:e})});if(!l.ok){let e=await l.json();throw Error(e.message||"Failed to submit quiz")}let i=await l.json();if(!i.success)throw Error(i.message||"Quiz submission failed");console.log("[Quiz] Quiz submitted successfully:",i.data);let o={score:i.data.score,correctAnswers:i.data.correctAnswers,totalQuestions:i.data.totalQuestions,percentage:i.data.percentage,completedAt:i.data.completedAt,userAnswers:e};j(o),n&&n(o.score,o.totalQuestions)}catch(e){console.error("[Quiz] Error submitting quiz:",e),y(e.message||"Failed to submit quiz")}finally{g(!1)}},z=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600";if(p){var A;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:"\uD83C\uDFAF"})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Quiz Completed!"}),(0,r.jsxs)("div",{className:`text-4xl font-bold mb-2 ${z(p.percentage)}`,children:[p.percentage,"%"]}),(0,r.jsxs)("p",{className:"text-lg text-gray-600 mb-4",children:[p.correctAnswers," out of ",p.totalQuestions," correct"]}),r.jsx("p",{className:"text-xl font-semibold text-gray-800 mb-6",children:(A=p.percentage)>=90?"Excellent! \uD83C\uDF89":A>=80?"Great job! \uD83D\uDC4F":A>=70?"Good work! \uD83D\uDC4D":A>=60?"Not bad! \uD83D\uDCDA":"Keep studying! \uD83D\uDCAA"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Score Breakdown:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Correct Answers:"}),r.jsx("span",{className:"font-semibold ml-2 text-green-600",children:p.correctAnswers})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Total Questions:"}),r.jsx("span",{className:"font-semibold ml-2",children:p.totalQuestions})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Accuracy:"}),(0,r.jsxs)("span",{className:`font-semibold ml-2 ${z(p.percentage)}`,children:[p.percentage,"%"]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-gray-600",children:"Completed:"}),r.jsx("span",{className:"font-semibold ml-2",children:new Date(p.completedAt).toLocaleString()})]})]})]}),(0,r.jsxs)("button",{onClick:()=>w(!f),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors mr-3",children:[f?"Hide":"Show"," Detailed Results"]}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Take Quiz Again"})]}),f&&p.userAnswers&&(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"\uD83D\uDCCB Detailed Results"}),r.jsx("div",{className:"space-y-6",children:e.map((e,s)=>{let t=p.userAnswers[s],a=t===e.correctAnswer;return r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${a?"bg-green-500":"bg-red-500"}`,children:a?"✓":"✗"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h5",{className:"font-semibold text-gray-900 mb-2",children:["Question ",s+1,": ",e.question]}),r.jsx("div",{className:"space-y-2 mb-3",children:Object.entries(e.options).map(([s,l])=>{let n="p-2 rounded border ";return s===e.correctAnswer?n+="bg-green-100 border-green-300 text-green-800":s!==t||a?n+="bg-gray-50 border-gray-200 text-gray-700":n+="bg-red-100 border-red-300 text-red-800",(0,r.jsxs)("div",{className:n,children:[(0,r.jsxs)("span",{className:"font-semibold mr-2",children:[s,"."]}),l,s===e.correctAnswer&&r.jsx("span",{className:"ml-2 text-green-600 font-semibold",children:"✓ Correct"}),s===t&&!a&&r.jsx("span",{className:"ml-2 text-red-600 font-semibold",children:"✗ Your Answer"})]},s)})}),(0,r.jsxs)("div",{className:`p-3 rounded-lg ${a?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[r.jsx("p",{className:`font-semibold ${a?"text-green-800":"text-red-800"}`,children:a?"✅ Correct!":"❌ Incorrect"}),!a&&(0,r.jsxs)("p",{className:"text-red-700 text-sm mt-1",children:["Your answer: ",r.jsx("strong",{children:t})," | Correct answer: ",r.jsx("strong",{children:e.correctAnswer})]}),e.explanation&&r.jsx("div",{className:"mt-2 pt-2 border-t border-gray-300",children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"Explanation:"})," ",e.explanation]})})]})]})]})},e.id)})})]})]})}let C=e[o],Q=(o+1)/e.length*100;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCDD Quiz Time!"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Question ",o+1," of ",e.length]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Q}%`}})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:C.question}),r.jsx("div",{className:"space-y-3",children:Object.entries(C.options).map(([e,s])=>(0,r.jsxs)("button",{onClick:()=>v(e),className:`w-full text-left p-4 rounded-lg border-2 transition-all duration-200 ${u===e?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[(0,r.jsxs)("span",{className:"font-semibold mr-3",children:[e,"."]}),s]},e))})]}),N&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-600",children:N})}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"text-sm text-gray-600",children:u?`Selected: ${u}`:"Select an answer to continue"}),r.jsx("button",{onClick:()=>{if(!u)return;let s=[...m,u];x(s),b(""),o<e.length-1?c(o+1):D(s)},disabled:!u||h,className:`px-6 py-2 rounded-md font-semibold transition-colors ${u&&!h?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:h?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):o===e.length-1?"Finish Quiz":"Next Question"})]})]})}}};