(()=>{var e={};e.id=1671,e.ids=[1671],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},67259:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(47678),s(55801),s(35866);var r=s(23191),a=s(88716),n=s(37922),i=s.n(n),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["generate",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,47678)),"/Users/janjedrach/Cursor/eduscribe/src/app/generate/upload/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,55801)),"/Users/janjedrach/Cursor/eduscribe/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/janjedrach/Cursor/eduscribe/src/app/generate/upload/page.tsx"],u="/generate/upload/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/generate/upload/page",pathname:"/generate/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44486:(e,t,s)=>{Promise.resolve().then(s.bind(s,14791))},14791:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(10326),a=s(17577),n=s(35047),i=s(73189),o=s(83640),l=s(71511),d=s(71814),c=s(45478);function u(){let e=(0,n.useRouter)(),{user:t,supabase:s}=(0,i.$)(),{canUploadPPT:u,canGenerateNotes:p,canSaveNotes:x,refreshUsage:m}=(0,o.m)(),[g,h]=(0,a.useState)(null),[f,b]=(0,a.useState)(""),[j,y]=(0,a.useState)(!1),[v,P]=(0,a.useState)(""),[N,w]=(0,a.useState)(!1),[D,C]=(0,a.useState)(!1),[q,T]=(0,a.useState)(!1),[S,_]=(0,a.useState)({title:"",message:"",feature:""}),F=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?w(!0):"dragleave"===e.type&&w(!1)},U=e=>{if(e.size>10485760){P("File size must be less than 10MB");return}if(["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint"].includes(e.type)&&!u){_({title:"PowerPoint Upload Restricted",message:"Upgrade to Student or Pro plan to upload PowerPoint presentations.",feature:"PowerPoint uploads"}),T(!0);return}let t=["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"];if(u&&t.push("application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint"),!t.includes(e.type)){let e=u?"PDF, TXT, DOC, DOCX, PPT, or PPTX files":"PDF, TXT, DOC, or DOCX files";P(`Please upload ${e}`);return}h(e),P("")},k=async r=>{if(r.preventDefault(),!g){P("Please select a file to upload");return}if(!t){C(!0);return}if(!p){_({title:"Monthly Limit Reached",message:"You've reached your plan limit. Upgrade your plan to generate more notes.",feature:"additional note generation"}),T(!0);return}if(!x){_({title:"Storage Limit Reached",message:"You've reached your plan limit. Upgrade your plan to store more notes.",feature:"additional note storage"}),T(!0);return}y(!0),P("");try{let{data:{session:t}}=await s.auth.getSession();if(!t?.access_token){P("Authentication required. Please log in again.");return}let r=new FormData;r.append("file",g),f.trim()&&r.append("title",f.trim());let a=await fetch("/api/file-notes",{method:"POST",headers:{Authorization:`Bearer ${t.access_token}`},body:r});if(a.ok){let t=await a.json();if(console.log("[Upload Generate] Note generation successful:",t),t.success&&t.data)await m(),e.push("/dashboard");else throw Error(t.message||"Failed to generate notes")}else{let e=await a.json();throw Error(e.message||"Failed to generate notes")}}catch(e){P(e.message||"Failed to generate notes. Please try again."),console.error("Error:",e)}finally{y(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[j&&r.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:r.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:r.jsx(c.Z,{message:"Generating Notes...",subMessage:"This could take a moment – please wait while we process your file."})})}),r.jsx("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-4xl",children:"\uD83D\uDCC4"})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Upload File for Notes"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Upload your documents and convert them into organized, searchable notes."})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-8",children:[r.jsx("h3",{className:"font-semibold text-green-900 mb-3",children:"Supported file types:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-green-800",children:[(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"PDF files"})," - Documents, research papers, articles"]}),(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"Word documents"})," - .doc and .docx files"]}),u&&(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"PowerPoint presentations"})," - .ppt and .pptx files"]}),(0,r.jsxs)("li",{children:[r.jsx("strong",{children:"Text files"})," - .txt files with plain text"]})]}),!u&&r.jsx("div",{className:"mt-4 p-3 bg-blue-100 rounded border border-blue-200",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:[r.jsx("strong",{children:"\uD83D\uDCA1 Want PowerPoint support?"})," Upgrade to Student or Pro plan to upload presentations.",r.jsx("button",{onClick:()=>e.push("/pricing"),className:"ml-2 text-blue-600 hover:text-blue-800 underline",children:"View Plans"})]})}),r.jsx("div",{className:"mt-4 p-3 bg-green-100 rounded",children:(0,r.jsxs)("p",{className:"text-sm text-green-700",children:[r.jsx("strong",{children:"Tip:"})," For best results, ensure your file contains clear, readable text.",u&&" PowerPoint slides will be converted with slide titles as section headings."]})})]}),v&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:r.jsx("p",{className:"text-red-800",children:v})}),r.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:(0,r.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Optional)"}),r.jsx("input",{type:"text",id:"title",value:f,onChange:e=>b(e.target.value),placeholder:"Enter a custom title for your notes...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-green-500 focus:border-green-500",disabled:j}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Give your notes a descriptive title to help you find them later"})]}),r.jsx("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${N?"border-green-500 bg-green-50":g?"border-green-300 bg-green-50":"border-gray-300 hover:border-green-400"}`,onDragEnter:F,onDragLeave:F,onDragOver:F,onDrop:e=>{e.preventDefault(),e.stopPropagation(),w(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&U(e.dataTransfer.files[0])},children:g?(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCC4"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-lg font-medium text-gray-900",children:g.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[(g.size/1024/1024).toFixed(2)," MB"]})]}),r.jsx("button",{type:"button",onClick:()=>h(null),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove file"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:r.jsx("span",{className:"text-2xl",children:"\uD83D\uDCC1"})}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Drag and drop your file here"}),r.jsx("p",{className:"text-gray-500",children:"or"}),(0,r.jsxs)("label",{className:"cursor-pointer",children:[r.jsx("span",{className:"text-green-600 hover:text-green-800 font-medium",children:"browse to choose a file"}),r.jsx("input",{type:"file",className:"hidden",accept:".pdf,.txt,.doc,.docx,.ppt,.pptx",onChange:e=>{let t=e.target.files?.[0];t&&U(t)},disabled:j})]})]}),r.jsx("p",{className:"text-sm text-gray-500",children:"PDF, TXT, DOC, DOCX, PPT, PPTX up to 10MB"})]})}),r.jsx("button",{type:"submit",disabled:j||!g,className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?"Processing...":"Generate Notes"})]})}),r.jsx("div",{className:"text-center mt-8",children:r.jsx("button",{onClick:()=>e.push("/"),className:"text-green-600 hover:text-green-800 hover:underline",children:"← Back to Home"})})]})}),D&&r.jsx(l.Z,{isOpen:D,onClose:()=>C(!1),title:"Sign In to Upload Files",message:"Please sign in to start generating educational notes from your uploaded files."}),q&&r.jsx(d.Z,{isOpen:q,onClose:()=>T(!1),title:S.title,message:S.message,feature:S.feature})]})}},47678:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/janjedrach/Cursor/eduscribe/src/app/generate/upload/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,8486,8796,9876],()=>s(67259));module.exports=r})();