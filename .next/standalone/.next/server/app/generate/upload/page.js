(()=>{var e={};e.id=1671,e.ids=[1671],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},67259:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),t(47678),t(55801),t(35866);var a=t(23191),s=t(88716),o=t(37922),l=t.n(o),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(r,n);let d=["",{children:["generate",{children:["upload",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,47678)),"/Users/janjedrach/Cursor/eduscribe/src/app/generate/upload/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,55801)),"/Users/janjedrach/Cursor/eduscribe/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/janjedrach/Cursor/eduscribe/src/app/generate/upload/page.tsx"],u="/generate/upload/page",p={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/generate/upload/page",pathname:"/generate/upload",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},44486:(e,r,t)=>{Promise.resolve().then(t.bind(t,14791))},14791:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(10326),s=t(17577),o=t(35047),l=t(73189),i=t(83640),n=t(71511),d=t(71814),c=t(45478);function u(){let e=(0,o.useRouter)(),{user:r,supabase:t}=(0,l.$)(),{canUploadPPT:u,canGenerateNotes:p,canSaveNotes:x,refreshUsage:m}=(0,i.m)(),[g,h]=(0,s.useState)(null),[b,v]=(0,s.useState)(""),[f,y]=(0,s.useState)(!1),[j,w]=(0,s.useState)(""),[P,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)(!1),[C,D]=(0,s.useState)(!1),[q,T]=(0,s.useState)({title:"",message:"",feature:""}),_=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?N(!0):"dragleave"===e.type&&N(!1)},A=e=>{if(e.size>10485760){w("File size must be less than 10MB");return}if(["application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint"].includes(e.type)&&!u){T({title:"PowerPoint Upload Restricted",message:"Upgrade to Student or Pro plan to upload PowerPoint presentations.",feature:"PowerPoint uploads"}),D(!0);return}let r=["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword"];if(u&&r.push("application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint"),!r.includes(e.type)){let e=u?"PDF, TXT, DOC, DOCX, PPT, or PPTX files":"PDF, TXT, DOC, or DOCX files";w(`Please upload ${e}`);return}h(e),w("")},F=async a=>{if(a.preventDefault(),!g){w("Please select a file to upload");return}if(!r){S(!0);return}if(!p){T({title:"Monthly Limit Reached",message:"You've reached your plan limit. Upgrade your plan to generate more notes.",feature:"additional note generation"}),D(!0);return}if(!x){T({title:"Storage Limit Reached",message:"You've reached your plan limit. Upgrade your plan to store more notes.",feature:"additional note storage"}),D(!0);return}y(!0),w("");try{let{data:{session:r}}=await t.auth.getSession();if(!r?.access_token){w("Authentication required. Please log in again.");return}let a=new FormData;a.append("file",g),b.trim()&&a.append("title",b.trim());let s=await fetch("/api/file-notes",{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`},body:a});if(s.ok){let r=await s.json();if(console.log("[Upload Generate] Note generation successful:",r),r.success&&r.data)await m(),e.push("/dashboard");else throw Error(r.message||"Failed to generate notes")}else{let e=await s.json();throw Error(e.message||"Failed to generate notes")}}catch(e){w(e.message||"Failed to generate notes. Please try again."),console.error("Error:",e)}finally{y(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:[f&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(31, 34, 53, 0.9)",backdropFilter:"blur(5px)"},children:a.jsx("div",{className:"p-8 max-w-md mx-4 rounded-2xl",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-xl)"},children:a.jsx(c.Z,{message:"Generating Notes...",subMessage:"This could take a moment – please wait while we process your file."})})}),a.jsx("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4",style:{background:"linear-gradient(135deg, var(--color-file) 0%, var(--color-cta) 100%)",boxShadow:"var(--glow-file)"},children:a.jsx("svg",{className:"w-10 h-10",fill:"white",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),a.jsx("h1",{className:"text-4xl font-bold mb-4",style:{color:"var(--text-primary)"},children:"Upload File for Notes"}),a.jsx("p",{className:"text-lg leading-relaxed",style:{color:"var(--text-secondary)"},children:"Upload your documents and convert them into organized, searchable notes."})]}),(0,a.jsxs)("div",{className:"rounded-2xl p-6 mb-8",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[a.jsx("h3",{className:"font-semibold mb-3",style:{color:"var(--color-file)"},children:"Supported file types:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-2",style:{color:"var(--text-secondary)"},children:[(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"PDF files"})," - Documents, research papers, articles"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Word documents"})," - .doc and .docx files"]}),u&&(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"PowerPoint presentations"})," - .ppt and .pptx files"]}),(0,a.jsxs)("li",{children:[a.jsx("strong",{children:"Text files"})," - .txt files with plain text"]})]}),!u&&a.jsx("div",{className:"mt-4 p-3 rounded-xl",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1))",border:"1px solid rgba(59, 130, 246, 0.3)"},children:(0,a.jsxs)("p",{className:"text-sm",style:{color:"var(--color-cta)"},children:[a.jsx("strong",{children:"\uD83D\uDCA1 Want PowerPoint support?"})," Upgrade to Student or Pro plan to upload presentations.",a.jsx("button",{onClick:()=>e.push("/pricing"),className:"ml-2 underline hover:opacity-80 transition-opacity",children:"View Plans"})]})}),a.jsx("div",{className:"mt-4 p-3 rounded-xl",style:{background:"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.1))",border:"1px solid rgba(34, 197, 94, 0.3)"},children:(0,a.jsxs)("p",{className:"text-sm",style:{color:"var(--color-file)"},children:[a.jsx("strong",{children:"Tip:"})," For best results, ensure your file contains clear, readable text.",u&&" PowerPoint slides will be converted with slide titles as section headings."]})})]}),j&&a.jsx("div",{className:"rounded-2xl p-4 mb-6",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.3)",boxShadow:"0 0 20px rgba(239, 68, 68, 0.1)"},children:a.jsx("p",{style:{color:"#ef4444"},children:j})}),a.jsx("div",{className:"rounded-2xl p-8 mb-8",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:(0,a.jsxs)("form",{onSubmit:F,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-semibold mb-3",style:{color:"var(--text-primary)"},children:"Title (Optional)"}),a.jsx("input",{type:"text",id:"title",value:b,onChange:e=>v(e.target.value),placeholder:"Enter a custom title for your notes...",className:"w-full px-4 py-3 rounded-xl transition-all duration-300 focus:ring-2 focus:ring-[var(--color-file)] focus:outline-none",style:{background:"var(--bg-primary)",border:"1px solid var(--bg-tertiary)",color:"var(--text-primary)",boxShadow:"var(--shadow-sm)"},disabled:f}),a.jsx("p",{className:"mt-2 text-sm",style:{color:"var(--text-muted)"},children:"Give your notes a descriptive title to help you find them later"})]}),a.jsx("div",{className:`border-2 border-dashed rounded-2xl p-8 text-center transition-all duration-300 ${P?"scale-102":g?"scale-102":"hover:scale-101"}`,style:{borderColor:P?"var(--color-file)":g?"var(--color-file)":"var(--bg-tertiary)",background:P||g?"linear-gradient(135deg, rgba(138, 212, 255, 0.1), rgba(34, 197, 94, 0.1))":"var(--bg-primary)",boxShadow:P||g?"var(--glow-file)":"var(--shadow-sm)"},onDragEnter:_,onDragLeave:_,onDragOver:_,onDrop:e=>{e.preventDefault(),e.stopPropagation(),N(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&A(e.dataTransfer.files[0])},children:g?(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",style:{background:"linear-gradient(135deg, var(--color-file) 0%, var(--color-cta) 100%)",boxShadow:"var(--glow-file)"},children:a.jsx("svg",{className:"w-8 h-8",fill:"white",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:g.name}),(0,a.jsxs)("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:[(g.size/1024/1024).toFixed(2)," MB"]})]}),a.jsx("button",{type:"button",onClick:()=>h(null),className:"px-4 py-2 rounded-xl font-semibold transition-all duration-300 hover:scale-105",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",boxShadow:"0 0 20px rgba(239, 68, 68, 0.3)"},children:"Remove file"})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center mx-auto",style:{background:"var(--bg-tertiary)",border:"2px dashed var(--bg-tertiary)"},children:a.jsx("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",style:{color:"var(--text-muted)"},children:a.jsx("path",{d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"})})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-lg font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Drag and drop your file here"}),a.jsx("p",{className:"mb-3",style:{color:"var(--text-muted)"},children:"or"}),(0,a.jsxs)("label",{className:"cursor-pointer",children:[a.jsx("span",{className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 inline-block",style:{background:"linear-gradient(135deg, var(--color-file) 0%, var(--color-cta) 100%)",color:"var(--bg-primary)",boxShadow:"var(--glow-file)"},children:"browse to choose a file"}),a.jsx("input",{type:"file",className:"hidden",accept:".pdf,.txt,.doc,.docx,.ppt,.pptx",onChange:e=>{let r=e.target.files?.[0];r&&A(r)},disabled:f})]})]}),a.jsx("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:"PDF, TXT, DOC, DOCX, PPT, PPTX up to 10MB"})]})}),a.jsx("button",{type:"submit",disabled:f||!g,className:"w-full py-4 px-6 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",style:{background:f||!g?"var(--bg-tertiary)":"linear-gradient(135deg, var(--color-file) 0%, var(--color-cta) 100%)",color:f||!g?"var(--text-muted)":"var(--bg-primary)",boxShadow:f||!g?"var(--shadow-sm)":"var(--glow-file)"},children:f?"Processing...":"Generate Notes"})]})}),a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:()=>e.push("/"),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-sm)"},children:"← Back to Home"})})]})}),k&&a.jsx(n.Z,{isOpen:k,onClose:()=>S(!1),title:"Sign In to Upload Files",message:"Please sign in to start generating educational notes from your uploaded files."}),C&&a.jsx(d.Z,{isOpen:C,onClose:()=>D(!1),title:q.title,message:q.message,feature:q.feature})]})}},47678:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/janjedrach/Cursor/eduscribe/src/app/generate/upload/page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[9276,4262,5773,9876],()=>t(67259));module.exports=a})();