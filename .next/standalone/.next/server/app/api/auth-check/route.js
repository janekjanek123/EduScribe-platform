(()=>{var e={};e.id=1811,e.ids=[1811],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},50206:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>I,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>x,serverHooks:()=>A,staticGenerationAsyncStorage:()=>k});var s={};r.r(s),r.d(s,{GET:()=>p,HEAD:()=>l,dynamic:()=>m});var i=r(49303),a=r(88716),o=r(60670),u=r(87070),n=r(23517),c=r(20344),d=r(71615);async function h(e){try{let t=(0,n.eI)("https://xhljckmlzdshxibnqsbj.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhobGpja21semRzaHhpYm5xc2JqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NDIwNzIsImV4cCI6MjA2MzQxODA3Mn0.UuU3QBxwY3-DsSpXB-UiKarjgZWiFAFIzFbgUqacmIA"),{data:r,error:s}=await t.auth.getUser(e);if(r?.user&&!s)return console.log("[API] Auth-check: Token validation successful:",r.user.id),{user:r.user,authMethod:"token"};return console.error("[API] Auth-check: Token validation failed:",s?.message),null}catch(e){return console.error("[API] Auth-check: Error validating token:",e),null}}async function l(e){console.log("[API] HEAD /api/auth-check - Auth verification endpoint");let t=e.headers.get("x-middleware-user"),r=e.headers.get("x-middleware-auth-method");if(!t){let s=e.headers.get("Authorization"),i=null;if(s&&s.startsWith("Bearer ")?(i=s.replace("Bearer ",""),console.log("[API] Auth-check: Middleware headers missing, validating token from Authorization header")):(i=new URL(e.url).searchParams.get("token"))&&console.log("[API] Auth-check: Validating token from URL query parameters"),i){let e=await h(i);e&&(t=JSON.stringify({id:e.user.id,email:e.user.email}),r=e.authMethod)}}let s=e.headers.get("x-user-id"),i=e.headers.get("x-user-email");if(!s&&t)try{let e=JSON.parse(t);s=e.id,i=e.email}catch(e){console.error("[API] Auth-check: Error parsing middleware user for headers:",e)}return new u.NextResponse(null,{status:200,headers:{"x-middleware-user":t||"","x-middleware-auth-method":r||"","x-user-id":s||"","x-user-email":i||"","x-auth-method":r||"","Access-Control-Expose-Headers":"x-middleware-user, x-middleware-auth-method, x-user-id, x-user-email, x-auth-method"}})}async function p(e){try{let e=(0,d.cookies)(),t=(0,c.createRouteHandlerClient)({cookies:()=>e}),r=e.has("sb-access-token"),s=e.has("sb-refresh-token"),i=e.getAll().map(e=>e.name);console.log("[API] Auth check - cookies present:",{hasSbAccessToken:r,hasSbRefreshToken:s,cookieCount:e.size,cookieNames:i});let{data:{session:a},error:o}=await t.auth.getSession();if(a)return u.NextResponse.json({authenticated:!0,user:{id:a.user.id,email:a.user.email},cookieStatus:{hasSbAccessToken:r,hasSbRefreshToken:s}});return u.NextResponse.json({authenticated:!1,error:o?.message||"No active session",cookieStatus:{hasSbAccessToken:r,hasSbRefreshToken:s,cookieCount:e.size}})}catch(e){return u.NextResponse.json({authenticated:!1,error:e.message||"Error checking authentication"},{status:500})}}let m="force-dynamic",x=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth-check/route",pathname:"/api/auth-check",filename:"route",bundlePath:"app/api/auth-check/route"},resolvedPagePath:"/Users/janjedrach/Cursor/eduscribe/src/app/api/auth-check/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:k,serverHooks:A}=x,I="/api/auth-check/route";function f(){return(0,o.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:k})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5972,3517,958],()=>r(50206));module.exports=s})();