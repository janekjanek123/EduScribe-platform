"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{4345:function(e,s,t){t.d(s,{Z:function(){return l}});var r=t(7437),a=t(9376);function l(e){let{questionCount:s=5}=e,t=(0,a.useRouter)();return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"filter blur-sm pointer-events-none",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["\uD83D\uDCDD Interactive Quiz (",s," questions)"]}),Array.from({length:Math.min(s,3)}).map((e,s)=>(0,r.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["Question ",s+1]}),(0,r.jsx)("p",{className:"text-gray-900 font-medium",children:"This is a sample quiz question that would appear here..."})]}),(0,r.jsx)("div",{className:"space-y-2",children:["A","B","C"].map(e=>(0,r.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,r.jsx)("input",{type:"radio",name:"question-".concat(s),className:"h-4 w-4 text-blue-600",disabled:!0}),(0,r.jsxs)("span",{className:"text-gray-700",children:[e,". Sample answer option"]})]},e))})]},s)),(0,r.jsx)("button",{disabled:!0,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md font-medium opacity-50",children:"Submit Quiz"})]})}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:(0,r.jsxs)("div",{className:"text-center p-6 max-w-sm",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)("svg",{className:"w-12 h-12 text-blue-600 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Unlock Interactive Quizzes"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4 text-sm",children:"Upgrade to unlock interactive quizzes for your notes and test your knowledge."}),(0,r.jsx)("button",{onClick:()=>t.push("/pricing"),className:"bg-blue-600 text-white px-6 py-2 rounded-md font-medium hover:bg-blue-700 transition-colors",children:"Upgrade Plan"})]})})]})}},2690:function(e,s,t){t.d(s,{Z:function(){return n}});var r=t(7437),a=t(2265),l=t(7124);function n(e){let{questions:s,noteId:t,noteType:n,onComplete:i}=e,{user:o,supabase:d}=(0,l.$)(),[c,m]=(0,a.useState)(0),[u,x]=(0,a.useState)([]),[b,h]=(0,a.useState)(""),[g,p]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),[f,y]=(0,a.useState)(""),[w,v]=(0,a.useState)(!1);if(!s||0===s.length)return(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Quiz Not Available"}),(0,r.jsx)("p",{className:"text-yellow-700",children:"No quiz questions are available for this note."})]});let D=e=>{h(e)},z=async e=>{if(!o){y("You must be logged in to submit quiz answers");return}p(!0),y("");try{let{data:{session:s}}=await d.auth.getSession(),r=null==s?void 0:s.access_token;if(!r)throw Error("No authentication token available");console.log("[Quiz] Submitting quiz answers:",{noteId:t,noteType:n,answersCount:e.length});let a=await fetch("/api/quiz-attempts",{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({noteId:t,noteType:n,answers:e})});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to submit quiz")}let l=await a.json();if(!l.success)throw Error(l.message||"Quiz submission failed");console.log("[Quiz] Quiz submitted successfully:",l.data);let o={score:l.data.score,correctAnswers:l.data.correctAnswers,totalQuestions:l.data.totalQuestions,percentage:l.data.percentage,completedAt:l.data.completedAt,userAnswers:e};N(o),i&&i(o.score,o.totalQuestions)}catch(e){console.error("[Quiz] Error submitting quiz:",e),y(e.message||"Failed to submit quiz")}finally{p(!1)}},C=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-600";if(j){var A;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAF"})}),(0,r.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Quiz Completed!"}),(0,r.jsxs)("div",{className:"text-4xl font-bold mb-2 ".concat(C(j.percentage)),children:[j.percentage,"%"]}),(0,r.jsxs)("p",{className:"text-lg text-gray-600 mb-4",children:[j.correctAnswers," out of ",j.totalQuestions," correct"]}),(0,r.jsx)("p",{className:"text-xl font-semibold text-gray-800 mb-6",children:(A=j.percentage)>=90?"Excellent! \uD83C\uDF89":A>=80?"Great job! \uD83D\uDC4F":A>=70?"Good work! \uD83D\uDC4D":A>=60?"Not bad! \uD83D\uDCDA":"Keep studying! \uD83D\uDCAA"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Score Breakdown:"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Correct Answers:"}),(0,r.jsx)("span",{className:"font-semibold ml-2 text-green-600",children:j.correctAnswers})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Total Questions:"}),(0,r.jsx)("span",{className:"font-semibold ml-2",children:j.totalQuestions})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Accuracy:"}),(0,r.jsxs)("span",{className:"font-semibold ml-2 ".concat(C(j.percentage)),children:[j.percentage,"%"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Completed:"}),(0,r.jsx)("span",{className:"font-semibold ml-2",children:new Date(j.completedAt).toLocaleString()})]})]})]}),(0,r.jsxs)("button",{onClick:()=>v(!w),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors mr-3",children:[w?"Hide":"Show"," Detailed Results"]}),(0,r.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Take Quiz Again"})]}),w&&j.userAnswers&&(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,r.jsx)("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"\uD83D\uDCCB Detailed Results"}),(0,r.jsx)("div",{className:"space-y-6",children:s.map((e,s)=>{let t=j.userAnswers[s],a=t===e.correctAnswer;return(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ".concat(a?"bg-green-500":"bg-red-500"),children:a?"✓":"✗"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h5",{className:"font-semibold text-gray-900 mb-2",children:["Question ",s+1,": ",e.question]}),(0,r.jsx)("div",{className:"space-y-2 mb-3",children:Object.entries(e.options).map(s=>{let[l,n]=s,i="p-2 rounded border ";return l===e.correctAnswer?i+="bg-green-100 border-green-300 text-green-800":l!==t||a?i+="bg-gray-50 border-gray-200 text-gray-700":i+="bg-red-100 border-red-300 text-red-800",(0,r.jsxs)("div",{className:i,children:[(0,r.jsxs)("span",{className:"font-semibold mr-2",children:[l,"."]}),n,l===e.correctAnswer&&(0,r.jsx)("span",{className:"ml-2 text-green-600 font-semibold",children:"✓ Correct"}),l===t&&!a&&(0,r.jsx)("span",{className:"ml-2 text-red-600 font-semibold",children:"✗ Your Answer"})]},l)})}),(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat(a?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[(0,r.jsx)("p",{className:"font-semibold ".concat(a?"text-green-800":"text-red-800"),children:a?"✅ Correct!":"❌ Incorrect"}),!a&&(0,r.jsxs)("p",{className:"text-red-700 text-sm mt-1",children:["Your answer: ",(0,r.jsx)("strong",{children:t})," | Correct answer: ",(0,r.jsx)("strong",{children:e.correctAnswer})]}),e.explanation&&(0,r.jsx)("div",{className:"mt-2 pt-2 border-t border-gray-300",children:(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,r.jsx)("strong",{children:"Explanation:"})," ",e.explanation]})})]})]})]})},e.id)})})]})]})}let Q=s[c],k=(c+1)/s.length*100;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCDD Quiz Time!"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Question ",c+1," of ",s.length]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(k,"%")}})})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:Q.question}),(0,r.jsx)("div",{className:"space-y-3",children:Object.entries(Q.options).map(e=>{let[s,t]=e;return(0,r.jsxs)("button",{onClick:()=>D(s),className:"w-full text-left p-4 rounded-lg border-2 transition-all duration-200 ".concat(b===s?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,r.jsxs)("span",{className:"font-semibold mr-3",children:[s,"."]}),t]},s)})})]}),f&&(0,r.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,r.jsx)("p",{className:"text-red-600",children:f})}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("div",{className:"text-sm text-gray-600",children:b?"Selected: ".concat(b):"Select an answer to continue"}),(0,r.jsx)("button",{onClick:()=>{if(!b)return;let e=[...u,b];x(e),h(""),c<s.length-1?m(c+1):z(e)},disabled:!b||g,className:"px-6 py-2 rounded-md font-semibold transition-colors ".concat(b&&!g?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:g?(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):c===s.length-1?"Finish Quiz":"Next Question"})]})]})}}}]);