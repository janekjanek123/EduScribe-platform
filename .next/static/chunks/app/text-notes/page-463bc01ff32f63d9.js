(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{7449:function(e,t,r){Promise.resolve().then(r.bind(r,3958))},3958:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),o=r(2265),s=r(9376),n=r(6202),l=r(7124),i=r(471),c=r(2690),d=r(4345),x=r(2703);function m(){let e=(0,s.useRouter)(),t=(0,s.useSearchParams)(),r=null==t?void 0:t.get("id"),{user:m,supabase:u}=(0,l.$)(),[h,b]=(0,o.useState)(null),[g,p]=(0,o.useState)(!0),[v,y]=(0,o.useState)(""),[f,j]=(0,o.useState)(!1),{canUseQuizzes:N}=(0,i.m)(),[w,k]=(0,o.useState)(!0);(0,o.useEffect)(()=>{if(!r){y("No note ID provided"),p(!1);return}if(!m){y("Please log in to view notes"),p(!1);return}(async()=>{try{p(!0),y("");let{data:{session:e}}=await u.auth.getSession(),t=null==e?void 0:e.access_token;if(!t)throw Error("No authentication token available");console.log("[TextNotesPage] Fetching note with ID: ".concat(r));let a=await fetch("/api/text-notes",{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to fetch notes")}let o=await a.json();if(!o.success||!o.data)throw Error("No notes data received");let s=o.data.find(e=>e.id===r);if(!s)throw Error("Note not found");console.log("[TextNotesPage] Note found:",s),b(s)}catch(e){console.error("[TextNotesPage] Error fetching note:",e),y(e.message||"Failed to load note")}finally{p(!1)}})()},[r,m,u]);let D=async()=>{if(r&&m)try{let{data:{session:t}}=await u.auth.getSession(),a=null==t?void 0:t.access_token;if(!a)throw Error("No authentication token available");console.log("[TextNotesPage] Deleting note with ID: ".concat(r));let o=await fetch("/api/text-notes?id=".concat(r),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!o.ok){let e=await o.json();throw Error(e.message||"Failed to delete note")}console.log("[TextNotesPage] Successfully deleted note: ".concat(r)),e.push("/dashboard")}catch(e){console.error("[TextNotesPage] Error deleting note:",e),y(e.message||"Failed to delete note"),j(!1)}};return m?g?(0,a.jsx)("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full animate-spin mx-auto mb-6",style:{border:"4px solid var(--bg-tertiary)",borderTop:"4px solid var(--color-text)"}}),(0,a.jsx)("h2",{className:"text-2xl font-semibold",style:{color:"var(--text-primary)"},children:"Loading your text notes..."})]})})})}):v?(0,a.jsx)("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"p-6 text-center rounded-2xl",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"2px solid #ef4444",boxShadow:"0 0 20px rgba(239, 68, 68, 0.3)"},children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:{color:"#ef4444"},children:"Error"}),(0,a.jsx)("p",{className:"mb-6",style:{color:"var(--text-secondary)"},children:v}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--color-cta)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Back to Dashboard"}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--bg-tertiary)"},children:"Try Again"})]})]})})})}):h?(0,a.jsxs)("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:[(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("div",{className:"rounded-2xl p-6 mb-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, var(--color-text) 0%, var(--color-file) 100%)",boxShadow:"var(--glow-text)"},children:(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCDD"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:[h.title||"Text Notes"," â€“ ",new Date(h.created_at).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"text-sm",style:{color:"var(--text-muted)"},children:["Created: ",new Date(h.created_at).toLocaleString()]})]}),(0,a.jsx)("div",{className:"flex flex-col justify-end",children:(0,a.jsx)(x.Z,{noteId:h.id,noteType:"text",noteTitle:h.title||"Text Notes",noteContent:w?h.content:h.summary||h.content,className:"text-sm"})})]})}),(0,a.jsxs)("div",{className:"rounded-2xl p-6 mb-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",style:{color:"var(--text-primary)"},children:"Generated Notes"}),(0,a.jsx)("div",{className:"flex items-center gap-3",children:h.summary&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>k(!0),className:"px-4 py-2 rounded-xl font-medium transition-all duration-300 ".concat(w?"transform scale-105":""),style:{background:w?"var(--color-cta)":"var(--bg-tertiary)",color:w?"var(--bg-primary)":"var(--text-secondary)",boxShadow:w?"var(--glow-cta)":"none"},children:"\uD83D\uDCD6 View Full Notes"}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"px-4 py-2 rounded-xl font-medium transition-all duration-300 ".concat(w?"":"transform scale-105"),style:{background:w?"var(--bg-tertiary)":"var(--color-cta)",color:w?"var(--text-secondary)":"var(--bg-primary)",boxShadow:w?"none":"var(--glow-cta)"},children:"\uD83D\uDCDD View Summary"})]})})]}),(0,a.jsx)("div",{className:"prose max-w-none prose-invert",style:{color:"var(--text-secondary)"},children:w?(0,a.jsx)(n.UG,{children:h.content}):(0,a.jsxs)("div",{className:"summary-section",children:[(0,a.jsx)("h3",{style:{color:"var(--text-primary)"},children:"\uD83D\uDCDD Summary Version"}),(0,a.jsx)(n.UG,{children:h.summary||"Summary not available."})]})})]}),h.quiz&&h.quiz.length>0&&(0,a.jsxs)("div",{className:"rounded-2xl p-6 mb-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"\uD83D\uDCDD Test Your Knowledge"}),N?(0,a.jsx)(c.Z,{questions:h.quiz,noteId:h.id,noteType:"text",onComplete:(e,t)=>{console.log("Quiz completed: ".concat(e,"% (").concat(e*t/100,"/").concat(t,")"))}}):(0,a.jsx)(d.Z,{questionCount:h.quiz.length})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-sm)"},children:"â† Back to Dashboard"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:()=>j(!0),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 flex items-center gap-2",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",boxShadow:"0 0 20px rgba(239, 68, 68, 0.3)"},children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Note"]}),(0,a.jsx)("button",{onClick:()=>e.push("/generate/text"),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--color-cta)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Generate More Notes â†’"})]})]})]})}),f&&(0,a.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:(0,a.jsxs)("div",{className:"rounded-2xl p-6 max-w-md w-full mx-4",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-xl)"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",boxShadow:"0 0 20px rgba(239, 68, 68, 0.3)"},children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold",style:{color:"var(--text-primary)"},children:"Delete Note"})]}),(0,a.jsxs)("p",{className:"mb-6",style:{color:"var(--text-secondary)"},children:['Are you sure you want to delete "',(0,a.jsx)("strong",{style:{color:"var(--text-primary)"},children:null==h?void 0:h.title}),'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:()=>j(!1),className:"px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105",style:{background:"var(--bg-tertiary)",color:"var(--text-primary)",border:"1px solid var(--bg-tertiary)"},children:"Cancel"}),(0,a.jsx)("button",{onClick:D,className:"px-6 py-3 rounded-xl font-medium transition-all duration-300 transform hover:scale-105",style:{background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",boxShadow:"0 0 20px rgba(239, 68, 68, 0.3)"},children:"Delete Note"})]})]})})]}):(0,a.jsx)("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6",style:{color:"var(--text-primary)"},children:"Note not found"}),(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--color-cta)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Back to Dashboard"})]})})})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--bg-primary)"},children:(0,a.jsxs)("div",{className:"text-center p-8 rounded-2xl",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-6",style:{color:"var(--text-primary)"},children:"Please log in to view notes"}),(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--color-cta)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Go to Login"})]})})}function u(){return(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--bg-primary)"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full animate-spin mx-auto mb-6",style:{border:"4px solid var(--bg-tertiary)",borderTop:"4px solid var(--color-text)"}}),(0,a.jsx)("p",{style:{color:"var(--text-secondary)"},children:"Loading text notes..."})]})}),children:(0,a.jsx)(m,{})})}},2703:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(7437),o=r(2265);function s(e){let{noteId:t,noteType:r,noteTitle:s,noteContent:n,className:l=""}=e,[i,c]=(0,o.useState)(!1),[d,x]=(0,o.useState)(!1),m=async()=>{if(!i){c(!0);try{let e="EDUSCRIBE: ".concat(s,"\n\n").concat("=".repeat(50),"\n\n").concat(n,"\n\n").concat("=".repeat(50),"\nGenerated by EduScribe - AI-powered note generation\n").replace(/#{1,6}\s+/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\[(.*?)\]\(.*?\)/g,"$1").replace(/---+/g,"â”€".repeat(50)).replace(/â€¢/g,"- ").replace(/ðŸ“|ðŸ“–|ðŸŽ¥|ðŸ“¹|ðŸ“„|ðŸ“|ðŸ§ |â­|ðŸ”¥/g,"").trim(),t=new Blob([e],{type:"text/plain;charset=utf-8"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="eduscribe_note.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),x(!0),setTimeout(()=>x(!1),3e3)}catch(e){console.error("Failed to export note:",e)}finally{c(!1)}}};return d?(0,a.jsx)("div",{className:"relative group",children:(0,a.jsxs)("button",{disabled:!0,className:"bg-green-600 text-white px-3 py-1.5 rounded-md flex items-center gap-2 ".concat(l),children:[(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Downloaded!"]})}):i?(0,a.jsx)("div",{className:"relative group",children:(0,a.jsxs)("button",{disabled:!0,className:"bg-purple-600 text-white px-3 py-1.5 rounded-md flex items-center gap-2 ".concat(l),children:[(0,a.jsx)("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]})}):(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{onClick:m,className:"bg-purple-600 text-white px-3 py-1.5 rounded-md hover:bg-purple-700 transition-colors flex items-center gap-2 ".concat(l),children:[(0,a.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Notatnik"]}),(0,a.jsx)("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-10",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap",children:["Downloads as .txt file - open with Notepad or any text editor",(0,a.jsx)("div",{className:"absolute top-full right-6 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})})]})}}},function(e){e.O(0,[395,202,471,34,971,117,744],function(){return e(e.s=7449)}),_N_E=e.O()}]);