(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[538],{7408:function(e,t,s){Promise.resolve().then(s.bind(s,4354))},4354:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),r=s(2265),o=s(9376),i=s(7124),l=s(471),n=s(8497),u=s(2e3),d=s(5057);function c(){let e=(0,o.useRouter)(),{user:t,supabase:s}=(0,i.$)(),{canUseYouTube:c,canGenerateNotes:m,canSaveNotes:h,refreshUsage:b}=(0,l.m)(),[g,x]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[y,j]=(0,r.useState)(!1),[w,v]=(0,r.useState)(""),[N,k]=(0,r.useState)(!1),[S,T]=(0,r.useState)(!1),[Y,C]=(0,r.useState)({title:"",message:"",feature:""}),P=async a=>{if(a.preventDefault(),!g.trim()){v("Please enter a YouTube URL");return}if(!/^(https?:\/\/)?(www\.)?(youtube\.com|youtu\.be)\/.+/.test(g)){v("Please enter a valid YouTube URL");return}if(!t){k(!0);return}if(!m){C({title:"Monthly Limit Reached",message:"You've reached your plan limit. Upgrade your plan to generate more notes.",feature:"additional note generation"}),T(!0);return}if(!h){C({title:"Storage Limit Reached",message:"You've reached your plan limit. Upgrade your plan to store more notes.",feature:"additional note storage"}),T(!0);return}j(!0),v("");try{let{data:{session:t}}=await s.auth.getSession();if(!(null==t?void 0:t.access_token)){v("Authentication required. Please log in again.");return}let a=await fetch("/api/video-notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.access_token)},body:JSON.stringify({url:g,title:p.trim()||void 0})});if(a.ok){let t=await a.json();if(console.log("[YouTube Generate] Note generation successful:",t),t.success&&t.data)await b(),e.push("/dashboard");else throw Error(t.message||"Failed to generate notes")}else{let e=await a.json();throw Error(e.message||"Failed to generate notes")}}catch(e){v(e.message||"Failed to generate notes. Please try again."),console.error("Error:",e)}finally{j(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:(0,a.jsx)(d.Z,{message:"Generating Notes...",subMessage:"This could take a moment – please wait while we process your YouTube video."})})}),(0,a.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCFA"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"YouTube Video Notes"}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Generate comprehensive notes from any YouTube video by pasting the URL below."})]}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:[(0,a.jsx)("h3",{className:"font-semibold text-blue-900 mb-3",children:"How to use:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-blue-800",children:[(0,a.jsx)("li",{children:"Copy the YouTube video URL from your browser"}),(0,a.jsx)("li",{children:"Paste it in the input field below"}),(0,a.jsx)("li",{children:'Click "Generate Notes" and wait for processing'}),(0,a.jsx)("li",{children:"Your notes will be ready in a few minutes"})]})]}),w&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,a.jsx)("p",{className:"text-red-800",children:w})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:(0,a.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Optional)"}),(0,a.jsx)("input",{type:"text",id:"title",value:p,onChange:e=>f(e.target.value),placeholder:"Enter a custom title for your notes...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:y}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Give your notes a descriptive title to help you find them later"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700 mb-2",children:"YouTube Video URL"}),(0,a.jsx)("input",{type:"url",id:"url",value:g,onChange:e=>x(e.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:y})]}),(0,a.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:y?"Processing...":"Generate Notes"})]})}),(0,a.jsx)("div",{className:"text-center mt-8",children:(0,a.jsx)("button",{onClick:()=>e.push("/"),className:"text-blue-600 hover:text-blue-800 hover:underline",children:"← Back to Home"})})]})}),(0,a.jsx)(n.Z,{isOpen:N,onClose:()=>k(!1),title:"Sign In to Generate Video Notes",message:"Please sign in to start generating educational notes from YouTube videos."}),(0,a.jsx)(u.Z,{isOpen:S,onClose:()=>T(!1),title:Y.title,message:Y.message,feature:Y.feature})]})}}},function(e){e.O(0,[395,471,842,971,117,744],function(){return e(e.s=7408)}),_N_E=e.O()}]);