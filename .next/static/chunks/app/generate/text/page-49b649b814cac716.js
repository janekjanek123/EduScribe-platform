(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[63],{6181:function(e,t,s){Promise.resolve().then(s.bind(s,1676))},1676:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var r=s(7437),a=s(2265),n=s(9376),l=s(7124),o=s(471),i=s(8497),c=s(2e3),d=s(5057);function u(){let e=(0,n.useRouter)(),{user:t,supabase:s}=(0,l.$)(),{canGenerateNotes:u,canSaveNotes:x,limits:m,refreshUsage:h}=(0,o.m)(),[g,p]=(0,a.useState)(""),[b,f]=(0,a.useState)(""),[j,y]=(0,a.useState)(!1),[N,w]=(0,a.useState)(""),[v,_]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[C,T]=(0,a.useState)({title:"",message:"",feature:""}),P=async r=>{if(r.preventDefault(),!g.trim()){w("Please enter some text to generate notes from");return}if(!t){_(!0);return}if(g.length>m.max_text_length){T({title:"Text Length Limit Exceeded",message:"Your text is ".concat(g.length," characters, but your plan allows up to ").concat(m.max_text_length," characters. Upgrade your plan for longer text support."),feature:"extended text length"}),k(!0);return}if(!u){T({title:"Monthly Limit Reached",message:"You've reached your plan limit. Upgrade your plan to generate more notes.",feature:"additional note generation"}),k(!0);return}if(!x){T({title:"Storage Limit Reached",message:"You've reached your plan limit. Upgrade your plan to store more notes.",feature:"additional note storage"}),k(!0);return}y(!0),w("");try{let{data:{session:t}}=await s.auth.getSession();if(!(null==t?void 0:t.access_token)){w("Authentication required. Please log in again.");return}let r=await fetch("/api/text-notes",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.access_token)},body:JSON.stringify({text:g.trim(),title:b.trim()||"Text Notes"})});if(r.ok){let t=await r.json();if(console.log("[Text Generate] Note generation successful:",t),t.success&&t.data)await h(),e.push("/dashboard");else throw Error(t.message||"Failed to generate notes")}else{let e=await r.json();throw Error(e.message||"Failed to generate notes")}}catch(e){w(e.message||"Failed to generate notes. Please try again."),console.error("Error:",e)}finally{y(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[j&&(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50",children:(0,r.jsx)("div",{className:"bg-white rounded-lg p-8 max-w-md mx-4",children:(0,r.jsx)(d.Z,{message:"Generating Notes...",subMessage:"This could take a moment – please wait while we process your text content."})})}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-4xl",children:"✏️"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Text Input Notes"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Paste any text content and transform it into well-structured, comprehensive notes."})]}),(0,r.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6 mb-8",children:[(0,r.jsx)("h3",{className:"font-semibold text-purple-900 mb-3",children:"How to use:"}),(0,r.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-purple-800",children:[(0,r.jsx)("li",{children:"Copy text from articles, books, research papers, or any source"}),(0,r.jsx)("li",{children:"Paste it in the text area below"}),(0,r.jsx)("li",{children:"Add an optional title to organize your notes"}),(0,r.jsx)("li",{children:'Click "Generate Notes" to create structured summaries'})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-purple-100 rounded",children:(0,r.jsxs)("p",{className:"text-sm text-purple-700",children:[(0,r.jsx)("strong",{children:"Tip:"})," The more detailed your input text, the more comprehensive and useful your generated notes will be."]})}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-blue-100 rounded border border-blue-200",children:(0,r.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,r.jsxs)("strong",{children:["Your plan allows up to ",m.max_text_length.toString()," characters."]}),m.max_text_length<5e4&&(0,r.jsxs)(r.Fragment,{children:[" ","Need more?",(0,r.jsx)("button",{onClick:()=>e.push("/pricing"),className:"ml-1 text-blue-600 hover:text-blue-800 underline",children:"Upgrade your plan"})]})]})})]}),N&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("p",{className:"text-red-800",children:N})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:(0,r.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Title (Optional)"}),(0,r.jsx)("input",{type:"text",id:"title",value:b,onChange:e=>f(e.target.value),placeholder:"Enter a title for your notes...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:j})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Content"}),(0,r.jsx)("textarea",{id:"text",value:g,onChange:e=>{let t=e.target.value;if(t.length>m.max_text_length){w("Text length exceeds your plan limit of ".concat(m.max_text_length," characters."));return}p(t),w("")},placeholder:"Paste your text content here...",rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-vertical",disabled:j}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,r.jsxs)("p",{className:"text-sm ".concat((()=>{let e=g.length/m.max_text_length*100;return e>=90?"text-red-600":e>=70?"text-yellow-600":"text-gray-500"})()),children:[g.length.toString()," / ",m.max_text_length.toString()," characters"]}),g.length>.9*m.max_text_length&&(0,r.jsx)("span",{className:"text-xs text-yellow-600",children:"Approaching limit"})]})]}),(0,r.jsx)("button",{type:"submit",disabled:j||!g.trim()||g.length>m.max_text_length,className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?"Processing...":"Generate Notes"})]})}),(0,r.jsx)("div",{className:"text-center mt-8",children:(0,r.jsx)("button",{onClick:()=>e.push("/"),className:"text-purple-600 hover:text-purple-800 hover:underline",children:"← Back to Home"})})]})}),(0,r.jsx)(i.Z,{isOpen:v,onClose:()=>_(!1),title:"Sign In to Generate Notes",message:"Please sign in to start generating educational notes from your text content."}),(0,r.jsx)(c.Z,{isOpen:S,onClose:()=>k(!1),title:C.title,message:C.message,feature:C.feature})]})}}},function(e){e.O(0,[395,471,842,971,117,744],function(){return e(e.s=6181)}),_N_E=e.O()}]);