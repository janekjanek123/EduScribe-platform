"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{4345:function(e,r,a){a.d(r,{Z:function(){return l}});var s=a(7437),t=a(9376);function l(e){let{questionCount:r=5}=e,a=(0,t.useRouter)();return(0,s.jsxs)("div",{className:"relative rounded-2xl overflow-hidden",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[(0,s.jsxs)("div",{className:"filter blur-sm pointer-events-none p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:["\uD83D\uDCDD Interactive Quiz (",r," questions)"]}),Array.from({length:Math.min(r,3)}).map((e,r)=>(0,s.jsxs)("div",{className:"mb-6 last:mb-0",children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsxs)("span",{className:"text-sm font-medium",style:{color:"var(--text-muted)"},children:["Question ",r+1]}),(0,s.jsx)("p",{className:"font-medium",style:{color:"var(--text-primary)"},children:"This is a sample quiz question that would appear here..."})]}),(0,s.jsx)("div",{className:"space-y-2",children:["A","B","C"].map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"question-".concat(r),className:"h-4 w-4",style:{accentColor:"var(--color-cta)"},disabled:!0}),(0,s.jsxs)("span",{style:{color:"var(--text-secondary)"},children:[e,". Sample answer option"]})]},e))})]},r)),(0,s.jsx)("button",{disabled:!0,className:"w-full py-3 px-4 rounded-xl font-medium opacity-50",style:{background:"var(--color-cta)",color:"var(--bg-primary)"},children:"Submit Quiz"})]}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-2xl",style:{background:"rgba(31, 34, 53, 0.85)",backdropFilter:"blur(4px)"},children:(0,s.jsxs)("div",{className:"text-center p-6 max-w-sm",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"w-16 h-16 mx-auto rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, var(--color-text), var(--color-file))",boxShadow:"var(--glow-text)"},children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83D\uDD12"})})}),(0,s.jsx)("h4",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Unlock Interactive Quizzes"}),(0,s.jsx)("p",{className:"mb-6 text-base",style:{color:"var(--text-secondary)"},children:"Upgrade to unlock interactive quizzes for your notes and test your knowledge."}),(0,s.jsx)("button",{onClick:()=>a.push("/pricing"),className:"px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--color-cta)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Upgrade Plan"})]})})]})}},2690:function(e,r,a){a.d(r,{Z:function(){return o}});var s=a(7437),t=a(2265),l=a(7124);function o(e){let{questions:r,noteId:a,noteType:o,onComplete:n}=e,{user:i,supabase:c}=(0,l.$)(),[d,x]=(0,t.useState)(0),[m,u]=(0,t.useState)([]),[b,g]=(0,t.useState)(""),[v,h]=(0,t.useState)(!1),[p,y]=(0,t.useState)(null),[f,j]=(0,t.useState)(""),[w,N]=(0,t.useState)(!1);if(!r||0===r.length)return(0,s.jsxs)("div",{className:"rounded-xl p-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"2px solid var(--color-video)",boxShadow:"0 0 20px rgba(255, 165, 0, 0.3)"},children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:"var(--color-video)"},children:"Quiz Not Available"}),(0,s.jsx)("p",{style:{color:"var(--text-secondary)"},children:"No quiz questions are available for this note."})]});let k=e=>{g(e)},D=async e=>{if(!i){j("You must be logged in to submit quiz answers");return}h(!0),j("");try{let{data:{session:r}}=await c.auth.getSession(),s=null==r?void 0:r.access_token;if(!s)throw Error("No authentication token available");console.log("[Quiz] Submitting quiz answers:",{noteId:a,noteType:o,answersCount:e.length});let t=await fetch("/api/quiz-attempts",{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({noteId:a,noteType:o,answers:e})});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to submit quiz")}let l=await t.json();if(!l.success)throw Error(l.message||"Quiz submission failed");console.log("[Quiz] Quiz submitted successfully:",l.data);let i={score:l.data.score,correctAnswers:l.data.correctAnswers,totalQuestions:l.data.totalQuestions,percentage:l.data.percentage,completedAt:l.data.completedAt,userAnswers:e};y(i),n&&n(i.score,i.totalQuestions)}catch(e){console.error("[Quiz] Error submitting quiz:",e),j(e.message||"Failed to submit quiz")}finally{h(!1)}};if(p){var S;return(0,s.jsxs)("div",{className:"rounded-2xl p-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, var(--color-cta), var(--color-file))",boxShadow:"var(--glow-cta)"},children:(0,s.jsx)("span",{className:"text-2xl",children:"\uD83C\uDFAF"})}),(0,s.jsx)("h3",{className:"text-2xl font-bold mb-2",style:{color:"var(--text-primary)"},children:"Quiz Completed!"}),(0,s.jsxs)("div",{className:"text-4xl font-bold mb-2",style:{color:p.percentage>=80?"var(--color-cta)":p.percentage>=60?"var(--color-video)":"#ef4444"},children:[p.percentage,"%"]}),(0,s.jsxs)("p",{className:"text-lg mb-4",style:{color:"var(--text-secondary)"},children:[p.correctAnswers," out of ",p.totalQuestions," correct"]}),(0,s.jsx)("p",{className:"text-xl font-semibold mb-6",style:{color:"var(--text-primary)"},children:(S=p.percentage)>=90?"Excellent! \uD83C\uDF89":S>=80?"Great job! \uD83D\uDC4F":S>=70?"Good work! \uD83D\uDC4D":S>=60?"Not bad! \uD83D\uDCDA":"Keep studying! \uD83D\uDCAA"}),(0,s.jsxs)("div",{className:"rounded-xl p-4 mb-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[(0,s.jsx)("h4",{className:"font-semibold mb-2",style:{color:"var(--text-primary)"},children:"Score Breakdown:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"var(--text-secondary)"},children:"Correct Answers:"}),(0,s.jsx)("span",{className:"font-semibold ml-2",style:{color:"var(--color-file)"},children:p.correctAnswers})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"var(--text-secondary)"},children:"Total Questions:"}),(0,s.jsx)("span",{className:"font-semibold ml-2",style:{color:"var(--text-primary)"},children:p.totalQuestions})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"var(--text-secondary)"},children:"Accuracy:"}),(0,s.jsxs)("span",{className:"font-semibold ml-2",style:{color:p.percentage>=80?"var(--color-cta)":p.percentage>=60?"var(--color-video)":"#ef4444"},children:[p.percentage,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{style:{color:"var(--text-secondary)"},children:"Completed:"}),(0,s.jsx)("span",{className:"font-semibold ml-2",style:{color:"var(--text-primary)"},children:new Date(p.completedAt).toLocaleString()})]})]})]}),(0,s.jsxs)("button",{onClick:()=>N(!w),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 mr-4",style:{background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-sm)"},children:[w?"Hide":"Show"," Detailed Results"]}),(0,s.jsx)("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"linear-gradient(135deg, var(--color-cta) 0%, var(--color-file) 100%)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Take Quiz Again"})]}),w&&p.userAnswers&&(0,s.jsxs)("div",{className:"pt-6",style:{borderTop:"1px solid var(--bg-tertiary)"},children:[(0,s.jsx)("h4",{className:"text-lg font-bold mb-4",style:{color:"var(--text-primary)"},children:"\uD83D\uDCCB Detailed Results"}),(0,s.jsx)("div",{className:"space-y-6",children:r.map((e,r)=>{let a=p.userAnswers[r],t=a===e.correctAnswer;return(0,s.jsx)("div",{className:"rounded-xl p-4",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-sm)"},children:(0,s.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ".concat(t?"bg-green-500":"bg-red-500"),children:t?"✓":"✗"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("h5",{className:"font-semibold mb-2",style:{color:"var(--text-primary)"},children:["Question ",r+1,": ",e.question]}),(0,s.jsx)("div",{className:"space-y-2 mb-3",children:Object.entries(e.options).map(r=>{let[l,o]=r,n={border:"1px solid var(--bg-tertiary)",borderRadius:"8px",padding:"8px 12px"};return n=l===e.correctAnswer?{...n,background:"linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.1))",border:"1px solid rgba(34, 197, 94, 0.4)",color:"#22c55e"}:l!==a||t?{...n,background:"var(--bg-primary)",color:"var(--text-secondary)"}:{...n,background:"linear-gradient(135deg, rgba(239, 68, 68, 0.2), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#ef4444"},(0,s.jsxs)("div",{style:n,children:[(0,s.jsxs)("span",{className:"font-semibold mr-2",children:[l,"."]}),o,l===e.correctAnswer&&(0,s.jsx)("span",{className:"ml-2 font-semibold",style:{color:"#22c55e"},children:"✓ Correct"}),l===a&&!t&&(0,s.jsx)("span",{className:"ml-2 font-semibold",style:{color:"#ef4444"},children:"✗ Your Answer"})]},l)})}),(0,s.jsxs)("div",{className:"p-3 rounded-lg",style:{background:t?"linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 163, 74, 0.05))":"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.05))",border:t?"1px solid rgba(34, 197, 94, 0.3)":"1px solid rgba(239, 68, 68, 0.3)"},children:[(0,s.jsx)("p",{className:"font-semibold",style:{color:t?"#22c55e":"#ef4444"},children:t?"✅ Correct!":"❌ Incorrect"}),!t&&(0,s.jsxs)("p",{className:"text-sm mt-1",style:{color:"#ef4444"},children:["Your answer: ",(0,s.jsx)("strong",{children:a})," | Correct answer: ",(0,s.jsx)("strong",{children:e.correctAnswer})]}),e.explanation&&(0,s.jsx)("div",{className:"mt-2 pt-2",style:{borderTop:"1px solid var(--bg-tertiary)"},children:(0,s.jsxs)("p",{className:"text-sm",style:{color:"var(--text-secondary)"},children:[(0,s.jsx)("strong",{children:"Explanation:"})," ",e.explanation]})})]})]})]})},e.id)})})]})]})}let C=r[d],A=(d+1)/r.length*100;return(0,s.jsxs)("div",{className:"rounded-2xl p-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold",style:{color:"var(--text-primary)"},children:"\uD83D\uDCDD Quiz Time!"}),(0,s.jsxs)("span",{className:"text-sm",style:{color:"var(--text-secondary)"},children:["Question ",d+1," of ",r.length]})]}),(0,s.jsx)("div",{className:"w-full rounded-full h-3",style:{background:"var(--bg-primary)"},children:(0,s.jsx)("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:"".concat(A,"%"),background:"linear-gradient(135deg, var(--color-cta) 0%, var(--color-file) 100%)",boxShadow:"var(--glow-cta)"}})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold mb-4",style:{color:"var(--text-primary)"},children:C.question}),(0,s.jsx)("div",{className:"space-y-3",children:Object.entries(C.options).map(e=>{let[r,a]=e;return(0,s.jsxs)("button",{onClick:()=>k(r),className:"w-full text-left p-4 rounded-xl transition-all duration-300 transform hover:scale-102",style:{background:b===r?"linear-gradient(135deg, var(--color-cta) 0%, var(--color-file) 100%)":"var(--bg-primary)",border:b===r?"2px solid var(--color-cta)":"2px solid var(--bg-tertiary)",color:b===r?"var(--bg-primary)":"var(--text-primary)",boxShadow:b===r?"var(--glow-cta)":"var(--shadow-sm)"},children:[(0,s.jsxs)("span",{className:"font-semibold mr-3",children:[r,"."]}),a]},r)})})]}),f&&(0,s.jsx)("div",{className:"mb-4 p-4 rounded-xl",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.3)",boxShadow:"0 0 20px rgba(239, 68, 68, 0.1)"},children:(0,s.jsx)("p",{style:{color:"#ef4444"},children:f})}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-sm",style:{color:"var(--text-secondary)"},children:b?"Selected: ".concat(b):"Select an answer to continue"}),(0,s.jsx)("button",{onClick:()=>{if(!b)return;let e=[...m,b];u(e),g(""),d<r.length-1?x(d+1):D(e)},disabled:!b||v,className:"px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",style:{background:b&&!v?"linear-gradient(135deg, var(--color-cta) 0%, var(--color-file) 100%)":"var(--bg-tertiary)",color:b&&!v?"var(--bg-primary)":"var(--text-muted)",boxShadow:b&&!v?"var(--glow-cta)":"var(--shadow-sm)"},children:v?(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded-full animate-spin",style:{border:"2px solid var(--bg-primary)",borderTop:"2px solid var(--color-cta)"}}),"Submitting..."]}):d===r.length-1?"Finish Quiz":"Next Question"})]})]})}}}]);