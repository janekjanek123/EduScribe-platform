(()=>{var e={};e.id=8667,e.ids=[8667],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},86719:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(53082),t(55801),t(35866);var a=t(23191),s=t(88716),o=t(37922),l=t.n(o),i=t(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(r,n);let d=["",{children:["file-notes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,53082)),"/Users/janjedrach/Cursor/eduscribe/src/app/file-notes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,55801)),"/Users/janjedrach/Cursor/eduscribe/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/janjedrach/Cursor/eduscribe/src/app/file-notes/page.tsx"],x="/file-notes/page",u={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/file-notes/page",pathname:"/file-notes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},97635:(e,r,t)=>{Promise.resolve().then(t.bind(t,36546))},36546:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var a=t(10326),s=t(17577),o=t(35047),l=t(48193),i=t(73189),n=t(83640),d=t(33947),c=t(21027),x=t(75991);function u(){var e;let r=(0,o.useRouter)(),t=(0,o.useSearchParams)(),u=t?.get("id"),{user:m,supabase:p}=(0,i.$)(),{canUseQuizzes:b}=(0,n.m)(),[h,g]=(0,s.useState)(null),[y,v]=(0,s.useState)(!0),[f,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1),[D,k]=(0,s.useState)(!0),[C,S]=(0,s.useState)(!1),q=async()=>{if(u&&m)try{S(!0);let{data:{session:e}}=await p.auth.getSession(),t=e?.access_token;if(!t)throw Error("No authentication token available");console.log(`[FileNotesPage] Deleting note with ID: ${u}`);let a=await fetch(`/api/file-notes?id=${u}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to delete note")}console.log(`[FileNotesPage] Successfully deleted note: ${u}`),r.push("/dashboard")}catch(e){console.error("[FileNotesPage] Error deleting note:",e),j(e.message||"Failed to delete note"),w(!1)}finally{S(!1)}};return m?y?a.jsx("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-20 h-20 rounded-full animate-spin mx-auto mb-6",style:{border:"4px solid var(--bg-tertiary)",borderTop:"4px solid var(--color-file)"}}),a.jsx("h2",{className:"text-2xl font-semibold",style:{color:"var(--text-primary)"},children:"Loading your file notes..."})]})})})}):f?a.jsx("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:(0,a.jsxs)("div",{className:"rounded-2xl p-8 text-center",style:{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(220, 38, 38, 0.1))",border:"1px solid rgba(239, 68, 68, 0.3)",boxShadow:"var(--shadow-lg)"},children:[a.jsx("div",{className:"text-6xl mb-6 opacity-80",children:"⚠️"}),a.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"#ef4444"},children:"Something went wrong"}),a.jsx("p",{className:"text-lg mb-8 leading-relaxed",style:{color:"var(--text-secondary)"},children:f}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[a.jsx("button",{onClick:()=>r.push("/dashboard"),className:"px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"linear-gradient(135deg, var(--color-cta) 0%, var(--color-file) 100%)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Back to Dashboard"}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--bg-secondary)",color:"var(--text-secondary)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-sm)"},children:"Try Again"})]})]})})})}):h?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("main",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-2xl",children:(e=h.file_type)?e.includes("pdf")?"\uD83D\uDCD5":e.includes("word")||e.includes("doc")?"\uD83D\uDCD8":e.includes("presentation")||e.includes("powerpoint")?"\uD83D\uDCCA":e.includes("text")||e.includes("txt")?"\uD83D\uDCDD":e.includes("image")?"\uD83D\uDDBC️":"\uD83D\uDCC4":"\uD83D\uDCC4"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:[h.title||"File Notes"," – ",new Date(h.created_at).toLocaleDateString()]}),h.file_name&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["\uD83D\uDCCE Original file: ",h.file_name]}),h.file_type&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["\uD83C\uDFF7️ File type: ",h.file_type]}),h.slide_count&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["\uD83D\uDCCA Slides: ",h.slide_count]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Created: ",new Date(h.created_at).toLocaleString()]})]}),a.jsx("div",{className:"flex flex-col justify-end",children:a.jsx(x.Z,{noteId:h.id,noteType:"file",noteTitle:h.title||"File Notes",noteContent:D?h.content:h.summary||h.content,className:"text-sm"})})]})}),(0,a.jsxs)("div",{className:"rounded-2xl p-6 mb-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold",style:{color:"var(--text-primary)"},children:"\uD83D\uDCC4 Notes"}),(0,a.jsxs)("div",{className:"note-view-toggle",children:[a.jsx("button",{onClick:()=>k(!1),className:D?"":"active",children:"Summary"}),a.jsx("button",{onClick:()=>k(!0),className:D?"active":"",children:"Full Notes"})]})]}),a.jsx("div",{className:"prose max-w-none prose-invert",style:{color:"var(--text-secondary)"},children:D?a.jsx(l.UG,{children:h.content}):(0,a.jsxs)("div",{className:"summary-section",children:[a.jsx("h3",{style:{color:"var(--text-primary)"},children:"\uD83D\uDCDD Summary Version"}),a.jsx(l.UG,{children:h.summary||"Summary not available."})]})})]}),h.file_url?(0,a.jsxs)("div",{className:"rounded-2xl p-6 mb-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Original File"}),a.jsx("a",{href:h.file_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"linear-gradient(135deg, var(--color-file) 0%, var(--color-cta) 100%)",color:"var(--bg-primary)",boxShadow:"var(--glow-file)"},children:"\uD83D\uDCE5 Download Original File"})]}):(0,a.jsxs)("div",{className:"rounded-2xl p-6 mb-6",style:{background:"linear-gradient(135deg, rgba(255, 165, 0, 0.1), rgba(255, 165, 0, 0.05))",border:"1px solid rgba(255, 165, 0, 0.3)",boxShadow:"0 0 20px rgba(255, 165, 0, 0.1)"},children:[a.jsx("h2",{className:"text-xl font-semibold mb-2",style:{color:"var(--color-video)"},children:"File Storage Notice"}),a.jsx("p",{style:{color:"var(--text-secondary)"},children:"The original file is not available for download. The file content was processed to generate notes, but file storage is not currently configured."})]}),h.quiz&&h.quiz.length>0&&(0,a.jsxs)("div",{className:"rounded-2xl p-6 mb-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"\uD83D\uDCDD Test Your Knowledge"}),b?a.jsx(d.Z,{questions:h.quiz,noteId:h.id,noteType:"file",onComplete:(e,r)=>{console.log(`Quiz completed: ${e}% (${e*r/100}/${r})`)}}):a.jsx(c.Z,{questionCount:h.quiz.length})]}),(0,a.jsxs)("div",{className:"rounded-2xl p-6 mb-6",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-lg)"},children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Actions"}),a.jsx("div",{className:"flex flex-wrap gap-4",children:a.jsx("button",{onClick:()=>r.push("/dashboard"),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--bg-primary)",color:"var(--text-secondary)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-sm)"},children:"\uD83D\uDCCB View All Notes"})})]})]})}),N&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",style:{background:"rgba(31, 34, 53, 0.9)",backdropFilter:"blur(5px)"},children:(0,a.jsxs)("div",{className:"rounded-2xl p-6 max-w-md w-full mx-4",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-xl)"},children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",style:{color:"var(--text-primary)"},children:"Delete Note"}),a.jsx("p",{className:"mb-6",style:{color:"var(--text-secondary)"},children:"Are you sure you want to delete this note? This action cannot be undone."}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>w(!1),className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"var(--bg-primary)",color:"var(--text-secondary)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-sm)"},children:"Cancel"}),a.jsx("button",{onClick:q,disabled:C,className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",style:{background:C?"var(--bg-tertiary)":"linear-gradient(135deg, #ef4444, #dc2626)",color:C?"var(--text-muted)":"white",boxShadow:C?"var(--shadow-sm)":"0 0 20px rgba(239, 68, 68, 0.3)"},children:C?"Deleting...":"Delete Note"})]})]})})]}):a.jsx("div",{className:"min-h-screen",style:{background:"var(--bg-primary)"},children:a.jsx("main",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx("div",{className:"text-center py-16",children:(0,a.jsxs)("div",{className:"rounded-2xl p-8 max-w-md mx-auto",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-xl)"},children:[a.jsx("div",{className:"text-6xl mb-6 opacity-80",children:"\uD83D\uDCC4"}),a.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"var(--text-primary)"},children:"Note not found"}),a.jsx("p",{className:"text-lg mb-8 leading-relaxed",style:{color:"var(--text-secondary)"},children:"The requested file note could not be found"}),a.jsx("button",{onClick:()=>r.push("/dashboard"),className:"px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"linear-gradient(135deg, var(--color-cta) 0%, var(--color-file) 100%)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Back to Dashboard"})]})})})})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--bg-primary)"},children:a.jsx("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"rounded-2xl p-8 max-w-md mx-auto",style:{background:"linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%)",border:"1px solid var(--bg-tertiary)",boxShadow:"var(--shadow-xl)"},children:[a.jsx("div",{className:"text-6xl mb-6 opacity-80",children:"\uD83D\uDD10"}),a.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"var(--text-primary)"},children:"Access Required"}),a.jsx("p",{className:"text-lg mb-6 leading-relaxed",style:{color:"var(--text-secondary)"},children:"Please log in to view your file notes"}),a.jsx("button",{onClick:()=>r.push("/"),className:"px-8 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105",style:{background:"linear-gradient(135deg, var(--color-cta) 0%, var(--color-file) 100%)",color:"var(--bg-primary)",boxShadow:"var(--glow-cta)"},children:"Go to Login"})]})})})}function m(){return a.jsx(s.Suspense,{fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--bg-primary)"},children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 rounded-full animate-spin mx-auto mb-6",style:{border:"4px solid var(--bg-tertiary)",borderTop:"4px solid var(--color-file)"}}),a.jsx("p",{style:{color:"var(--text-secondary)"},children:"Loading file notes..."})]})}),children:a.jsx(u,{})})}},75991:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var a=t(10326),s=t(17577);function o({noteId:e,noteType:r,noteTitle:t,noteContent:o,className:l=""}){let[i,n]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),x=async()=>{if(!i){n(!0);try{let e=`EDUSCRIBE: ${t}

${"=".repeat(50)}

${o}

${"=".repeat(50)}
Generated by EduScribe - AI-powered note generation
`.replace(/#{1,6}\s+/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\[(.*?)\]\(.*?\)/g,"$1").replace(/---+/g,"─".repeat(50)).replace(/•/g,"- ").replace(/📝|📖|🎥|📹|📄|📁|🧠|⭐|🔥/g,"").trim(),r=new Blob([e],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(r),s=document.createElement("a");s.href=a,s.download="eduscribe_note.txt",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),c(!0),setTimeout(()=>c(!1),3e3)}catch(e){console.error("Failed to export note:",e)}finally{n(!1)}}};return d?a.jsx("div",{className:"relative group",children:(0,a.jsxs)("button",{disabled:!0,className:`bg-green-600 text-white px-3 py-1.5 rounded-md flex items-center gap-2 ${l}`,children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Downloaded!"]})}):i?a.jsx("div",{className:"relative group",children:(0,a.jsxs)("button",{disabled:!0,className:`bg-purple-600 text-white px-3 py-1.5 rounded-md flex items-center gap-2 ${l}`,children:[a.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]})}):(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)("button",{onClick:x,className:`bg-purple-600 text-white px-3 py-1.5 rounded-md hover:bg-purple-700 transition-colors flex items-center gap-2 ${l}`,children:[a.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Notatnik"]}),a.jsx("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-10",children:(0,a.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap",children:["Downloads as .txt file - open with Notepad or any text editor",a.jsx("div",{className:"absolute top-full right-6 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})})]})}},53082:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(68570).createProxy)(String.raw`/Users/janjedrach/Cursor/eduscribe/src/app/file-notes/page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[9276,4262,8193,5773,4896],()=>t(86719));module.exports=a})();