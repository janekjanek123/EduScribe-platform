(()=>{var e={};e.id=285,e.ids=[285],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},94914:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(51324),t(55801),t(35866);var r=t(23191),a=t(88716),l=t(37922),i=t.n(l),n=t(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,51324)),"/Users/janjedrach/Cursor/eduscribe/src/app/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,55801)),"/Users/janjedrach/Cursor/eduscribe/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/janjedrach/Cursor/eduscribe/src/app/checkout/page.tsx"],m="/checkout/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},26751:(e,s,t)=>{Promise.resolve().then(t.bind(t,37758))},37758:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(10326),a=t(17577),l=t(35047),i=t(73189);function n(){let e=(0,l.useRouter)();(0,l.useSearchParams)();let{user:s}=(0,i.$)(),[t,n]=(0,a.useState)(null),[c,d]=(0,a.useState)("monthly"),[o,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)("checkout"),[h,g]=(0,a.useState)({firstName:"",lastName:"",email:"",agreeToTerms:!1}),[p,b]=(0,a.useState)({}),[y,j]=(0,a.useState)(null),N={student:{name:"Student",description:"Perfect for students with enhanced features",price_monthly:19.99,price_yearly:179.99,features:["Up to 10 notes per month","Max 12 saved notes","Interactive quizzes enabled","YouTube video support","PowerPoint presentation support","Extended text length (up to 15,000 characters)","Copy-paste note content"]},pro:{name:"Pro",description:"Ultimate plan for power users and professionals",price_monthly:49.99,price_yearly:449.99,features:["Unlimited note generation (150 notes/month)","Max 50 saved notes","Full access to quizzes","YouTube and PowerPoint support","Full text length support (50,000+ characters)","Export to PDF and other formats","Priority generation (faster processing)","Copy-paste note content"]}},v=()=>{let e={};return h.firstName.trim()||(e.firstName="First name is required"),h.lastName.trim()||(e.lastName="Last name is required"),h.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)||(e.email="Please enter a valid email address"):e.email="Email is required",h.agreeToTerms||(e.agreeToTerms="You must agree to the terms and conditions"),b(e),0===Object.keys(e).length},f=(e,s)=>{g(t=>({...t,[e]:s})),p[e]&&b(s=>({...s,[e]:void 0}))},w=async()=>{if(t&&s){m(!0);try{console.log("Processing payment with PayU:",{plan:t,billing:c,user:s.id,customer:h}),await new Promise(e=>setTimeout(e,2e3)),console.log("Payment successful, assigning subscription...");let e=await fetch("/api/assign-subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({planId:t,billingCycle:c,paymentData:{paymentMethod:"payu",transactionId:`test_${Date.now()}`,amount:k,currency:"PLN"}})}),r=await e.json();if(!e.ok||!r.success)throw Error(r.error||"Failed to assign subscription");console.log("Subscription assigned successfully:",r.subscription),u("success"),j(r.subscription)}catch(e){console.error("Payment or subscription assignment error:",e),alert("Payment failed or subscription assignment error. Please try again.")}finally{m(!1)}}};if(!s)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Please Sign In"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"You need to be signed in to upgrade your plan."}),r.jsx("button",{onClick:()=>e.push("/?signup=true"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700",children:"Sign In / Sign Up"})]})});if(!t||!N[t])return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Invalid Plan"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The selected plan is not valid."}),r.jsx("button",{onClick:()=>e.push("/pricing"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700",children:"View Pricing Plans"})]})});let P=N[t],k="yearly"===c?P.price_yearly:P.price_monthly,C="yearly"===c?P.price_yearly/12:P.price_monthly,_="yearly"===c?12*P.price_monthly-P.price_yearly:0;return"success"===x?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),(0,r.jsxs)("p",{className:"text-lg text-gray-600 mb-4",children:["Welcome to EduScribe ",P.name,"! Your subscription is now active."]})]}),y&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Your Subscription Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-blue-800",children:"Plan"}),r.jsx("div",{className:"text-blue-700",children:y.plan_display_name})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-blue-800",children:"Billing"}),r.jsx("div",{className:"text-blue-700 capitalize",children:y.billing_cycle})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-blue-800",children:"Status"}),r.jsx("div",{className:"text-blue-700",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Active"})})]}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium text-blue-800",children:"Next Billing Date"}),r.jsx("div",{className:"text-blue-700",children:new Date(y.current_period_end).toLocaleDateString()})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"You now have access to:"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:P.features.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-500 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-gray-700",children:e})]},s))})]}),(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-4",children:"Your New Limits"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:"student"===t?"10":"pro"===t?"150":"?"}),r.jsx("div",{className:"text-sm text-green-700",children:"Notes per month"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:"student"===t?"12":"pro"===t?"50":"?"}),r.jsx("div",{className:"text-sm text-green-700",children:"Saved notes"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:"student"===t?"15K":"pro"===t?"50K+":"?"}),r.jsx("div",{className:"text-sm text-green-700",children:"Characters per note"})]})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>e.push("/dashboard"),className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Start Creating Notes →"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("button",{onClick:()=>e.push("/generate/text"),className:"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors",children:"Generate Text Notes"}),r.jsx("button",{onClick:()=>e.push("/generate/youtube"),className:"w-full border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition-colors",children:"YouTube Video Notes"})]})]}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 text-center text-sm text-gray-500",children:r.jsx("p",{children:"Need help getting started? Contact our support team or check out the user guide."})})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,r.jsxs)("div",{className:`flex items-center ${"checkout"===x?"text-blue-600":"text-green-600"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${"checkout"===x?"bg-blue-600 text-white":"bg-green-600 text-white"}`,children:"checkout"===x?"1":"✓"}),r.jsx("span",{className:"ml-2 font-medium",children:"Checkout Details"})]}),r.jsx("div",{className:`w-16 h-1 ${"payment"===x?"bg-blue-600":"bg-gray-300"}`}),(0,r.jsxs)("div",{className:`flex items-center ${"payment"===x?"text-blue-600":"text-gray-400"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${"payment"===x?"bg-blue-600 text-white":"bg-gray-300 text-gray-600"}`,children:"2"}),r.jsx("span",{className:"ml-2 font-medium",children:"Payment"})]})]})}),(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"checkout"===x?"Complete Your Order":"Payment Details"}),r.jsx("p",{className:"text-gray-600",children:"checkout"===x?`You're subscribing to the ${P.name} plan`:"Complete your payment to activate your subscription"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:"checkout"===x?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),r.jsx("input",{type:"text",value:h.firstName,onChange:e=>f("firstName",e.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${p.firstName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your first name"}),p.firstName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.firstName})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),r.jsx("input",{type:"text",value:h.lastName,onChange:e=>f("lastName",e.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${p.lastName?"border-red-500":"border-gray-300"}`,placeholder:"Enter your last name"}),p.lastName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.lastName})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),r.jsx("input",{type:"email",value:h.email,onChange:e=>f("email",e.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${p.email?"border-red-500":"border-gray-300"}`,placeholder:"Enter your email address"}),p.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.email})]})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Billing Option"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>d("monthly"),className:`p-4 rounded-lg border text-left transition-colors ${"monthly"===c?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx("div",{className:"font-medium",children:"Monthly Billing"}),(0,r.jsxs)("div",{className:"text-sm",children:[P.price_monthly.toFixed(2)," PLN/month"]})]}),(0,r.jsxs)("button",{onClick:()=>d("yearly"),className:`p-4 rounded-lg border text-left transition-colors relative ${"yearly"===c?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}`,children:[r.jsx("div",{className:"font-medium",children:"Yearly Billing"}),(0,r.jsxs)("div",{className:"text-sm",children:[P.price_yearly.toFixed(2)," PLN/year"]}),r.jsx("span",{className:"absolute top-2 right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"Save 25%"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",checked:h.agreeToTerms,onChange:e=>f("agreeToTerms",e.target.checked),className:"mt-1 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:["I agree to the"," ",r.jsx("a",{href:"/terms",className:"text-blue-600 hover:underline",children:"Terms of Service"})," ","and"," ",r.jsx("a",{href:"/privacy",className:"text-blue-600 hover:underline",children:"Privacy Policy"})]})]}),p.agreeToTerms&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:p.agreeToTerms})]}),r.jsx("button",{onClick:()=>{v()&&u("payment")},className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Proceed to Payment"})]}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment Method"}),r.jsx("div",{className:"space-y-3",children:r.jsx("div",{className:"p-4 border border-blue-500 bg-blue-50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"radio",checked:!0,readOnly:!0,className:"w-4 h-4 text-blue-600"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-900",children:"PayU Payment Gateway"}),r.jsx("div",{className:"text-sm text-gray-600",children:"Credit card, debit card, bank transfer, and more"})]})]})})})]}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Customer Details"}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,r.jsxs)("div",{className:"text-sm space-y-1",children:[(0,r.jsxs)("div",{children:[r.jsx("strong",{children:"Name:"})," ",h.firstName," ",h.lastName]}),(0,r.jsxs)("div",{children:[r.jsx("strong",{children:"Email:"})," ",h.email]})]})})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("button",{onClick:w,disabled:o,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Processing Payment..."})]}):`Complete Payment - ${k.toFixed(2)} PLN`}),r.jsx("button",{onClick:()=>u("checkout"),className:"w-full border border-gray-300 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-50 transition-colors",children:"← Back to Checkout"})]}),r.jsx("div",{className:"text-center text-sm text-gray-500",children:r.jsx("p",{children:"\uD83D\uDD12 Payments are securely processed by PayU"})})]})})}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 sticky top-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-4",children:[r.jsx("div",{className:"flex justify-between items-start mb-2",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"font-medium text-gray-900",children:[P.name," Plan"]}),r.jsx("div",{className:"text-sm text-gray-600",children:P.description})]})}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[k.toFixed(2)," PLN"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"yearly"===c?"/year":"/month"}),"yearly"===c&&(0,r.jsxs)("div",{className:"text-sm text-green-600 font-medium",children:[C.toFixed(2)," PLN/month"]})]})]}),_>0&&r.jsx("div",{className:"mb-4 p-3 bg-green-50 rounded-lg",children:(0,r.jsxs)("div",{className:"text-sm text-green-800",children:[(0,r.jsxs)("strong",{children:["You save ",_.toFixed(2)," PLN"]})," with yearly billing!"]})}),(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"What's included:"}),(0,r.jsxs)("ul",{className:"space-y-1",children:[P.features.slice(0,4).map((e,s)=>(0,r.jsxs)("li",{className:"flex items-start text-sm",children:[r.jsx("svg",{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-gray-700",children:e})]},s)),P.features.length>4&&(0,r.jsxs)("li",{className:"text-sm text-gray-500 ml-6",children:["+",P.features.length-4," more features"]})]})]}),r.jsx("div",{className:"border-t border-gray-200 pt-4",children:(0,r.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold text-gray-900",children:[r.jsx("span",{children:"Total"}),(0,r.jsxs)("span",{children:[k.toFixed(2)," PLN"]})]})})]})})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsx("button",{onClick:()=>e.push("/pricing"),className:"text-blue-600 hover:text-blue-800 hover:underline",children:"← Back to Pricing"})})]})})}},51324:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(68570).createProxy)(String.raw`/Users/janjedrach/Cursor/eduscribe/src/app/checkout/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[9276,8486,8796],()=>t(94914));module.exports=r})();