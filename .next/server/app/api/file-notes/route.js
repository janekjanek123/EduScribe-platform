(()=>{var t={};t.id=6471,t.ids=[6471],t.modules={20399:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:t=>{"use strict";t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:t=>{"use strict";t.exports=require("buffer")},84770:t=>{"use strict";t.exports=require("crypto")},17702:t=>{"use strict";t.exports=require("events")},92048:t=>{"use strict";t.exports=require("fs")},32615:t=>{"use strict";t.exports=require("http")},35240:t=>{"use strict";t.exports=require("https")},98216:t=>{"use strict";t.exports=require("net")},55315:t=>{"use strict";t.exports=require("path")},68621:t=>{"use strict";t.exports=require("punycode")},76162:t=>{"use strict";t.exports=require("stream")},74026:t=>{"use strict";t.exports=require("string_decoder")},95346:t=>{"use strict";t.exports=require("timers")},82452:t=>{"use strict";t.exports=require("tls")},17360:t=>{"use strict";t.exports=require("url")},21764:t=>{"use strict";t.exports=require("util")},6162:t=>{"use strict";t.exports=require("worker_threads")},71568:t=>{"use strict";t.exports=require("zlib")},87561:t=>{"use strict";t.exports=require("node:fs")},84492:t=>{"use strict";t.exports=require("node:stream")},72477:t=>{"use strict";t.exports=require("node:stream/web")},32476:(t,e,r)=>{"use strict";r.r(e),r.d(e,{originalPathname:()=>T,patchFetch:()=>C,requestAsyncStorage:()=>N,routeModule:()=>D,serverHooks:()=>P,staticGenerationAsyncStorage:()=>O});var n={};r.r(n),r.d(n,{DELETE:()=>E,GET:()=>I,POST:()=>v,dynamic:()=>x});var o=r(49303),i=r(88716),s=r(60670),a=r(87070),u=r(23517),l=r(51215),c=r(96501),p=r(18159);async function h(t,e){try{console.log(`[File Extraction] Extracting text from PowerPoint: ${e}`);let r=Buffer.from(t);return new Promise((t,n)=>{c.FY(r,{lazyEntries:!0},(r,o)=>{if(r){n(Error(`Failed to open PowerPoint file: ${r.message}`));return}let i=[],s=[],a=0,u=0,l=0;function c(){let r="";for(let t=0;t<a;t++){let e=s[t]||`Slide ${t+1}`,n=i[t]||"";n.trim()&&(r+=`
## ${e}

${n.trim()}
`)}r.trim()||(r=`No text content found in PowerPoint file: ${e}`),console.log(`[File Extraction] Successfully extracted ${r.length} characters from ${a} slides`),t({text:r.trim(),slideCount:a,slideTitles:s.filter(Boolean),metadata:{title:e.replace(/\.[^/.]+$/,"")}})}o.on("entry",t=>{t.fileName.match(/^ppt\/slides\/slide\d+\.xml$/)&&l++}),o.readEntry(),o.on("entry",t=>{t.fileName.match(/^ppt\/slides\/slide\d+\.xml$/)?o.openReadStream(t,(e,r)=>{if(e){console.warn(`[File Extraction] Failed to read slide ${t.fileName}:`,e.message),++u===l&&c(),o.readEntry();return}let n="";r.on("data",t=>{n+=t.toString()}),r.on("end",()=>{p.parseString(n,(e,r)=>{if(e)console.warn(`[File Extraction] Failed to parse XML for ${t.fileName}:`,e.message);else{let e,n,o;let u=(e="",n="",o=!0,function t(r){if("string"==typeof r){let t=r.trim();t&&(o&&t.length<100&&!t.includes("\n")&&(n=t,o=!1),e+=t+" ")}else Array.isArray(r)?r.forEach(t):"object"==typeof r&&null!==r&&(r["a:t"]?t(r["a:t"]):r.t?t(r.t):Object.values(r).forEach(t))}(r),{text:e.trim(),title:n||void 0}),l=parseInt(t.fileName.match(/slide(\d+)\.xml$/)?.[1]||"0");i[l-1]=u.text,s[l-1]=u.title||`Slide ${l}`,a=Math.max(a,l)}++u===l&&c()}),o.readEntry()})}):o.readEntry()}),o.on("end",()=>{0===l&&c()})})})}catch(t){throw console.error("[File Extraction] Error extracting text from PowerPoint:",t),Error(`Failed to extract text from PowerPoint file: ${t.message}`)}}async function d(t){try{return{text:new TextDecoder("utf-8").decode(t).trim()}}catch(t){throw Error(`Failed to extract text from plain text file: ${t.message}`)}}async function f(t,e,r){switch(console.log(`[File Extraction] Processing file: ${r} (${e})`),e){case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return await h(t,r);case"application/vnd.ms-powerpoint":try{return await h(t,r)}catch(t){throw Error("Legacy PowerPoint (.ppt) files are not fully supported. Please convert to .pptx format.")}case"text/plain":case"text/markdown":case"text/csv":return await d(t);case"application/pdf":return{text:`PDF text extraction not yet implemented for ${r}. Please implement PDF parsing using a library like pdf-parse.`};case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return{text:`Word document text extraction not yet implemented for ${r}. Please implement DOCX parsing using a library like mammoth.`};default:throw Error(`Unsupported file type: ${e}`)}}var y=r(58026),m=r(82227);let g="https://xhljckmlzdshxibnqsbj.supabase.co",w="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhobGpja21semRzaHhpYm5xc2JqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc4NDIwNzIsImV4cCI6MjA2MzQxODA3Mn0.UuU3QBxwY3-DsSpXB-UiKarjgZWiFAFIzFbgUqacmIA";async function b(t){try{let e=(0,u.eI)(g,w),{data:r}=await e.from("user_subscriptions").select("plan_id").eq("user_id",t).eq("status","active").single(),n=r?.plan_id;if("student"===n||"pro"===n)return{planId:n};return{planId:"free"}}catch(t){return console.warn("[File Notes API] Could not fetch subscription:",t),{planId:"free"}}}async function v(t){console.log("[File Notes API] Request received: POST");try{console.log("[File Notes API] Authenticating request");let e=t.headers.get("authorization");if(!e||!e.startsWith("Bearer "))return console.error("[File Notes API] Authentication missing"),a.NextResponse.json({success:!1,error:"Authentication required",message:"Valid Bearer token is required"},{status:401});let r=e.replace("Bearer ",""),n=(0,u.eI)(g,w,{global:{headers:{Authorization:`Bearer ${r}`}}}),{data:{user:o},error:i}=await n.auth.getUser(r);if(i||!o)return console.error("[File Notes API] Authentication failed:",i?.message),a.NextResponse.json({success:!1,error:"Authentication failed",message:i?.message||"Invalid authentication token"},{status:401});console.log(`[File Notes API] User authenticated: ${o.id}`),console.log("[File Notes API] Checking usage limits");let s=await (0,y.PH)(o.id,r,"file");if(!s.canGenerate)return console.log(`[File Notes API] Generation limit reached: ${s.reason}`),a.NextResponse.json({success:!1,error:"Generation limit reached",message:s.reason||"You have reached your monthly note generation limit",usage:s.usage,limits:s.limits},{status:429});if(!s.canSave)return console.log(`[File Notes API] Storage limit reached: ${s.reason}`),a.NextResponse.json({success:!1,error:"Storage limit reached",message:s.reason||"You have reached your saved notes limit",usage:s.usage,limits:s.limits},{status:429});console.log(`[File Notes API] Usage check passed - can generate: ${s.canGenerate}, can save: ${s.canSave}`);let c=await b(o.id),p=await (0,m.GV)(o.id,c.planId,"file",async()=>{let e,i;let s=await t.formData(),a=s.get("file"),u=s.get("title");if(!a)return console.error("[File Notes API] No file provided"),{success:!1,error:"Missing file",message:"Please provide a file to generate notes from"};let c=a.type,p=a.size,h=a.name;if(p>20971520)return console.error(`[File Notes API] File too large: ${p} bytes`),{success:!1,error:"File too large",message:"The uploaded file exceeds the maximum size of 20MB"};if(!["application/pdf","text/plain","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/msword","text/markdown","text/csv","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-powerpoint"].includes(c))return console.error(`[File Notes API] Unsupported file type: ${c}`),{success:!1,error:"Unsupported file type",message:"Please upload a supported file type (PDF, TXT, DOC, DOCX, MD, CSV, PPT, PPTX)"};console.log(`[File Notes API] File validated: ${h} (${c}, ${p} bytes)`);let d=`${o.id}/${Date.now()}_${h}`,m=await a.arrayBuffer(),g=new Uint8Array(m);console.log(`[File Notes API] Attempting to upload file to storage: ${d}`);let w=null,b=!1;try{let{data:t,error:e}=await n.storage.from("files").upload(d,g,{contentType:c,upsert:!1});if(e)console.warn("[File Notes API] Storage upload failed:",e.message),e.message.includes("Bucket not found")||e.message.includes("bucket")?console.log("[File Notes API] Storage bucket not found, proceeding without file storage"):console.log("[File Notes API] Storage error, proceeding without file storage"),b=!1;else{let{data:{publicUrl:t}}=n.storage.from("files").getPublicUrl(d);w=t,b=!0,console.log(`[File Notes API] File uploaded successfully. Public URL: ${w}`)}}catch(t){console.warn("[File Notes API] Storage upload exception:",t.message),console.log("[File Notes API] Proceeding without file storage"),b=!1}b?console.log("[File Notes API] ✅ File stored in Supabase Storage"):console.log("[File Notes API] ⚠️  File not stored in storage (metadata only)"),console.log("[File Notes API] Extracting text from file");try{if(!(e=await f(m,c,h)).text||0===e.text.trim().length)return console.error("[File Notes API] No text content extracted from file"),{success:!1,error:"No content",message:"Could not extract any text content from the uploaded file"};console.log(`[File Notes API] Successfully extracted text (${e.text.length} chars)`),e.slideCount&&console.log(`[File Notes API] PowerPoint presentation with ${e.slideCount} slides`)}catch(t){return console.error("[File Notes API] Error extracting text from file:",t),{success:!1,error:"Text extraction failed",message:t.message||"Failed to extract text from the uploaded file"}}console.log("[File Notes API] Generating notes from extracted text");try{let t=h;if(e.slideCount&&(t=`${h} (${e.slideCount} slides)`),!(i=await (0,l.L)({transcript:e.text,videoTitle:t})).content)return console.error("[File Notes API] AI note generation failed:",i.error),{success:!1,error:"Note generation failed",message:i.error||"Failed to generate notes from the file content"};console.log(`[File Notes API] Successfully generated notes (${i.content.length} chars)`)}catch(t){return console.error("[File Notes API] Error during AI note generation:",t),{success:!1,error:"AI processing failed",message:t.message||"An error occurred while generating notes with AI"}}let v=`file_${Date.now()}`,I={id:v,user_id:o.id,title:u||h,file_name:h,file_url:w,file_type:c,content:i.content,summary:i.summary,quiz:i.quiz,slide_count:e.slideCount||null,slide_titles:e.slideTitles||null,created_at:new Date().toISOString()};console.log(`[File Notes API] Created note with ID: ${v}`),console.log("[File Notes API] Note data structure:",Object.keys(I).join(", ")),w?console.log("[File Notes API] ✅ Note includes file URL for download"):console.log("[File Notes API] ⚠️  Note created without file URL (storage unavailable)"),console.log("[File Notes API] Storing note in Supabase file_notes table");try{try{let{error:t}=await n.from("file_notes").select("count").limit(1);if(t)return console.error("[File Notes API] Database connection check failed:",t),{success:!1,error:"Database connection error",message:"Could not connect to the database. Please try again later.",details:{code:t.code,message:t.message}}}catch(t){console.error("[File Notes API] Database ping exception:",t)}let{data:t,error:e}=await n.from("file_notes").insert(I).select().single();if(e){if(console.error("[File Notes API] Database storage error:",e),console.error("[File Notes API] Database error details:",{code:e.code,message:e.message,details:e.details,hint:e.hint}),"23505"===e.code)return{success:!1,error:"Duplicate record",message:"These notes already exist in the database",details:{code:e.code,message:e.message}};if(e.code?.startsWith("22")||e.code?.startsWith("23"))return{success:!1,error:"Invalid data format",message:"The note data could not be stored due to validation errors",details:{code:e.code,message:e.message}};if("42P01"===e.code)return{success:!1,error:"Schema error",message:"The file_notes table does not exist. Please run the database initialization.",details:{code:e.code,message:e.message}};return{success:!1,error:"Database error",message:"Failed to store the notes in the database",details:{code:e.code,message:e.message}}}console.log(`[File Notes API] Successfully stored note in database with ID: ${t?.id||v}`),console.log("[File Notes API] Incrementing usage counters");try{await (0,y.iS)(o.id,r,"file"),console.log("[File Notes API] Usage tracking completed")}catch(t){console.error("[File Notes API] Usage tracking failed (note still created):",t)}console.log("[File Notes API] Refreshing saved notes count");try{await (0,y.u6)(o.id,r),console.log("[File Notes API] Saved notes count refreshed")}catch(t){console.error("[File Notes API] Saved notes count refresh failed (note still created):",t)}return{success:!0,data:t}}catch(t){return console.error("[File Notes API] Unexpected database error:",t),{success:!1,error:"Database exception",message:t?.message||"An unexpected error occurred while storing notes",details:t}}});return a.NextResponse.json(p)}catch(t){return console.error("[File Notes API] Critical error:",t),a.NextResponse.json({success:!1,error:"Server error",message:"An unexpected error occurred on the server",details:t.message},{status:500})}}async function I(t){console.log("[File Notes API] Request received: GET");try{let e=t.headers.get("authorization");if(!e||!e.startsWith("Bearer "))return console.error("[File Notes API] Authentication missing"),a.NextResponse.json({success:!1,error:"Authentication required",message:"Valid Bearer token is required"},{status:401});let r=e.replace("Bearer ",""),n=(0,u.eI)(g,w,{global:{headers:{Authorization:`Bearer ${r}`}}}),{data:{user:o},error:i}=await n.auth.getUser(r);if(i||!o)return console.error("[File Notes API] Authentication failed:",i?.message),a.NextResponse.json({success:!1,error:"Authentication failed",message:i?.message||"Invalid authentication token"},{status:401});console.log(`[File Notes API] User authenticated: ${o.id}`);let{data:s,error:l}=await n.from("file_notes").select("*").eq("user_id",o.id).order("created_at",{ascending:!1});if(l)return console.error("[File Notes API] Database fetch error:",l),a.NextResponse.json({success:!1,error:"Database error",message:"Failed to fetch file notes from the database",details:{code:l.code,message:l.message}},{status:500});return console.log(`[File Notes API] Successfully fetched ${s.length} file notes`),a.NextResponse.json({success:!0,data:s})}catch(t){return console.error("[File Notes API] Error fetching file notes:",t),a.NextResponse.json({success:!1,error:"Server error",message:"An unexpected error occurred while fetching file notes",details:t.message},{status:500})}}async function E(t){console.log("[File Notes API] Request received: DELETE");try{let e=t.headers.get("authorization");if(!e||!e.startsWith("Bearer "))return console.error("[File Notes API] Authentication missing"),a.NextResponse.json({success:!1,error:"Authentication required",message:"Valid Bearer token is required"},{status:401});let r=e.replace("Bearer ",""),n=(0,u.eI)(g,w,{global:{headers:{Authorization:`Bearer ${r}`}}}),{data:{user:o},error:i}=await n.auth.getUser(r);if(i||!o)return console.error("[File Notes API] Authentication failed:",i?.message),a.NextResponse.json({success:!1,error:"Authentication failed",message:i?.message||"Invalid authentication token"},{status:401});console.log(`[File Notes API] User authenticated: ${o.id}`);let s=t.nextUrl.searchParams.get("id");if(!s)return console.error("[File Notes API] Note ID missing"),a.NextResponse.json({success:!1,error:"Missing note ID",message:"Note ID is required for deletion"},{status:400});console.log(`[File Notes API] Deleting note with ID: ${s}`);let{data:l,error:c}=await n.from("file_notes").delete().eq("id",s).eq("user_id",o.id).select();if(c)return console.error("[File Notes API] Database delete error:",c),a.NextResponse.json({success:!1,error:"Database error",message:"Failed to delete the note from the database",details:{code:c.code,message:c.message}},{status:500});if(!l||0===l.length)return console.error(`[File Notes API] Note not found or access denied: ${s}`),a.NextResponse.json({success:!1,error:"Note not found",message:"The note was not found or you do not have permission to delete it"},{status:404});console.log(`[File Notes API] Successfully deleted note: ${s}`);try{await (0,y.u6)(o.id,r),console.log("[File Notes API] Saved notes count refreshed after deletion")}catch(t){console.error("[File Notes API] Saved notes count refresh failed after deletion:",t)}return a.NextResponse.json({success:!0,message:"Note deleted successfully",data:l[0]})}catch(t){return console.error("[File Notes API] Error deleting file note:",t),a.NextResponse.json({success:!1,error:"Server error",message:"An unexpected error occurred while deleting the note",details:t.message},{status:500})}}let x="force-dynamic",D=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/file-notes/route",pathname:"/api/file-notes",filename:"route",bundlePath:"app/api/file-notes/route"},resolvedPagePath:"/Users/janjedrach/Cursor/eduscribe/src/app/api/file-notes/route.ts",nextConfigOutput:"standalone",userland:n}),{requestAsyncStorage:N,staticGenerationAsyncStorage:O,serverHooks:P}=D,T="/api/file-notes/route";function C(){return(0,s.patchFetch)({serverHooks:P,staticGenerationAsyncStorage:O})}},4494:(t,e,r)=>{var n=r(78893).Buffer,o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function i(t){if(n.isBuffer(t))return t;var e="function"==typeof n.alloc&&"function"==typeof n.from;if("number"==typeof t)return e?n.alloc(t):new n(t);if("string"==typeof t)return e?n.from(t):new n(t);throw Error("input must be buffer, number, or string, received "+typeof t)}function s(t,e){t=i(t),n.isBuffer(e)&&(e=e.readUInt32BE(0));for(var r=-1^~~e,s=0;s<t.length;s++)r=o[(r^t[s])&255]^r>>>8;return -1^r}function a(){var t,e;return t=s.apply(null,arguments),(e=i(4)).writeInt32BE(t,0),e}"undefined"!=typeof Int32Array&&(o=new Int32Array(o)),a.signed=function(){return s.apply(null,arguments)},a.unsigned=function(){return s.apply(null,arguments)>>>0},t.exports=a},99196:t=>{function e(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function r(t){t.pending+=1;var e=!1;return function(o){if(e)throw Error("callback called twice");if(e=!0,t.error=t.error||o,t.pending-=1,t.waiting.length>0&&t.pending<t.max)t.waiting.shift()(r(t));else if(0===t.pending){var i=t.listeners;t.listeners=[],i.forEach(n)}};function n(e){e(t.error)}}t.exports=e,e.prototype.go=function(t){this.pending<this.max?t(r(this)):this.waiting.push(t)},e.prototype.wait=function(t){0===this.pending?t(this.error):this.listeners.push(t)},e.prototype.hold=function(){return r(this)}},31841:function(t,e){(function(){"use strict";e.stripBOM=function(t){return"\uFEFF"===t[0]?t.substring(1):t}}).call(this)},80393:function(t,e,r){(function(){"use strict";var t,n,o,i,s,a={}.hasOwnProperty;t=r(88038),n=r(63709).defaults,i=function(t){return"string"==typeof t&&(t.indexOf("&")>=0||t.indexOf(">")>=0||t.indexOf("<")>=0)},s=function(t){return"<![CDATA["+o(t)+"]]>"},o=function(t){return t.replace("]]>","]]]]><![CDATA[>")},e.Builder=function(){function e(t){var e,r,o;for(e in this.options={},r=n["0.2"])a.call(r,e)&&(o=r[e],this.options[e]=o);for(e in t)a.call(t,e)&&(o=t[e],this.options[e]=o)}return e.prototype.buildObject=function(e){var r,o,u,l,c,p;return r=this.options.attrkey,o=this.options.charkey,1===Object.keys(e).length&&this.options.rootName===n["0.2"].rootName?(c=Object.keys(e)[0],e=e[c]):c=this.options.rootName,p=this,u=function(t,e){var n,l,c,h,d,f;if("object"!=typeof e)p.options.cdata&&i(e)?t.raw(s(e)):t.txt(e);else if(Array.isArray(e)){for(h in e)if(a.call(e,h))for(d in l=e[h])c=l[d],t=u(t.ele(d),c).up()}else for(d in e)if(a.call(e,d)){if(l=e[d],d===r){if("object"==typeof l)for(n in l)f=l[n],t=t.att(n,f)}else if(d===o)t=p.options.cdata&&i(l)?t.raw(s(l)):t.txt(l);else if(Array.isArray(l))for(h in l)a.call(l,h)&&(t="string"==typeof(c=l[h])?p.options.cdata&&i(c)?t.ele(d).raw(s(c)).up():t.ele(d,c).up():u(t.ele(d),c).up());else"object"==typeof l?t=u(t.ele(d),l).up():"string"==typeof l&&p.options.cdata&&i(l)?t=t.ele(d).raw(s(l)).up():(null==l&&(l=""),t=t.ele(d,l.toString()).up())}return t},l=t.create(c,this.options.xmldec,this.options.doctype,{headless:this.options.headless,allowSurrogateChars:this.options.allowSurrogateChars}),u(l,e).end(this.options.renderOpts)},e}()}).call(this)},63709:function(t,e){(function(){e.defaults={"0.1":{explicitCharkey:!1,trim:!0,normalize:!0,normalizeTags:!1,attrkey:"@",charkey:"#",explicitArray:!1,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!1,validator:null,xmlns:!1,explicitChildren:!1,childkey:"@@",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,emptyTag:""},"0.2":{explicitCharkey:!1,trim:!1,normalize:!1,normalizeTags:!1,attrkey:"$",charkey:"_",explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,explicitRoot:!0,validator:null,xmlns:!1,explicitChildren:!1,preserveChildrenOrder:!1,childkey:"$$",charsAsChildren:!1,includeWhiteChars:!1,async:!1,strict:!0,attrNameProcessors:null,attrValueProcessors:null,tagNameProcessors:null,valueProcessors:null,rootName:"root",xmldec:{version:"1.0",encoding:"UTF-8",standalone:!0},doctype:null,renderOpts:{pretty:!0,indent:"  ",newline:"\n"},headless:!1,chunkSize:1e4,emptyTag:"",cdata:!1}}}).call(this)},11036:function(t,e,r){(function(){"use strict";var t,n,o,i,s,a,u,l,c,p=function(t,e){return function(){return t.apply(e,arguments)}},h=function(t,e){for(var r in e)d.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;l=r(65074),i=r(17702),t=r(31841),u=r(93098),c=r(95346).setImmediate,n=r(63709).defaults,s=function(t){return"object"==typeof t&&null!=t&&0===Object.keys(t).length},a=function(t,e,r){var n,o;for(n=0,o=t.length;n<o;n++)e=(0,t[n])(e,r);return e},o=function(t,e,r){var n;return(n=Object.create(null)).value=r,n.writable=!0,n.enumerable=!0,n.configurable=!0,Object.defineProperty(t,e,n)},e.Parser=function(r){function i(t){var r,o,i;if(this.parseStringPromise=p(this.parseStringPromise,this),this.parseString=p(this.parseString,this),this.reset=p(this.reset,this),this.assignOrPush=p(this.assignOrPush,this),this.processAsync=p(this.processAsync,this),!(this instanceof e.Parser))return new e.Parser(t);for(r in this.options={},o=n["0.2"])d.call(o,r)&&(i=o[r],this.options[r]=i);for(r in t)d.call(t,r)&&(i=t[r],this.options[r]=i);this.options.xmlns&&(this.options.xmlnskey=this.options.attrkey+"ns"),this.options.normalizeTags&&(this.options.tagNameProcessors||(this.options.tagNameProcessors=[]),this.options.tagNameProcessors.unshift(u.normalize)),this.reset()}return h(i,r),i.prototype.processAsync=function(){var t;try{if(this.remaining.length<=this.options.chunkSize)return t=this.remaining,this.remaining="",this.saxParser=this.saxParser.write(t),this.saxParser.close();return t=this.remaining.substr(0,this.options.chunkSize),this.remaining=this.remaining.substr(this.options.chunkSize,this.remaining.length),this.saxParser=this.saxParser.write(t),c(this.processAsync)}catch(t){if(!this.saxParser.errThrown)return this.saxParser.errThrown=!0,this.emit(t)}},i.prototype.assignOrPush=function(t,e,r){return e in t?(t[e]instanceof Array||o(t,e,[t[e]]),t[e].push(r)):this.options.explicitArray?o(t,e,[r]):o(t,e,r)},i.prototype.reset=function(){var t,e,r,n,i,u,c,p,h;return this.removeAllListeners(),this.saxParser=l.parser(this.options.strict,{trim:!1,normalize:!1,xmlns:this.options.xmlns}),this.saxParser.errThrown=!1,this.saxParser.onerror=(i=this,function(t){if(i.saxParser.resume(),!i.saxParser.errThrown)return i.saxParser.errThrown=!0,i.emit("error",t)}),this.saxParser.onend=(u=this,function(){if(!u.saxParser.ended)return u.saxParser.ended=!0,u.emit("end",u.resultObject)}),this.saxParser.ended=!1,this.EXPLICIT_CHARKEY=this.options.explicitCharkey,this.resultObject=null,n=[],t=this.options.attrkey,e=this.options.charkey,this.saxParser.onopentag=(c=this,function(r){var i,s,u,l,p;if((u={})[e]="",!c.options.ignoreAttrs)for(i in p=r.attributes)d.call(p,i)&&(t in u||c.options.mergeAttrs||(u[t]={}),s=c.options.attrValueProcessors?a(c.options.attrValueProcessors,r.attributes[i],i):r.attributes[i],l=c.options.attrNameProcessors?a(c.options.attrNameProcessors,i):i,c.options.mergeAttrs?c.assignOrPush(u,l,s):o(u[t],l,s));return u["#name"]=c.options.tagNameProcessors?a(c.options.tagNameProcessors,r.name):r.name,c.options.xmlns&&(u[c.options.xmlnskey]={uri:r.uri,local:r.local}),n.push(u)}),this.saxParser.onclosetag=(p=this,function(){var t,r,i,u,l,c,h,f,y,m;if(l=(c=n.pop())["#name"],p.options.explicitChildren&&p.options.preserveChildrenOrder||delete c["#name"],!0===c.cdata&&(t=c.cdata,delete c.cdata),y=n[n.length-1],c[e].match(/^\s*$/)&&!t?(r=c[e],delete c[e]):(p.options.trim&&(c[e]=c[e].trim()),p.options.normalize&&(c[e]=c[e].replace(/\s{2,}/g," ").trim()),c[e]=p.options.valueProcessors?a(p.options.valueProcessors,c[e],l):c[e],1===Object.keys(c).length&&e in c&&!p.EXPLICIT_CHARKEY&&(c=c[e])),s(c)&&(c="function"==typeof p.options.emptyTag?p.options.emptyTag():""!==p.options.emptyTag?p.options.emptyTag:r),null!=p.options.validator&&(m="/"+(function(){var t,e,r;for(t=0,r=[],e=n.length;t<e;t++)u=n[t],r.push(u["#name"]);return r})().concat(l).join("/"),function(){try{c=p.options.validator(m,y&&y[l],c)}catch(t){return p.emit("error",t)}}()),p.options.explicitChildren&&!p.options.mergeAttrs&&"object"==typeof c){if(p.options.preserveChildrenOrder){if(y){for(i in y[p.options.childkey]=y[p.options.childkey]||[],h={},c)d.call(c,i)&&o(h,i,c[i]);y[p.options.childkey].push(h),delete c["#name"],1===Object.keys(c).length&&e in c&&!p.EXPLICIT_CHARKEY&&(c=c[e])}}else u={},p.options.attrkey in c&&(u[p.options.attrkey]=c[p.options.attrkey],delete c[p.options.attrkey]),!p.options.charsAsChildren&&p.options.charkey in c&&(u[p.options.charkey]=c[p.options.charkey],delete c[p.options.charkey]),Object.getOwnPropertyNames(c).length>0&&(u[p.options.childkey]=c),c=u}return n.length>0?p.assignOrPush(y,l,c):(p.options.explicitRoot&&(f=c,o(c={},l,f)),p.resultObject=c,p.saxParser.ended=!0,p.emit("end",p.resultObject))}),h=this,r=function(t){var r,o;if(o=n[n.length-1])return o[e]+=t,h.options.explicitChildren&&h.options.preserveChildrenOrder&&h.options.charsAsChildren&&(h.options.includeWhiteChars||""!==t.replace(/\\n/g,"").trim())&&(o[h.options.childkey]=o[h.options.childkey]||[],(r={"#name":"__text__"})[e]=t,h.options.normalize&&(r[e]=r[e].replace(/\s{2,}/g," ").trim()),o[h.options.childkey].push(r)),o},this.saxParser.ontext=r,this.saxParser.oncdata=function(t){var e;if(e=r(t))return e.cdata=!0}},i.prototype.parseString=function(e,r){null!=r&&"function"==typeof r&&(this.on("end",function(t){return this.reset(),r(null,t)}),this.on("error",function(t){return this.reset(),r(t)}));try{if(e=e.toString(),""===e.trim())return this.emit("end",null),!0;if(e=t.stripBOM(e),this.options.async)return this.remaining=e,c(this.processAsync),this.saxParser;return this.saxParser.write(e).close()}catch(t){if(!(this.saxParser.errThrown||this.saxParser.ended))return this.emit("error",t),this.saxParser.errThrown=!0;if(this.saxParser.ended)throw t}},i.prototype.parseStringPromise=function(t){var e;return new Promise((e=this,function(r,n){return e.parseString(t,function(t,e){return t?n(t):r(e)})}))},i}(i),e.parseString=function(t,r,n){var o,i;return null!=n?("function"==typeof n&&(o=n),"object"==typeof r&&(i=r)):("function"==typeof r&&(o=r),i={}),new e.Parser(i).parseString(t,o)},e.parseStringPromise=function(t,r){var n;return"object"==typeof r&&(n=r),new e.Parser(n).parseStringPromise(t)}}).call(this)},93098:function(t,e){(function(){"use strict";var t;t=new RegExp(/(?!xmlns)^.*:/),e.normalize=function(t){return t.toLowerCase()},e.firstCharLowerCase=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},e.stripPrefix=function(e){return e.replace(t,"")},e.parseNumbers=function(t){return isNaN(t)||(t=t%1==0?parseInt(t,10):parseFloat(t)),t},e.parseBooleans=function(t){return/^(?:true|false)$/i.test(t)&&(t="true"===t.toLowerCase()),t}}).call(this)},18159:function(t,e,r){(function(){"use strict";var t,n,o,i,s=function(t,e){for(var r in e)a.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=r(63709),t=r(80393),o=r(11036),i=r(93098),e.defaults=n.defaults,e.processors=i,e.ValidationError=function(t){function e(t){this.message=t}return s(e,t),e}(Error),e.Builder=t.Builder,e.Parser=o.Parser,e.parseString=o.parseString,e.parseStringPromise=o.parseStringPromise}).call(this)},67027:function(t){(function(){t.exports={Disconnected:1,Preceding:2,Following:4,Contains:8,ContainedBy:16,ImplementationSpecific:32}}).call(this)},57677:function(t){(function(){t.exports={Element:1,Attribute:2,Text:3,CData:4,EntityReference:5,EntityDeclaration:6,ProcessingInstruction:7,Comment:8,Document:9,DocType:10,DocumentFragment:11,NotationDeclaration:12,Declaration:201,Raw:202,AttributeDeclaration:203,ElementDeclaration:204,Dummy:205}}).call(this)},12349:function(t){(function(){var e,r,n,o,i,s,a,u=[].slice,l={}.hasOwnProperty;e=function(){var t,e,r,n,o,s;if(s=arguments[0],o=2<=arguments.length?u.call(arguments,1):[],i(Object.assign))Object.assign.apply(null,arguments);else for(t=0,r=o.length;t<r;t++)if(null!=(n=o[t]))for(e in n)l.call(n,e)&&(s[e]=n[e]);return s},i=function(t){return!!t&&"[object Function]"===Object.prototype.toString.call(t)},s=function(t){var e;return!!t&&("function"==(e=typeof t)||"object"===e)},n=function(t){return i(Array.isArray)?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},o=function(t){var e;if(n(t))return!t.length;for(e in t)if(l.call(t,e))return!1;return!0},a=function(t){var e,r;return s(t)&&(r=Object.getPrototypeOf(t))&&(e=r.constructor)&&"function"==typeof e&&e instanceof e&&Function.prototype.toString.call(e)===Function.prototype.toString.call(Object)},r=function(t){return i(t.valueOf)?t.valueOf():t},t.exports.assign=e,t.exports.isFunction=i,t.exports.isObject=s,t.exports.isArray=n,t.exports.isEmpty=o,t.exports.isPlainObject=a,t.exports.getValue=r}).call(this)},32767:function(t){(function(){t.exports={None:0,OpenTag:1,InsideTag:2,CloseTag:3}}).call(this)},50532:function(t,e,r){(function(){var e;e=r(57677),r(77295),t.exports=function(){function t(t,r,n){if(this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),null==r)throw Error("Missing attribute name. "+this.debugInfo(r));this.name=this.stringify.name(r),this.value=this.stringify.attValue(n),this.type=e.Attribute,this.isId=!1,this.schemaTypeInfo=null}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"ownerElement",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(t.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(t.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(t.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"specified",{get:function(){return!0}}),t.prototype.clone=function(){return Object.create(this)},t.prototype.toString=function(t){return this.options.writer.attribute(this,this.options.writer.filterOptions(t))},t.prototype.debugInfo=function(t){return null==(t=t||this.name)?"parent: <"+this.parent.name+">":"attribute: {"+t+"}, parent: <"+this.parent.name+">"},t.prototype.isEqualNode=function(t){return t.namespaceURI===this.namespaceURI&&t.prefix===this.prefix&&t.localName===this.localName&&t.value===this.value},t}()}).call(this)},32156:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=r(57677),n=r(56226),t.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing CDATA text. "+this.debugInfo());this.name="#cdata-section",this.type=e.CData,this.value=this.stringify.cdata(n)}return o(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.cdata(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},56226:function(t,e,r){(function(){var e,n=function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=r(77295),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t),this.value=""}return n(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this.value},set:function(t){return this.value=t||""}}),Object.defineProperty(e.prototype,"length",{get:function(){return this.value.length}}),Object.defineProperty(e.prototype,"textContent",{get:function(){return this.value},set:function(t){return this.value=t||""}}),e.prototype.clone=function(){return Object.create(this)},e.prototype.substringData=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.appendData=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.insertData=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.deleteData=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.replaceData=function(t,e,r){throw Error("This DOM method is not implemented."+this.debugInfo())},e.prototype.isEqualNode=function(t){return!!e.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.data===this.data},e}(e)}).call(this)},31463:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=r(57677),n=r(56226),t.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing comment text. "+this.debugInfo());this.name="#comment",this.type=e.Comment,this.value=this.stringify.comment(n)}return o(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.comment(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},74597:function(t,e,r){(function(){var e,n;e=r(96722),n=r(18380),t.exports=function(){function t(){this.defaultParams={"canonical-form":!1,"cdata-sections":!1,comments:!1,"datatype-normalization":!1,"element-content-whitespace":!0,entities:!0,"error-handler":new e,infoset:!0,"validate-if-schema":!1,namespaces:!0,"namespace-declarations":!0,"normalize-characters":!1,"schema-location":"","schema-type":"","split-cdata-sections":!0,validate:!1,"well-formed":!0},this.params=Object.create(this.defaultParams)}return Object.defineProperty(t.prototype,"parameterNames",{get:function(){return new n(Object.keys(this.defaultParams))}}),t.prototype.getParameter=function(t){return this.params.hasOwnProperty(t)?this.params[t]:null},t.prototype.canSetParameter=function(t,e){return!0},t.prototype.setParameter=function(t,e){return null!=e?this.params[t]=e:delete this.params[t]},t}()}).call(this)},96722:function(t){(function(){t.exports=function(){function t(){}return t.prototype.handleError=function(t){throw Error(t)},t}()}).call(this)},71476:function(t){(function(){t.exports=function(){function t(){}return t.prototype.hasFeature=function(t,e){return!0},t.prototype.createDocumentType=function(t,e,r){throw Error("This DOM method is not implemented.")},t.prototype.createDocument=function(t,e,r){throw Error("This DOM method is not implemented.")},t.prototype.createHTMLDocument=function(t){throw Error("This DOM method is not implemented.")},t.prototype.getFeature=function(t,e){throw Error("This DOM method is not implemented.")},t}()}).call(this)},18380:function(t){(function(){t.exports=function(){function t(t){this.arr=t||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.arr.length}}),t.prototype.item=function(t){return this.arr[t]||null},t.prototype.contains=function(t){return -1!==this.arr.indexOf(t)},t}()}).call(this)},66809:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=r(77295),e=r(57677),t.exports=function(t){function r(t,n,o,i,s,a){if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing DTD element name. "+this.debugInfo());if(null==o)throw Error("Missing DTD attribute name. "+this.debugInfo(n));if(!i)throw Error("Missing DTD attribute type. "+this.debugInfo(n));if(!s)throw Error("Missing DTD attribute default. "+this.debugInfo(n));if(0!==s.indexOf("#")&&(s="#"+s),!s.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/))throw Error("Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT. "+this.debugInfo(n));if(a&&!s.match(/^(#FIXED|#DEFAULT)$/))throw Error("Default value only applies to #FIXED or #DEFAULT. "+this.debugInfo(n));this.elementName=this.stringify.name(n),this.type=e.AttributeDeclaration,this.attributeName=this.stringify.name(o),this.attributeType=this.stringify.dtdAttType(i),a&&(this.defaultValue=this.stringify.dtdAttDefault(a)),this.defaultValueType=s}return o(r,t),r.prototype.toString=function(t){return this.options.writer.dtdAttList(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},66114:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=r(77295),e=r(57677),t.exports=function(t){function r(t,n,o){if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing DTD element name. "+this.debugInfo());o||(o="(#PCDATA)"),Array.isArray(o)&&(o="("+o.join(",")+")"),this.name=this.stringify.name(n),this.type=e.ElementDeclaration,this.value=this.stringify.dtdElementValue(o)}return o(r,t),r.prototype.toString=function(t){return this.options.writer.dtdElement(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},7019:function(t,e,r){(function(){var e,n,o,i=function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=r(12349).isObject,n=r(77295),e=r(57677),t.exports=function(t){function r(t,n,i,s){if(r.__super__.constructor.call(this,t),null==i)throw Error("Missing DTD entity name. "+this.debugInfo(i));if(null==s)throw Error("Missing DTD entity value. "+this.debugInfo(i));if(this.pe=!!n,this.name=this.stringify.name(i),this.type=e.EntityDeclaration,o(s)){if(!s.pubID&&!s.sysID)throw Error("Public and/or system identifiers are required for an external entity. "+this.debugInfo(i));if(s.pubID&&!s.sysID)throw Error("System identifier is required for a public external entity. "+this.debugInfo(i));if(this.internal=!1,null!=s.pubID&&(this.pubID=this.stringify.dtdPubID(s.pubID)),null!=s.sysID&&(this.sysID=this.stringify.dtdSysID(s.sysID)),null!=s.nData&&(this.nData=this.stringify.dtdNData(s.nData)),this.pe&&this.nData)throw Error("Notation declaration is not allowed in a parameter entity. "+this.debugInfo(i))}else this.value=this.stringify.dtdEntityValue(s),this.internal=!0}return i(r,t),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"notationName",{get:function(){return this.nData||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return null}}),r.prototype.toString=function(t){return this.options.writer.dtdEntity(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},71313:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=r(77295),e=r(57677),t.exports=function(t){function r(t,n,o){if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing DTD notation name. "+this.debugInfo(n));if(!o.pubID&&!o.sysID)throw Error("Public or system identifiers are required for an external entity. "+this.debugInfo(n));this.name=this.stringify.name(n),this.type=e.NotationDeclaration,null!=o.pubID&&(this.pubID=this.stringify.dtdPubID(o.pubID)),null!=o.sysID&&(this.sysID=this.stringify.dtdSysID(o.sysID))}return o(r,t),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),r.prototype.toString=function(t){return this.options.writer.dtdNotation(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},14563:function(t,e,r){(function(){var e,n,o,i=function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=r(12349).isObject,n=r(77295),e=r(57677),t.exports=function(t){function r(t,n,i,s){var a;r.__super__.constructor.call(this,t),o(n)&&(n=(a=n).version,i=a.encoding,s=a.standalone),n||(n="1.0"),this.type=e.Declaration,this.version=this.stringify.xmlVersion(n),null!=i&&(this.encoding=this.stringify.xmlEncoding(i)),null!=s&&(this.standalone=this.stringify.xmlStandalone(s))}return i(r,t),r.prototype.toString=function(t){return this.options.writer.declaration(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},5677:function(t,e,r){(function(){var e,n,o,i,s,a,u,l,c=function(t,e){for(var r in e)p.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;l=r(12349).isObject,u=r(77295),e=r(57677),n=r(66809),i=r(7019),o=r(66114),s=r(71313),a=r(1821),t.exports=function(t){function r(t,n,o){var i,s,a,u,c,p;if(r.__super__.constructor.call(this,t),this.type=e.DocType,t.children){for(s=0,a=(u=t.children).length;s<a;s++)if((i=u[s]).type===e.Element){this.name=i.name;break}}this.documentObject=t,l(n)&&(n=(c=n).pubID,o=c.sysID),null==o&&(o=(p=[n,o])[0],n=p[1]),null!=n&&(this.pubID=this.stringify.dtdPubID(n)),null!=o&&(this.sysID=this.stringify.dtdSysID(o))}return c(r,t),Object.defineProperty(r.prototype,"entities",{get:function(){var t,r,n,o,i;for(r=0,o={},n=(i=this.children).length;r<n;r++)(t=i[r]).type!==e.EntityDeclaration||t.pe||(o[t.name]=t);return new a(o)}}),Object.defineProperty(r.prototype,"notations",{get:function(){var t,r,n,o,i;for(r=0,o={},n=(i=this.children).length;r<n;r++)(t=i[r]).type===e.NotationDeclaration&&(o[t.name]=t);return new a(o)}}),Object.defineProperty(r.prototype,"publicId",{get:function(){return this.pubID}}),Object.defineProperty(r.prototype,"systemId",{get:function(){return this.sysID}}),Object.defineProperty(r.prototype,"internalSubset",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),r.prototype.element=function(t,e){var r;return r=new o(this,t,e),this.children.push(r),this},r.prototype.attList=function(t,e,r,o,i){var s;return s=new n(this,t,e,r,o,i),this.children.push(s),this},r.prototype.entity=function(t,e){var r;return r=new i(this,!1,t,e),this.children.push(r),this},r.prototype.pEntity=function(t,e){var r;return r=new i(this,!0,t,e),this.children.push(r),this},r.prototype.notation=function(t,e){var r;return r=new s(this,t,e),this.children.push(r),this},r.prototype.toString=function(t){return this.options.writer.docType(this,this.options.writer.filterOptions(t))},r.prototype.ele=function(t,e){return this.element(t,e)},r.prototype.att=function(t,e,r,n,o){return this.attList(t,e,r,n,o)},r.prototype.ent=function(t,e){return this.entity(t,e)},r.prototype.pent=function(t,e){return this.pEntity(t,e)},r.prototype.not=function(t,e){return this.notation(t,e)},r.prototype.up=function(){return this.root()||this.documentObject},r.prototype.isEqualNode=function(t){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.name===this.name&&t.publicId===this.publicId&&t.systemId===this.systemId},r}(u)}).call(this)},58131:function(t,e,r){(function(){var e,n,o,i,s,a,u,l=function(t,e){for(var r in e)c.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;u=r(12349).isPlainObject,o=r(71476),n=r(74597),i=r(77295),e=r(57677),a=r(69689),s=r(23511),t.exports=function(t){function r(t){r.__super__.constructor.call(this,null),this.name="#document",this.type=e.Document,this.documentURI=null,this.domConfig=new n,t||(t={}),t.writer||(t.writer=new s),this.options=t,this.stringify=new a(t)}return l(r,t),Object.defineProperty(r.prototype,"implementation",{value:new o}),Object.defineProperty(r.prototype,"doctype",{get:function(){var t,r,n,o;for(r=0,n=(o=this.children).length;r<n;r++)if((t=o[r]).type===e.DocType)return t;return null}}),Object.defineProperty(r.prototype,"documentElement",{get:function(){return this.rootObject||null}}),Object.defineProperty(r.prototype,"inputEncoding",{get:function(){return null}}),Object.defineProperty(r.prototype,"strictErrorChecking",{get:function(){return!1}}),Object.defineProperty(r.prototype,"xmlEncoding",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].encoding:null}}),Object.defineProperty(r.prototype,"xmlStandalone",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration&&"yes"===this.children[0].standalone}}),Object.defineProperty(r.prototype,"xmlVersion",{get:function(){return 0!==this.children.length&&this.children[0].type===e.Declaration?this.children[0].version:"1.0"}}),Object.defineProperty(r.prototype,"URL",{get:function(){return this.documentURI}}),Object.defineProperty(r.prototype,"origin",{get:function(){return null}}),Object.defineProperty(r.prototype,"compatMode",{get:function(){return null}}),Object.defineProperty(r.prototype,"characterSet",{get:function(){return null}}),Object.defineProperty(r.prototype,"contentType",{get:function(){return null}}),r.prototype.end=function(t){var e;return e={},t?u(t)&&(e=t,t=this.options.writer):t=this.options.writer,t.document(this,t.filterOptions(e))},r.prototype.toString=function(t){return this.options.writer.document(this,this.options.writer.filterOptions(t))},r.prototype.createElement=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createDocumentFragment=function(){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createTextNode=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createComment=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createCDATASection=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createProcessingInstruction=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createAttribute=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createEntityReference=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.importNode=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createElementNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createAttributeNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementById=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.adoptNode=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.normalizeDocument=function(){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.renameNode=function(t,e,r){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByClassName=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createEvent=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createRange=function(){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createNodeIterator=function(t,e,r){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.createTreeWalker=function(t,e,r){throw Error("This DOM method is not implemented."+this.debugInfo())},r}(i)}).call(this)},46593:function(t,e,r){(function(){var e,n,o,i,s,a,u,l,c,p,h,d,f,y,m,g,w,b,v,I,E,x,D,N={}.hasOwnProperty;E=(D=r(12349)).isObject,I=D.isFunction,x=D.isPlainObject,v=D.getValue,e=r(57677),d=r(58131),f=r(96767),i=r(32156),s=r(31463),m=r(10419),b=r(17758),y=r(31193),p=r(14563),h=r(5677),a=r(66809),l=r(7019),u=r(66114),c=r(71313),o=r(50532),w=r(69689),g=r(23511),n=r(32767),t.exports=function(){function t(t,r,n){var o;this.name="?xml",this.type=e.Document,t||(t={}),o={},t.writer?x(t.writer)&&(o=t.writer,t.writer=new g):t.writer=new g,this.options=t,this.writer=t.writer,this.writerOptions=this.writer.filterOptions(o),this.stringify=new w(t),this.onDataCallback=r||function(){},this.onEndCallback=n||function(){},this.currentNode=null,this.currentLevel=-1,this.openTags={},this.documentStarted=!1,this.documentCompleted=!1,this.root=null}return t.prototype.createChildNode=function(t){var r,n,o,i,s,a,u,l;switch(t.type){case e.CData:this.cdata(t.value);break;case e.Comment:this.comment(t.value);break;case e.Element:for(n in o={},u=t.attribs)N.call(u,n)&&(r=u[n],o[n]=r.value);this.node(t.name,o);break;case e.Dummy:this.dummy();break;case e.Raw:this.raw(t.value);break;case e.Text:this.text(t.value);break;case e.ProcessingInstruction:this.instruction(t.target,t.value);break;default:throw Error("This XML node type is not supported in a JS object: "+t.constructor.name)}for(s=0,a=(l=t.children).length;s<a;s++)i=l[s],this.createChildNode(i),i.type===e.Element&&this.up();return this},t.prototype.dummy=function(){return this},t.prototype.node=function(t,e,r){var n;if(null==t)throw Error("Missing node name.");if(this.root&&-1===this.currentLevel)throw Error("Document can only have one root node. "+this.debugInfo(t));return this.openCurrent(),t=v(t),null==e&&(e={}),E(e=v(e))||(r=(n=[e,r])[0],e=n[1]),this.currentNode=new f(this,t,e),this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,null!=r&&this.text(r),this},t.prototype.element=function(t,r,n){var o,i,s,a,u,l;if(this.currentNode&&this.currentNode.type===e.DocType)this.dtdElement.apply(this,arguments);else if(Array.isArray(t)||E(t)||I(t))for(a=this.options.noValidation,this.options.noValidation=!0,(l=new d(this.options).element("TEMP_ROOT")).element(t),this.options.noValidation=a,i=0,s=(u=l.children).length;i<s;i++)o=u[i],this.createChildNode(o),o.type===e.Element&&this.up();else this.node(t,r,n);return this},t.prototype.attribute=function(t,e){var r,n;if(!this.currentNode||this.currentNode.children)throw Error("att() can only be used immediately after an ele() call in callback mode. "+this.debugInfo(t));if(null!=t&&(t=v(t)),E(t))for(r in t)N.call(t,r)&&(n=t[r],this.attribute(r,n));else I(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.currentNode.attribs[t]=new o(this,t,""):null!=e&&(this.currentNode.attribs[t]=new o(this,t,e));return this},t.prototype.text=function(t){var e;return this.openCurrent(),e=new b(this,t),this.onData(this.writer.text(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.cdata=function(t){var e;return this.openCurrent(),e=new i(this,t),this.onData(this.writer.cdata(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.comment=function(t){var e;return this.openCurrent(),e=new s(this,t),this.onData(this.writer.comment(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.raw=function(t){var e;return this.openCurrent(),e=new m(this,t),this.onData(this.writer.raw(e,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.instruction=function(t,e){var r,n,o,i,s;if(this.openCurrent(),null!=t&&(t=v(t)),null!=e&&(e=v(e)),Array.isArray(t))for(r=0,i=t.length;r<i;r++)n=t[r],this.instruction(n);else if(E(t))for(n in t)N.call(t,n)&&(o=t[n],this.instruction(n,o));else I(e)&&(e=e.apply()),s=new y(this,t,e),this.onData(this.writer.processingInstruction(s,this.writerOptions,this.currentLevel+1),this.currentLevel+1);return this},t.prototype.declaration=function(t,e,r){var n;if(this.openCurrent(),this.documentStarted)throw Error("declaration() must be the first node.");return n=new p(this,t,e,r),this.onData(this.writer.declaration(n,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.doctype=function(t,e,r){if(this.openCurrent(),null==t)throw Error("Missing root node name.");if(this.root)throw Error("dtd() must come before the root node.");return this.currentNode=new h(this,e,r),this.currentNode.rootNodeName=t,this.currentNode.children=!1,this.currentLevel++,this.openTags[this.currentLevel]=this.currentNode,this},t.prototype.dtdElement=function(t,e){var r;return this.openCurrent(),r=new u(this,t,e),this.onData(this.writer.dtdElement(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.attList=function(t,e,r,n,o){var i;return this.openCurrent(),i=new a(this,t,e,r,n,o),this.onData(this.writer.dtdAttList(i,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.entity=function(t,e){var r;return this.openCurrent(),r=new l(this,!1,t,e),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.pEntity=function(t,e){var r;return this.openCurrent(),r=new l(this,!0,t,e),this.onData(this.writer.dtdEntity(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.notation=function(t,e){var r;return this.openCurrent(),r=new c(this,t,e),this.onData(this.writer.dtdNotation(r,this.writerOptions,this.currentLevel+1),this.currentLevel+1),this},t.prototype.up=function(){if(this.currentLevel<0)throw Error("The document node has no parent.");return this.currentNode?(this.currentNode.children?this.closeNode(this.currentNode):this.openNode(this.currentNode),this.currentNode=null):this.closeNode(this.openTags[this.currentLevel]),delete this.openTags[this.currentLevel],this.currentLevel--,this},t.prototype.end=function(){for(;this.currentLevel>=0;)this.up();return this.onEnd()},t.prototype.openCurrent=function(){if(this.currentNode)return this.currentNode.children=!0,this.openNode(this.currentNode)},t.prototype.openNode=function(t){var r,o,i,s;if(!t.isOpen){if(this.root||0!==this.currentLevel||t.type!==e.Element||(this.root=t),o="",t.type===e.Element){for(i in this.writerOptions.state=n.OpenTag,o=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<"+t.name,s=t.attribs)N.call(s,i)&&(r=s[i],o+=this.writer.attribute(r,this.writerOptions,this.currentLevel));o+=(t.children?">":"/>")+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=n.InsideTag}else this.writerOptions.state=n.OpenTag,o=this.writer.indent(t,this.writerOptions,this.currentLevel)+"<!DOCTYPE "+t.rootNodeName,t.pubID&&t.sysID?o+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(o+=' SYSTEM "'+t.sysID+'"'),t.children?(o+=" [",this.writerOptions.state=n.InsideTag):(this.writerOptions.state=n.CloseTag,o+=">"),o+=this.writer.endline(t,this.writerOptions,this.currentLevel);return this.onData(o,this.currentLevel),t.isOpen=!0}},t.prototype.closeNode=function(t){var r;if(!t.isClosed)return r="",this.writerOptions.state=n.CloseTag,r=t.type===e.Element?this.writer.indent(t,this.writerOptions,this.currentLevel)+"</"+t.name+">"+this.writer.endline(t,this.writerOptions,this.currentLevel):this.writer.indent(t,this.writerOptions,this.currentLevel)+"]>"+this.writer.endline(t,this.writerOptions,this.currentLevel),this.writerOptions.state=n.None,this.onData(r,this.currentLevel),t.isClosed=!0},t.prototype.onData=function(t,e){return this.documentStarted=!0,this.onDataCallback(t,e+1)},t.prototype.onEnd=function(){return this.documentCompleted=!0,this.onEndCallback()},t.prototype.debugInfo=function(t){return null==t?"":"node: <"+t+">"},t.prototype.ele=function(){return this.element.apply(this,arguments)},t.prototype.nod=function(t,e,r){return this.node(t,e,r)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},t.prototype.dtd=function(t,e,r){return this.doctype(t,e,r)},t.prototype.e=function(t,e,r){return this.element(t,e,r)},t.prototype.n=function(t,e,r){return this.node(t,e,r)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.att=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.a=function(){return this.currentNode&&this.currentNode.type===e.DocType?this.attList.apply(this,arguments):this.attribute.apply(this,arguments)},t.prototype.ent=function(t,e){return this.entity(t,e)},t.prototype.pent=function(t,e){return this.pEntity(t,e)},t.prototype.not=function(t,e){return this.notation(t,e)},t}()}).call(this)},10153:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;n=r(77295),e=r(57677),t.exports=function(t){function r(t){r.__super__.constructor.call(this,t),this.type=e.Dummy}return o(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return""},r}(n)}).call(this)},96767:function(t,e,r){(function(){var e,n,o,i,s,a,u,l,c=function(t,e){for(var r in e)p.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p={}.hasOwnProperty;u=(l=r(12349)).isObject,a=l.isFunction,s=l.getValue,i=r(77295),e=r(57677),n=r(50532),o=r(1821),t.exports=function(t){function r(t,n,o){var i,s,a,u;if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing element name. "+this.debugInfo());if(this.name=this.stringify.name(n),this.type=e.Element,this.attribs={},this.schemaTypeInfo=null,null!=o&&this.attribute(o),t.type===e.Document&&(this.isRoot=!0,this.documentObject=t,t.rootObject=this,t.children)){for(s=0,a=(u=t.children).length;s<a;s++)if((i=u[s]).type===e.DocType){i.name=this.name;break}}}return c(r,t),Object.defineProperty(r.prototype,"tagName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"namespaceURI",{get:function(){return""}}),Object.defineProperty(r.prototype,"prefix",{get:function(){return""}}),Object.defineProperty(r.prototype,"localName",{get:function(){return this.name}}),Object.defineProperty(r.prototype,"id",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"className",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"classList",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"attributes",{get:function(){return this.attributeMap&&this.attributeMap.nodes||(this.attributeMap=new o(this.attribs)),this.attributeMap}}),r.prototype.clone=function(){var t,e,r,n;for(e in(r=Object.create(this)).isRoot&&(r.documentObject=null),r.attribs={},n=this.attribs)p.call(n,e)&&(t=n[e],r.attribs[e]=t.clone());return r.children=[],this.children.forEach(function(t){var e;return(e=t.clone()).parent=r,r.children.push(e)}),r},r.prototype.attribute=function(t,e){var r,o;if(null!=t&&(t=s(t)),u(t))for(r in t)p.call(t,r)&&(o=t[r],this.attribute(r,o));else a(e)&&(e=e.apply()),this.options.keepNullAttributes&&null==e?this.attribs[t]=new n(this,t,""):null!=e&&(this.attribs[t]=new n(this,t,e));return this},r.prototype.removeAttribute=function(t){var e,r,n;if(null==t)throw Error("Missing attribute name. "+this.debugInfo());if(Array.isArray(t=s(t)))for(r=0,n=t.length;r<n;r++)e=t[r],delete this.attribs[e];else delete this.attribs[t];return this},r.prototype.toString=function(t){return this.options.writer.element(this,this.options.writer.filterOptions(t))},r.prototype.att=function(t,e){return this.attribute(t,e)},r.prototype.a=function(t,e){return this.attribute(t,e)},r.prototype.getAttribute=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t].value:null},r.prototype.setAttribute=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNode=function(t){return this.attribs.hasOwnProperty(t)?this.attribs[t]:null},r.prototype.setAttributeNode=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeAttributeNode=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setAttributeNS=function(t,e,r){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.removeAttributeNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getAttributeNodeNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setAttributeNodeNS=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.hasAttribute=function(t){return this.attribs.hasOwnProperty(t)},r.prototype.hasAttributeNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setIdAttribute=function(t,e){return this.attribs.hasOwnProperty(t)?this.attribs[t].isId:e},r.prototype.setIdAttributeNS=function(t,e,r){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.setIdAttributeNode=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagName=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByTagNameNS=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.getElementsByClassName=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.isEqualNode=function(t){var e,n,o;if(!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)||t.namespaceURI!==this.namespaceURI||t.prefix!==this.prefix||t.localName!==this.localName||t.attribs.length!==this.attribs.length)return!1;for(e=n=0,o=this.attribs.length-1;0<=o?n<=o:n>=o;e=0<=o?++n:--n)if(!this.attribs[e].isEqualNode(t.attribs[e]))return!1;return!0},r}(i)}).call(this)},1821:function(t){(function(){t.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return Object.keys(this.nodes).length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.getNamedItem=function(t){return this.nodes[t]},t.prototype.setNamedItem=function(t){var e;return e=this.nodes[t.nodeName],this.nodes[t.nodeName]=t,e||null},t.prototype.removeNamedItem=function(t){var e;return e=this.nodes[t],delete this.nodes[t],e||null},t.prototype.item=function(t){return this.nodes[Object.keys(this.nodes)[t]]||null},t.prototype.getNamedItemNS=function(t,e){throw Error("This DOM method is not implemented.")},t.prototype.setNamedItemNS=function(t){throw Error("This DOM method is not implemented.")},t.prototype.removeNamedItemNS=function(t,e){throw Error("This DOM method is not implemented.")},t}()}).call(this)},77295:function(t,e,r){(function(){var e,n,o,i,s,a,u,l,c,p,h,d,f,y,m,g,w,b={}.hasOwnProperty;g=(w=r(12349)).isObject,m=w.isFunction,y=w.isEmpty,f=w.getValue,l=null,o=null,i=null,s=null,a=null,h=null,d=null,p=null,u=null,n=null,c=null,e=null,t.exports=function(){function t(t){this.parent=t,this.parent&&(this.options=this.parent.options,this.stringify=this.parent.stringify),this.value=null,this.children=[],this.baseURI=null,l||(l=r(96767),o=r(32156),i=r(31463),s=r(14563),a=r(5677),h=r(10419),d=r(17758),p=r(31193),u=r(10153),n=r(57677),c=r(70293),r(1821),e=r(67027))}return Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.name}}),Object.defineProperty(t.prototype,"nodeType",{get:function(){return this.type}}),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.value}}),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.parent}}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.childNodeList&&this.childNodeList.nodes||(this.childNodeList=new c(this.children)),this.childNodeList}}),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.children[0]||null}}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null}}),Object.defineProperty(t.prototype,"previousSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t-1]||null}}),Object.defineProperty(t.prototype,"nextSibling",{get:function(){var t;return t=this.parent.children.indexOf(this),this.parent.children[t+1]||null}}),Object.defineProperty(t.prototype,"ownerDocument",{get:function(){return this.document()||null}}),Object.defineProperty(t.prototype,"textContent",{get:function(){var t,e,r,o,i;if(this.nodeType!==n.Element&&this.nodeType!==n.DocumentFragment)return null;for(e=0,i="",r=(o=this.children).length;e<r;e++)(t=o[e]).textContent&&(i+=t.textContent);return i},set:function(t){throw Error("This DOM method is not implemented."+this.debugInfo())}}),t.prototype.setParent=function(t){var e,r,n,o,i;for(this.parent=t,t&&(this.options=t.options,this.stringify=t.stringify),o=this.children,i=[],r=0,n=o.length;r<n;r++)e=o[r],i.push(e.setParent(this));return i},t.prototype.element=function(t,e,r){var n,o,i,s,a,u,l,c,p,h,d;if(u=null,null===e&&null==r&&(e=(p=[{},null])[0],r=p[1]),null==e&&(e={}),g(e=f(e))||(r=(h=[e,r])[0],e=h[1]),null!=t&&(t=f(t)),Array.isArray(t))for(i=0,l=t.length;i<l;i++)o=t[i],u=this.element(o);else if(m(t))u=this.element(t.apply());else if(g(t)){for(a in t)if(b.call(t,a)){if(m(d=t[a])&&(d=d.apply()),!this.options.ignoreDecorators&&this.stringify.convertAttKey&&0===a.indexOf(this.stringify.convertAttKey))u=this.attribute(a.substr(this.stringify.convertAttKey.length),d);else if(!this.options.separateArrayItems&&Array.isArray(d)&&y(d))u=this.dummy();else if(g(d)&&y(d))u=this.element(a);else if(this.options.keepNullNodes||null!=d){if(!this.options.separateArrayItems&&Array.isArray(d))for(s=0,c=d.length;s<c;s++)o=d[s],(n={})[a]=o,u=this.element(n);else g(d)?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===a.indexOf(this.stringify.convertTextKey)?u=this.element(d):(u=this.element(a)).element(d):u=this.element(a,d)}else u=this.dummy()}}else u=this.options.keepNullNodes||null!==r?!this.options.ignoreDecorators&&this.stringify.convertTextKey&&0===t.indexOf(this.stringify.convertTextKey)?this.text(r):!this.options.ignoreDecorators&&this.stringify.convertCDataKey&&0===t.indexOf(this.stringify.convertCDataKey)?this.cdata(r):!this.options.ignoreDecorators&&this.stringify.convertCommentKey&&0===t.indexOf(this.stringify.convertCommentKey)?this.comment(r):!this.options.ignoreDecorators&&this.stringify.convertRawKey&&0===t.indexOf(this.stringify.convertRawKey)?this.raw(r):!this.options.ignoreDecorators&&this.stringify.convertPIKey&&0===t.indexOf(this.stringify.convertPIKey)?this.instruction(t.substr(this.stringify.convertPIKey.length),r):this.node(t,e,r):this.dummy();if(null==u)throw Error("Could not create any elements with: "+t+". "+this.debugInfo());return u},t.prototype.insertBefore=function(t,e,r){var n,o,i;if(null!=t?t.type:void 0)return t.setParent(this),e?(o=children.indexOf(e),i=children.splice(o),children.push(t),Array.prototype.push.apply(children,i)):children.push(t),t;if(this.isRoot)throw Error("Cannot insert elements at root level. "+this.debugInfo(t));return o=this.parent.children.indexOf(this),i=this.parent.children.splice(o),n=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,i),n},t.prototype.insertAfter=function(t,e,r){var n,o,i;if(this.isRoot)throw Error("Cannot insert elements at root level. "+this.debugInfo(t));return o=this.parent.children.indexOf(this),i=this.parent.children.splice(o+1),n=this.parent.element(t,e,r),Array.prototype.push.apply(this.parent.children,i),n},t.prototype.remove=function(){var t;if(this.isRoot)throw Error("Cannot remove the root element. "+this.debugInfo());return t=this.parent.children.indexOf(this),[].splice.apply(this.parent.children,[t,t-t+1].concat([])),this.parent},t.prototype.node=function(t,e,r){var n,o;return null!=t&&(t=f(t)),e||(e={}),g(e=f(e))||(r=(o=[e,r])[0],e=o[1]),n=new l(this,t,e),null!=r&&n.text(r),this.children.push(n),n},t.prototype.text=function(t){var e;return g(t)&&this.element(t),e=new d(this,t),this.children.push(e),this},t.prototype.cdata=function(t){var e;return e=new o(this,t),this.children.push(e),this},t.prototype.comment=function(t){var e;return e=new i(this,t),this.children.push(e),this},t.prototype.commentBefore=function(t){var e,r;return e=this.parent.children.indexOf(this),r=this.parent.children.splice(e),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.commentAfter=function(t){var e,r;return e=this.parent.children.indexOf(this),r=this.parent.children.splice(e+1),this.parent.comment(t),Array.prototype.push.apply(this.parent.children,r),this},t.prototype.raw=function(t){var e;return e=new h(this,t),this.children.push(e),this},t.prototype.dummy=function(){return new u(this)},t.prototype.instruction=function(t,e){var r,n,o,i,s;if(null!=t&&(t=f(t)),null!=e&&(e=f(e)),Array.isArray(t))for(i=0,s=t.length;i<s;i++)r=t[i],this.instruction(r);else if(g(t))for(r in t)b.call(t,r)&&(n=t[r],this.instruction(r,n));else m(e)&&(e=e.apply()),o=new p(this,t,e),this.children.push(o);return this},t.prototype.instructionBefore=function(t,e){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.instructionAfter=function(t,e){var r,n;return r=this.parent.children.indexOf(this),n=this.parent.children.splice(r+1),this.parent.instruction(t,e),Array.prototype.push.apply(this.parent.children,n),this},t.prototype.declaration=function(t,e,r){var o,i;return o=this.document(),i=new s(o,t,e,r),0===o.children.length?o.children.unshift(i):o.children[0].type===n.Declaration?o.children[0]=i:o.children.unshift(i),o.root()||o},t.prototype.dtd=function(t,e){var r,o,i,s,u,l,c,p,h;for(r=this.document(),o=new a(r,t,e),p=r.children,i=s=0,l=p.length;s<l;i=++s)if(p[i].type===n.DocType)return r.children[i]=o,o;for(h=r.children,i=u=0,c=h.length;u<c;i=++u)if(h[i].isRoot)return r.children.splice(i,0,o),o;return r.children.push(o),o},t.prototype.up=function(){if(this.isRoot)throw Error("The root node has no parent. Use doc() if you need to get the document object.");return this.parent},t.prototype.root=function(){var t;for(t=this;t;){if(t.type===n.Document)return t.rootObject;if(t.isRoot)return t;t=t.parent}},t.prototype.document=function(){var t;for(t=this;t;){if(t.type===n.Document)return t;t=t.parent}},t.prototype.end=function(t){return this.document().end(t)},t.prototype.prev=function(){var t;if((t=this.parent.children.indexOf(this))<1)throw Error("Already at the first node. "+this.debugInfo());return this.parent.children[t-1]},t.prototype.next=function(){var t;if(-1===(t=this.parent.children.indexOf(this))||t===this.parent.children.length-1)throw Error("Already at the last node. "+this.debugInfo());return this.parent.children[t+1]},t.prototype.importDocument=function(t){var e;return(e=t.root().clone()).parent=this,e.isRoot=!1,this.children.push(e),this},t.prototype.debugInfo=function(t){var e,r;return null!=(t=t||this.name)||(null!=(e=this.parent)?e.name:void 0)?null==t?"parent: <"+this.parent.name+">":(null!=(r=this.parent)?r.name:void 0)?"node: <"+t+">, parent: <"+this.parent.name+">":"node: <"+t+">":""},t.prototype.ele=function(t,e,r){return this.element(t,e,r)},t.prototype.nod=function(t,e,r){return this.node(t,e,r)},t.prototype.txt=function(t){return this.text(t)},t.prototype.dat=function(t){return this.cdata(t)},t.prototype.com=function(t){return this.comment(t)},t.prototype.ins=function(t,e){return this.instruction(t,e)},t.prototype.doc=function(){return this.document()},t.prototype.dec=function(t,e,r){return this.declaration(t,e,r)},t.prototype.e=function(t,e,r){return this.element(t,e,r)},t.prototype.n=function(t,e,r){return this.node(t,e,r)},t.prototype.t=function(t){return this.text(t)},t.prototype.d=function(t){return this.cdata(t)},t.prototype.c=function(t){return this.comment(t)},t.prototype.r=function(t){return this.raw(t)},t.prototype.i=function(t,e){return this.instruction(t,e)},t.prototype.u=function(){return this.up()},t.prototype.importXMLBuilder=function(t){return this.importDocument(t)},t.prototype.replaceChild=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.removeChild=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.appendChild=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.hasChildNodes=function(){return 0!==this.children.length},t.prototype.cloneNode=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.normalize=function(){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isSupported=function(t,e){return!0},t.prototype.hasAttributes=function(){return 0!==this.attribs.length},t.prototype.compareDocumentPosition=function(t){var r;return this===t?0:this.document()!==t.document()?(r=e.Disconnected|e.ImplementationSpecific,.5>Math.random()?r|=e.Preceding:r|=e.Following,r):this.isAncestor(t)?e.Contains|e.Preceding:this.isDescendant(t)?e.Contains|e.Following:this.isPreceding(t)?e.Preceding:e.Following},t.prototype.isSameNode=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupPrefix=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isDefaultNamespace=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.lookupNamespaceURI=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.isEqualNode=function(t){var e,r,n;if(t.nodeType!==this.nodeType||t.children.length!==this.children.length)return!1;for(e=r=0,n=this.children.length-1;0<=n?r<=n:r>=n;e=0<=n?++r:--r)if(!this.children[e].isEqualNode(t.children[e]))return!1;return!0},t.prototype.getFeature=function(t,e){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.setUserData=function(t,e,r){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.getUserData=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},t.prototype.contains=function(t){return!!t&&(t===this||this.isDescendant(t))},t.prototype.isDescendant=function(t){var e,r,n,o;for(r=0,n=(o=this.children).length;r<n;r++)if(t===(e=o[r])||e.isDescendant(t))return!0;return!1},t.prototype.isAncestor=function(t){return t.isDescendant(this)},t.prototype.isPreceding=function(t){var e,r;return e=this.treePosition(t),r=this.treePosition(this),-1!==e&&-1!==r&&e<r},t.prototype.isFollowing=function(t){var e,r;return e=this.treePosition(t),r=this.treePosition(this),-1!==e&&-1!==r&&e>r},t.prototype.treePosition=function(t){var e,r;return(r=0,e=!1,this.foreachTreeNode(this.document(),function(n){if(r++,!e&&n===t)return e=!0}),e)?r:-1},t.prototype.foreachTreeNode=function(t,e){var r,n,o,i,s;for(t||(t=this.document()),n=0,o=(i=t.children).length;n<o;n++)if((s=e(r=i[n]))||(s=this.foreachTreeNode(r,e)))return s},t}()}).call(this)},70293:function(t){(function(){t.exports=function(){function t(t){this.nodes=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes.length||0}}),t.prototype.clone=function(){return this.nodes=null},t.prototype.item=function(t){return this.nodes[t]||null},t}()}).call(this)},31193:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=r(57677),n=r(56226),t.exports=function(t){function r(t,n,o){if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing instruction target. "+this.debugInfo());this.type=e.ProcessingInstruction,this.target=this.stringify.insTarget(n),this.name=this.target,o&&(this.value=this.stringify.insValue(o))}return o(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.processingInstruction(this,this.options.writer.filterOptions(t))},r.prototype.isEqualNode=function(t){return!!r.__super__.isEqualNode.apply(this,arguments).isEqualNode(t)&&t.target===this.target},r}(n)}).call(this)},10419:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=r(57677),n=r(77295),t.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing raw text. "+this.debugInfo());this.type=e.Raw,this.value=this.stringify.raw(n)}return o(r,t),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.raw(this,this.options.writer.filterOptions(t))},r}(n)}).call(this)},16214:function(t,e,r){(function(){var e,n,o,i=function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;e=r(57677),o=r(91491),n=r(32767),t.exports=function(t){function r(t,e){this.stream=t,r.__super__.constructor.call(this,e)}return i(r,t),r.prototype.endline=function(t,e,o){return t.isLastRootNode&&e.state===n.CloseTag?"":r.__super__.endline.call(this,t,e,o)},r.prototype.document=function(t,e){var r,n,o,i,s,a,u,l,c;for(u=t.children,n=o=0,s=u.length;o<s;n=++o)(r=u[n]).isLastRootNode=n===t.children.length-1;for(i=0,e=this.filterOptions(e),l=t.children,c=[],a=l.length;i<a;i++)r=l[i],c.push(this.writeChildNode(r,e,0));return c},r.prototype.attribute=function(t,e,n){return this.stream.write(r.__super__.attribute.call(this,t,e,n))},r.prototype.cdata=function(t,e,n){return this.stream.write(r.__super__.cdata.call(this,t,e,n))},r.prototype.comment=function(t,e,n){return this.stream.write(r.__super__.comment.call(this,t,e,n))},r.prototype.declaration=function(t,e,n){return this.stream.write(r.__super__.declaration.call(this,t,e,n))},r.prototype.docType=function(t,e,r){var o,i,s,a;if(r||(r=0),this.openNode(t,e,r),e.state=n.OpenTag,this.stream.write(this.indent(t,e,r)),this.stream.write("<!DOCTYPE "+t.root().name),t.pubID&&t.sysID?this.stream.write(' PUBLIC "'+t.pubID+'" "'+t.sysID+'"'):t.sysID&&this.stream.write(' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(this.stream.write(" ["),this.stream.write(this.endline(t,e,r)),e.state=n.InsideTag,i=0,s=(a=t.children).length;i<s;i++)o=a[i],this.writeChildNode(o,e,r+1);e.state=n.CloseTag,this.stream.write("]")}return e.state=n.CloseTag,this.stream.write(e.spaceBeforeSlash+">"),this.stream.write(this.endline(t,e,r)),e.state=n.None,this.closeNode(t,e,r)},r.prototype.element=function(t,r,o){var i,a,u,l,c,p,h,d,f;for(h in o||(o=0),this.openNode(t,r,o),r.state=n.OpenTag,this.stream.write(this.indent(t,r,o)+"<"+t.name),d=t.attribs)s.call(d,h)&&(i=d[h],this.attribute(i,r,o));if(l=0===(u=t.children.length)?null:t.children[0],0===u||t.children.every(function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value}))r.allowEmpty?(this.stream.write(">"),r.state=n.CloseTag,this.stream.write("</"+t.name+">")):(r.state=n.CloseTag,this.stream.write(r.spaceBeforeSlash+"/>"));else if(r.pretty&&1===u&&(l.type===e.Text||l.type===e.Raw)&&null!=l.value)this.stream.write(">"),r.state=n.InsideTag,r.suppressPrettyCount++,this.writeChildNode(l,r,o+1),r.suppressPrettyCount--,r.state=n.CloseTag,this.stream.write("</"+t.name+">");else{for(this.stream.write(">"+this.endline(t,r,o)),r.state=n.InsideTag,c=0,p=(f=t.children).length;c<p;c++)a=f[c],this.writeChildNode(a,r,o+1);r.state=n.CloseTag,this.stream.write(this.indent(t,r,o)+"</"+t.name+">")}return this.stream.write(this.endline(t,r,o)),r.state=n.None,this.closeNode(t,r,o)},r.prototype.processingInstruction=function(t,e,n){return this.stream.write(r.__super__.processingInstruction.call(this,t,e,n))},r.prototype.raw=function(t,e,n){return this.stream.write(r.__super__.raw.call(this,t,e,n))},r.prototype.text=function(t,e,n){return this.stream.write(r.__super__.text.call(this,t,e,n))},r.prototype.dtdAttList=function(t,e,n){return this.stream.write(r.__super__.dtdAttList.call(this,t,e,n))},r.prototype.dtdElement=function(t,e,n){return this.stream.write(r.__super__.dtdElement.call(this,t,e,n))},r.prototype.dtdEntity=function(t,e,n){return this.stream.write(r.__super__.dtdEntity.call(this,t,e,n))},r.prototype.dtdNotation=function(t,e,n){return this.stream.write(r.__super__.dtdNotation.call(this,t,e,n))},r}(o)}).call(this)},23511:function(t,e,r){(function(){var e,n=function(t,e){for(var r in e)o.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=r(91491),t.exports=function(t){function e(t){e.__super__.constructor.call(this,t)}return n(e,t),e.prototype.document=function(t,e){var r,n,o,i,s;for(n=0,e=this.filterOptions(e),i="",o=(s=t.children).length;n<o;n++)r=s[n],i+=this.writeChildNode(r,e,0);return e.pretty&&i.slice(-e.newline.length)===e.newline&&(i=i.slice(0,-e.newline.length)),i},e}(e)}).call(this)},69689:function(t){(function(){var e=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;t.exports=function(){function t(t){var n,o,i;for(n in this.assertLegalName=e(this.assertLegalName,this),this.assertLegalChar=e(this.assertLegalChar,this),t||(t={}),this.options=t,this.options.version||(this.options.version="1.0"),o=t.stringify||{})r.call(o,n)&&(i=o[n],this[n]=i)}return t.prototype.name=function(t){return this.options.noValidation?t:this.assertLegalName(""+t||"")},t.prototype.text=function(t){return this.options.noValidation?t:this.assertLegalChar(this.textEscape(""+t||""))},t.prototype.cdata=function(t){return this.options.noValidation?t:(t=(t=""+t||"").replace("]]>","]]]]><![CDATA[>"),this.assertLegalChar(t))},t.prototype.comment=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/--/))throw Error("Comment text cannot contain double-hypen: "+t);return this.assertLegalChar(t)},t.prototype.raw=function(t){return this.options.noValidation?t:""+t||""},t.prototype.attValue=function(t){return this.options.noValidation?t:this.assertLegalChar(this.attEscape(t=""+t||""))},t.prototype.insTarget=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.insValue=function(t){if(this.options.noValidation)return t;if((t=""+t||"").match(/\?>/))throw Error("Invalid processing instruction value: "+t);return this.assertLegalChar(t)},t.prototype.xmlVersion=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/1\.[0-9]+/))throw Error("Invalid version number: "+t);return t},t.prototype.xmlEncoding=function(t){if(this.options.noValidation)return t;if(!(t=""+t||"").match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/))throw Error("Invalid encoding: "+t);return this.assertLegalChar(t)},t.prototype.xmlStandalone=function(t){return this.options.noValidation?t:t?"yes":"no"},t.prototype.dtdPubID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdSysID=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdElementValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdAttType=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdAttDefault=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdEntityValue=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.dtdNData=function(t){return this.options.noValidation?t:this.assertLegalChar(""+t||"")},t.prototype.convertAttKey="@",t.prototype.convertPIKey="?",t.prototype.convertTextKey="#text",t.prototype.convertCDataKey="#cdata",t.prototype.convertCommentKey="#comment",t.prototype.convertRawKey="#raw",t.prototype.assertLegalChar=function(t){var e,r;if(this.options.noValidation)return t;if(e="","1.0"===this.options.version){if(e=/[\0-\x08\x0B\f\x0E-\x1F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=t.match(e))throw Error("Invalid character in string: "+t+" at index "+r.index)}else if("1.1"===this.options.version&&(e=/[\0\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,r=t.match(e)))throw Error("Invalid character in string: "+t+" at index "+r.index);return t},t.prototype.assertLegalName=function(t){var e;if(this.options.noValidation)return t;if(this.assertLegalChar(t),e=/^([:A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])([\x2D\.0-:A-Z_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,!t.match(e))throw Error("Invalid character in name");return t},t.prototype.textEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#xD;"))},t.prototype.attEscape=function(t){var e;return this.options.noValidation?t:(e=this.options.noDoubleEncoding?/(?!&\S+;)&/g:/&/g,t.replace(e,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))},t}()}).call(this)},17758:function(t,e,r){(function(){var e,n,o=function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=r(57677),n=r(56226),t.exports=function(t){function r(t,n){if(r.__super__.constructor.call(this,t),null==n)throw Error("Missing element text. "+this.debugInfo());this.name="#text",this.type=e.Text,this.value=this.stringify.text(n)}return o(r,t),Object.defineProperty(r.prototype,"isElementContentWhitespace",{get:function(){throw Error("This DOM method is not implemented."+this.debugInfo())}}),Object.defineProperty(r.prototype,"wholeText",{get:function(){var t,e,r;for(r="",e=this.previousSibling;e;)r=e.data+r,e=e.previousSibling;for(r+=this.data,t=this.nextSibling;t;)r+=t.data,t=t.nextSibling;return r}}),r.prototype.clone=function(){return Object.create(this)},r.prototype.toString=function(t){return this.options.writer.text(this,this.options.writer.filterOptions(t))},r.prototype.splitText=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r.prototype.replaceWholeText=function(t){throw Error("This DOM method is not implemented."+this.debugInfo())},r}(n)}).call(this)},91491:function(t,e,r){(function(){var e,n,o,i={}.hasOwnProperty;o=r(12349).assign,e=r(57677),r(14563),r(5677),r(32156),r(31463),r(96767),r(10419),r(17758),r(31193),r(10153),r(66809),r(66114),r(7019),r(71313),n=r(32767),t.exports=function(){function t(t){var e,r,n;for(e in t||(t={}),this.options=t,r=t.writer||{})i.call(r,e)&&(n=r[e],this["_"+e]=this[e],this[e]=n)}return t.prototype.filterOptions=function(t){var e,r,i,s,a,u,l,c;return t||(t={}),t=o({},this.options,t),(e={writer:this}).pretty=t.pretty||!1,e.allowEmpty=t.allowEmpty||!1,e.indent=null!=(r=t.indent)?r:"  ",e.newline=null!=(i=t.newline)?i:"\n",e.offset=null!=(s=t.offset)?s:0,e.dontPrettyTextNodes=null!=(a=null!=(u=t.dontPrettyTextNodes)?u:t.dontprettytextnodes)?a:0,e.spaceBeforeSlash=null!=(l=null!=(c=t.spaceBeforeSlash)?c:t.spacebeforeslash)?l:"",!0===e.spaceBeforeSlash&&(e.spaceBeforeSlash=" "),e.suppressPrettyCount=0,e.user={},e.state=n.None,e},t.prototype.indent=function(t,e,r){var n;if(!e.pretty||e.suppressPrettyCount);else if(e.pretty&&(n=(r||0)+e.offset+1)>0)return Array(n).join(e.indent);return""},t.prototype.endline=function(t,e,r){return!e.pretty||e.suppressPrettyCount?"":e.newline},t.prototype.attribute=function(t,e,r){var n;return this.openAttribute(t,e,r),n=" "+t.name+'="'+t.value+'"',this.closeAttribute(t,e,r),n},t.prototype.cdata=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<![CDATA[",e.state=n.InsideTag,o+=t.value,e.state=n.CloseTag,o+="]]>"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.comment=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!-- ",e.state=n.InsideTag,o+=t.value,e.state=n.CloseTag,o+=" -->"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.declaration=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<?xml",e.state=n.InsideTag,o+=' version="'+t.version+'"',null!=t.encoding&&(o+=' encoding="'+t.encoding+'"'),null!=t.standalone&&(o+=' standalone="'+t.standalone+'"'),e.state=n.CloseTag,o+=e.spaceBeforeSlash+"?>"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.docType=function(t,e,r){var o,i,s,a,u;if(r||(r=0),this.openNode(t,e,r),e.state=n.OpenTag,a=this.indent(t,e,r)+"<!DOCTYPE "+t.root().name,t.pubID&&t.sysID?a+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(a+=' SYSTEM "'+t.sysID+'"'),t.children.length>0){for(a+=" ["+this.endline(t,e,r),e.state=n.InsideTag,i=0,s=(u=t.children).length;i<s;i++)o=u[i],a+=this.writeChildNode(o,e,r+1);e.state=n.CloseTag,a+="]"}return e.state=n.CloseTag,a+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),a},t.prototype.element=function(t,r,o){var s,a,u,l,c,p,h,d,f,y,m,g,w,b;for(f in o||(o=0),y=!1,m="",this.openNode(t,r,o),r.state=n.OpenTag,m+=this.indent(t,r,o)+"<"+t.name,g=t.attribs)i.call(g,f)&&(s=g[f],m+=this.attribute(s,r,o));if(l=0===(u=t.children.length)?null:t.children[0],0===u||t.children.every(function(t){return(t.type===e.Text||t.type===e.Raw)&&""===t.value}))r.allowEmpty?(m+=">",r.state=n.CloseTag,m+="</"+t.name+">"+this.endline(t,r,o)):(r.state=n.CloseTag,m+=r.spaceBeforeSlash+"/>"+this.endline(t,r,o));else if(r.pretty&&1===u&&(l.type===e.Text||l.type===e.Raw)&&null!=l.value)m+=">",r.state=n.InsideTag,r.suppressPrettyCount++,y=!0,m+=this.writeChildNode(l,r,o+1),r.suppressPrettyCount--,y=!1,r.state=n.CloseTag,m+="</"+t.name+">"+this.endline(t,r,o);else{if(r.dontPrettyTextNodes){for(c=0,h=(w=t.children).length;c<h;c++)if(((a=w[c]).type===e.Text||a.type===e.Raw)&&null!=a.value){r.suppressPrettyCount++,y=!0;break}}for(m+=">"+this.endline(t,r,o),r.state=n.InsideTag,p=0,d=(b=t.children).length;p<d;p++)a=b[p],m+=this.writeChildNode(a,r,o+1);r.state=n.CloseTag,m+=this.indent(t,r,o)+"</"+t.name+">",y&&r.suppressPrettyCount--,m+=this.endline(t,r,o),r.state=n.None}return this.closeNode(t,r,o),m},t.prototype.writeChildNode=function(t,r,n){switch(t.type){case e.CData:return this.cdata(t,r,n);case e.Comment:return this.comment(t,r,n);case e.Element:return this.element(t,r,n);case e.Raw:return this.raw(t,r,n);case e.Text:return this.text(t,r,n);case e.ProcessingInstruction:return this.processingInstruction(t,r,n);case e.Dummy:return"";case e.Declaration:return this.declaration(t,r,n);case e.DocType:return this.docType(t,r,n);case e.AttributeDeclaration:return this.dtdAttList(t,r,n);case e.ElementDeclaration:return this.dtdElement(t,r,n);case e.EntityDeclaration:return this.dtdEntity(t,r,n);case e.NotationDeclaration:return this.dtdNotation(t,r,n);default:throw Error("Unknown XML node type: "+t.constructor.name)}},t.prototype.processingInstruction=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<?",e.state=n.InsideTag,o+=t.target,t.value&&(o+=" "+t.value),e.state=n.CloseTag,o+=e.spaceBeforeSlash+"?>"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.raw=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r),e.state=n.InsideTag,o+=t.value,e.state=n.CloseTag,o+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.text=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r),e.state=n.InsideTag,o+=t.value,e.state=n.CloseTag,o+=this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.dtdAttList=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!ATTLIST",e.state=n.InsideTag,o+=" "+t.elementName+" "+t.attributeName+" "+t.attributeType,"#DEFAULT"!==t.defaultValueType&&(o+=" "+t.defaultValueType),t.defaultValue&&(o+=' "'+t.defaultValue+'"'),e.state=n.CloseTag,o+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.dtdElement=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!ELEMENT",e.state=n.InsideTag,o+=" "+t.name+" "+t.value,e.state=n.CloseTag,o+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.dtdEntity=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!ENTITY",e.state=n.InsideTag,t.pe&&(o+=" %"),o+=" "+t.name,t.value?o+=' "'+t.value+'"':(t.pubID&&t.sysID?o+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.sysID&&(o+=' SYSTEM "'+t.sysID+'"'),t.nData&&(o+=" NDATA "+t.nData)),e.state=n.CloseTag,o+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.dtdNotation=function(t,e,r){var o;return this.openNode(t,e,r),e.state=n.OpenTag,o=this.indent(t,e,r)+"<!NOTATION",e.state=n.InsideTag,o+=" "+t.name,t.pubID&&t.sysID?o+=' PUBLIC "'+t.pubID+'" "'+t.sysID+'"':t.pubID?o+=' PUBLIC "'+t.pubID+'"':t.sysID&&(o+=' SYSTEM "'+t.sysID+'"'),e.state=n.CloseTag,o+=e.spaceBeforeSlash+">"+this.endline(t,e,r),e.state=n.None,this.closeNode(t,e,r),o},t.prototype.openNode=function(t,e,r){},t.prototype.closeNode=function(t,e,r){},t.prototype.openAttribute=function(t,e,r){},t.prototype.closeAttribute=function(t,e,r){},t}()}).call(this)},88038:function(t,e,r){(function(){var e,n,o,i,s,a,u,l,c,p;l=(p=r(12349)).assign,c=p.isFunction,o=r(71476),i=r(58131),s=r(46593),u=r(23511),a=r(16214),e=r(57677),n=r(32767),t.exports.create=function(t,e,r,n){var o,s;if(null==t)throw Error("Root element needs a name.");return s=(o=new i(n=l({},e,r,n))).element(t),n.headless||(o.declaration(n),(null!=n.pubID||null!=n.sysID)&&o.dtd(n)),s},t.exports.begin=function(t,e,r){var n;return(c(t)&&(e=(n=[t,e])[0],r=n[1],t={}),e)?new s(t,e,r):new i(t)},t.exports.stringWriter=function(t){return new u(t)},t.exports.streamWriter=function(t,e){return new a(t,e)},t.exports.implementation=new o,t.exports.nodeType=e,t.exports.writerState=n}).call(this)},80052:(t,e,r)=>{var n=r(92048),o=r(21764),i=r(76162),s=i.Readable,a=i.Writable,u=i.PassThrough,l=r(99196),c=r(17702).EventEmitter;function p(t,e){e=e||{},c.call(this),this.fd=t,this.pend=new l,this.pend.max=1,this.refCount=0,this.autoClose=!!e.autoClose}function h(t,e){e=e||{},s.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=e.end,this.pos=this.start,this.destroyed=!1}function d(t,e){e=e||{},a.call(this,e),this.context=t,this.context.ref(),this.start=e.start||0,this.endOffset=null==e.end?1/0:+e.end,this.bytesWritten=0,this.pos=this.start,this.destroyed=!1,this.on("finish",this.destroy.bind(this))}function f(t,e){c.call(this),e=e||{},this.refCount=0,this.buffer=t,this.maxChunkSize=e.maxChunkSize||Number.MAX_SAFE_INTEGER}e.createFromBuffer=function(t,e){return new f(t,e)},e.createFromFd=function(t,e){return new p(t,e)},e.BufferSlicer=f,e.FdSlicer=p,o.inherits(p,c),p.prototype.read=function(t,e,r,o,i){var s=this;s.pend.go(function(a){n.read(s.fd,t,e,r,o,function(t,e,r){a(),i(t,e,r)})})},p.prototype.write=function(t,e,r,o,i){var s=this;s.pend.go(function(a){n.write(s.fd,t,e,r,o,function(t,e,r){a(),i(t,e,r)})})},p.prototype.createReadStream=function(t){return new h(this,t)},p.prototype.createWriteStream=function(t){return new d(this,t)},p.prototype.ref=function(){this.refCount+=1},p.prototype.unref=function(){var t=this;if(t.refCount-=1,!(t.refCount>0)){if(t.refCount<0)throw Error("invalid unref");t.autoClose&&n.close(t.fd,function(e){e?t.emit("error",e):t.emit("close")})}},o.inherits(h,s),h.prototype._read=function(t){var e=this;if(!e.destroyed){var r=Math.min(e._readableState.highWaterMark,t);if(null!=e.endOffset&&(r=Math.min(r,e.endOffset-e.pos)),r<=0){e.destroyed=!0,e.push(null),e.context.unref();return}e.context.pend.go(function(t){if(e.destroyed)return t();var o=Buffer.allocUnsafe(r);n.read(e.context.fd,o,0,r,e.pos,function(r,n){r?e.destroy(r):0===n?(e.destroyed=!0,e.push(null),e.context.unref()):(e.pos+=n,e.push(o.slice(0,n))),t()})})}},h.prototype.destroy=function(t){this.destroyed||(t=t||Error("stream destroyed"),this.destroyed=!0,this.emit("error",t),this.context.unref())},o.inherits(d,a),d.prototype._write=function(t,e,r){var o=this;if(!o.destroyed){if(o.pos+t.length>o.endOffset){var i=Error("maximum file length exceeded");i.code="ETOOBIG",o.destroy(),r(i);return}o.context.pend.go(function(e){if(o.destroyed)return e();n.write(o.context.fd,t,0,t.length,o.pos,function(t,n){t?(o.destroy(),e(),r(t)):(o.bytesWritten+=n,o.pos+=n,o.emit("progress"),e(),r())})})}},d.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.context.unref())},o.inherits(f,c),f.prototype.read=function(t,e,r,n,o){if(!(0<=e&&e<=t.length))throw RangeError("offset outside buffer: 0 <= "+e+" <= "+t.length);if(n<0)throw RangeError("position is negative: "+n);if(e+r>t.length&&(r=t.length-e),n+r>this.buffer.length&&(r=this.buffer.length-n),r<=0){setImmediate(function(){o(null,0)});return}this.buffer.copy(t,e,n,n+r),setImmediate(function(){o(null,r)})},f.prototype.write=function(t,e,r,n,o){t.copy(this.buffer,n,e,e+r),setImmediate(function(){o(null,r,t)})},f.prototype.createReadStream=function(t){var e=new u(t=t||{});e.destroyed=!1,e.start=t.start||0,e.endOffset=t.end,e.pos=e.endOffset||this.buffer.length;for(var r=this.buffer.slice(e.start,e.pos),n=0;;){var o=n+this.maxChunkSize;if(o>=r.length){n<r.length&&e.write(r.slice(n,r.length));break}e.write(r.slice(n,o)),n=o}return e.end(),e.destroy=function(){e.destroyed=!0},e},f.prototype.createWriteStream=function(t){var e=this,r=new a(t=t||{});return r.start=t.start||0,r.endOffset=null==t.end?this.buffer.length:+t.end,r.bytesWritten=0,r.pos=r.start,r.destroyed=!1,r._write=function(t,n,o){if(!r.destroyed){var i=r.pos+t.length;if(i>r.endOffset){var s=Error("maximum file length exceeded");s.code="ETOOBIG",r.destroyed=!0,o(s);return}t.copy(e.buffer,r.pos,0,t.length),r.bytesWritten+=t.length,r.pos=i,r.emit("progress"),o()}},r.destroy=function(){r.destroyed=!0},r},f.prototype.ref=function(){this.refCount+=1},f.prototype.unref=function(){if(this.refCount-=1,this.refCount<0)throw Error("invalid unref")}},96501:(t,e,r)=>{r(92048);var n,o=r(71568),i=r(80052),s=r(4494),a=r(21764),u=r(17702).EventEmitter,l=r(76162).Transform,c=r(76162).PassThrough,p=r(76162).Writable;e.FY=function(t,e,r){"function"==typeof e&&(r=e,e=null),null==e&&(e={}),e.autoClose=!1,null==e.lazyEntries&&(e.lazyEntries=!1),null==e.decodeStrings&&(e.decodeStrings=!0),null==e.validateEntrySizes&&(e.validateEntrySizes=!0),null==e.strictFileNames&&(e.strictFileNames=!1),function(t,e,r,o){"function"==typeof r&&(o=r,r=null),null==r&&(r={}),null==r.autoClose&&(r.autoClose=!0),null==r.lazyEntries&&(r.lazyEntries=!1),null==r.decodeStrings&&(r.decodeStrings=!0);var i=!!r.decodeStrings;if(null==r.validateEntrySizes&&(r.validateEntrySizes=!0),null==r.strictFileNames&&(r.strictFileNames=!1),null==o&&(o=D),"number"!=typeof e)throw Error("expected totalSize parameter to be a number");if(e>Number.MAX_SAFE_INTEGER)throw Error("zip file too large. only file sizes up to 2^52 are supported due to JavaScript's Number type being an IEEE 754 double.");t.ref();var s=Math.min(65577,e),a=n(s),u=e-a.length;g(t,a,0,s,u,function(u){if(u)return o(u);for(var l=s-22;l>=0;l-=1)if(101010256===a.readUInt32LE(l)){var c=a.subarray(l),p=c.readUInt16LE(4),d=c.readUInt16LE(10),f=c.readUInt32LE(16),y=c.readUInt16LE(20),m=c.length-22;if(y!==m)return o(Error("Invalid comment length. Expected: "+m+". Found: "+y+". Are there extra bytes at the end of the file? Or is the end of central dir signature `PK☺☻` in the comment?"));var w=i?I(c.subarray(22),!1):c.subarray(22);if(l-20>=0&&117853008===a.readUInt32LE(l-20)){var b=E(a.subarray(l-20,l-20+20),8),v=n(56);return g(t,v,0,v.length,b,function(n){return n?o(n):101075792!==v.readUInt32LE(0)?o(Error("invalid zip64 end of central directory record signature")):0!==(p=v.readUInt32LE(16))?o(Error("multi-disk zip files are not supported: found disk number: "+p)):(d=E(v,32),f=E(v,48),o(null,new h(t,f,e,d,w,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames)))})}if(0!==p)return o(Error("multi-disk zip files are not supported: found disk number: "+p));return o(null,new h(t,f,e,d,w,r.autoClose,r.lazyEntries,i,r.validateEntrySizes,r.strictFileNames))}o(Error("End of central directory record signature not found. Either not a zip file, or file is truncated."))})}(i.createFromBuffer(t,{maxChunkSize:65536}),t.length,e,r)};function h(t,e,r,n,o,i,s,a,l,c){var p=this;u.call(p),p.reader=t,p.reader.on("error",function(t){f(p,t)}),p.reader.once("close",function(){p.emit("close")}),p.readEntryCursor=e,p.fileSize=r,p.entryCount=n,p.comment=o,p.entriesRead=0,p.autoClose=!!i,p.lazyEntries=!!s,p.decodeStrings=!!a,p.validateEntrySizes=!!l,p.strictFileNames=!!c,p.isOpen=!0,p.emittedError=!1,p.lazyEntries||p._readEntry()}function d(t,e){t.autoClose&&t.close(),f(t,e)}function f(t,e){t.emittedError||(t.emittedError=!0,t.emit("error",e))}function y(){}function m(){}function g(t,e,r,o,i,s){if(0===o)return setImmediate(function(){s(null,n(0))});t.read(e,r,o,i,function(t,e){return t?s(t):e<o?s(Error("unexpected EOF")):void s()})}function w(t){l.call(this),this.actualByteCount=0,this.expectedByteCount=t}function b(){u.call(this),this.refCount=0}function v(t){c.call(this),this.context=t,this.context.ref(),this.unreffedYet=!1}function I(t,e){if(e)return t.toString("utf8");for(var r="",n=0;n<t.length;n++)r+="\0☺☻♥♦♣♠•◘○◙♂♀♪♫☼►◄↕‼\xb6\xa7▬↨↑↓→←∟↔▲▼ !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~⌂\xc7\xfc\xe9\xe2\xe4\xe0\xe5\xe7\xea\xeb\xe8\xef\xee\xec\xc4\xc5\xc9\xe6\xc6\xf4\xf6\xf2\xfb\xf9\xff\xd6\xdc\xa2\xa3\xa5₧ƒ\xe1\xed\xf3\xfa\xf1\xd1\xaa\xba\xbf⌐\xac\xbd\xbc\xa1\xab\xbb░▒▓│┤╡╢╖╕╣║╗╝╜╛┐└┴┬├─┼╞╟╚╔╩╦╠═╬╧╨╤╥╙╘╒╓╫╪┘┌█▄▌▐▀α\xdfΓπΣσ\xb5τΦΘΩδ∞φε∩≡\xb1≥≤⌠⌡\xf7≈\xb0∙\xb7√ⁿ\xb2■\xa0"[t[n]];return r}function E(t,e){var r=t.readUInt32LE(e);return 4294967296*t.readUInt32LE(e+4)+r}function x(t,e){"function"==typeof t.destroy?t._destroy=function(t,r){e(),null!=r&&r(t)}:t.destroy=e}function D(t){if(t)throw t}a.inherits(h,u),h.prototype.close=function(){this.isOpen&&(this.isOpen=!1,this.reader.unref())},h.prototype.readEntry=function(){if(!this.lazyEntries)throw Error("readEntry() called without lazyEntries:true");this._readEntry()},h.prototype._readEntry=function(){var t=this;if(t.entryCount===t.entriesRead){setImmediate(function(){t.autoClose&&t.close(),t.emittedError||t.emit("end")});return}if(!t.emittedError){var e=n(46);g(t.reader,e,0,e.length,t.readEntryCursor,function(r){if(r)return d(t,r);if(!t.emittedError){var o=new y,i=e.readUInt32LE(0);if(33639248!==i)return d(t,Error("invalid central directory file header signature: 0x"+i.toString(16)));if(o.versionMadeBy=e.readUInt16LE(4),o.versionNeededToExtract=e.readUInt16LE(6),o.generalPurposeBitFlag=e.readUInt16LE(8),o.compressionMethod=e.readUInt16LE(10),o.lastModFileTime=e.readUInt16LE(12),o.lastModFileDate=e.readUInt16LE(14),o.crc32=e.readUInt32LE(16),o.compressedSize=e.readUInt32LE(20),o.uncompressedSize=e.readUInt32LE(24),o.fileNameLength=e.readUInt16LE(28),o.extraFieldLength=e.readUInt16LE(30),o.fileCommentLength=e.readUInt16LE(32),o.internalFileAttributes=e.readUInt16LE(36),o.externalFileAttributes=e.readUInt32LE(38),o.relativeOffsetOfLocalHeader=e.readUInt32LE(42),64&o.generalPurposeBitFlag)return d(t,Error("strong encryption is not supported"));t.readEntryCursor+=46,e=n(o.fileNameLength+o.extraFieldLength+o.fileCommentLength),g(t.reader,e,0,e.length,t.readEntryCursor,function(r){if(r)return d(t,r);if(!t.emittedError){o.fileNameRaw=e.subarray(0,o.fileNameLength);var n=o.fileNameLength+o.extraFieldLength;o.extraFieldRaw=e.subarray(o.fileNameLength,n),o.fileCommentRaw=e.subarray(n,n+o.fileCommentLength);try{o.extraFields=function(t){for(var e=[],r=0;r<t.length-3;){var n=t.readUInt16LE(r+0),o=t.readUInt16LE(r+2),i=r+4,s=i+o;if(s>t.length)throw Error("extra field length exceeds extra field buffer size");var a=t.subarray(i,s);e.push({id:n,data:a}),r=s}return e}(o.extraFieldRaw)}catch(e){return d(t,e)}if(t.decodeStrings){var i,a=(2048&o.generalPurposeBitFlag)!=0;o.fileComment=I(o.fileCommentRaw,a),o.fileName=function(t,e,r,n){for(var o=null,i=0;i<r.length;i++){var a=r[i];if(28789===a.id){if(a.data.length<6||1!==a.data.readUInt8(0))continue;var u=a.data.readUInt32LE(1);if(s.unsigned(e)!==u)continue;o=I(a.data.subarray(5),!0);break}}return null==o&&(o=I(e,(2048&t)!=0)),n||(o=o.replace(/\\/g,"/")),o}(o.generalPurposeBitFlag,o.fileNameRaw,o.extraFields,t.strictFileNames);var u=-1!==(i=o.fileName).indexOf("\\")?"invalid characters in fileName: "+i:/^[a-zA-Z]:/.test(i)||/^\//.test(i)?"absolute path: "+i:-1!==i.split("/").indexOf("..")?"invalid relative path: "+i:null;if(null!=u)return d(t,Error(u))}else o.fileComment=o.fileCommentRaw,o.fileName=o.fileNameRaw;o.comment=o.fileComment,t.readEntryCursor+=e.length,t.entriesRead+=1;for(var l=0;l<o.extraFields.length;l++){var c=o.extraFields[l];if(1===c.id){var p=c.data,h=0;if(4294967295===o.uncompressedSize){if(h+8>p.length)return d(t,Error("zip64 extended information extra field does not include uncompressed size"));o.uncompressedSize=E(p,h),h+=8}if(4294967295===o.compressedSize){if(h+8>p.length)return d(t,Error("zip64 extended information extra field does not include compressed size"));o.compressedSize=E(p,h),h+=8}if(4294967295===o.relativeOffsetOfLocalHeader){if(h+8>p.length)return d(t,Error("zip64 extended information extra field does not include relative header offset"));o.relativeOffsetOfLocalHeader=E(p,h),h+=8}break}}if(t.validateEntrySizes&&0===o.compressionMethod){var f=o.uncompressedSize;if(o.isEncrypted()&&(f+=12),o.compressedSize!==f)return d(t,Error("compressed/uncompressed size mismatch for stored file: "+o.compressedSize+" != "+o.uncompressedSize))}t.emit("entry",o),t.lazyEntries||t._readEntry()}})}})}},h.prototype.openReadStream=function(t,e,r){var n,o=this,i=0,s=t.compressedSize;if(null==r&&(r=e,e=null),null==e)e={};else{if(null!=e.decrypt){if(!t.isEncrypted())throw Error("options.decrypt can only be specified for encrypted entries");if(!1!==e.decrypt)throw Error("invalid options.decrypt value: "+e.decrypt);if(t.isCompressed()&&!1!==e.decompress)throw Error("entry is encrypted and compressed, and options.decompress !== false")}if(null!=e.decompress){if(!t.isCompressed())throw Error("options.decompress can only be specified for compressed entries");if(!(!1===e.decompress||!0===e.decompress))throw Error("invalid options.decompress value: "+e.decompress)}if(null!=e.start||null!=e.end){if(t.isCompressed()&&!1!==e.decompress)throw Error("start/end range not allowed for compressed entry without options.decompress === false");if(t.isEncrypted()&&!1!==e.decrypt)throw Error("start/end range not allowed for encrypted entry without options.decrypt === false")}if(null!=e.start){if((i=e.start)<0)throw Error("options.start < 0");if(i>t.compressedSize)throw Error("options.start > entry.compressedSize")}if(null!=e.end){if((s=e.end)<0)throw Error("options.end < 0");if(s>t.compressedSize)throw Error("options.end > entry.compressedSize");if(s<i)throw Error("options.end < options.start")}}if(!o.isOpen)return r(Error("closed"));if(t.isEncrypted()&&!1!==e.decrypt)return r(Error("entry is encrypted, and options.decrypt !== false"));if(0===t.compressionMethod)n=!1;else{if(8!==t.compressionMethod)return r(Error("unsupported compression method: "+t.compressionMethod));n=null==e.decompress||e.decompress}o.readLocalFileHeader(t,{minimal:!0},function(e,a){if(e)return r(e);o.openReadStreamLowLevel(a.fileDataStart,t.compressedSize,i,s,n,t.uncompressedSize,r)})},h.prototype.openReadStreamLowLevel=function(t,e,r,n,i,s,a){var u=this.reader.createReadStream({start:t+r,end:t+n}),l=u;if(i){var c=!1,p=o.createInflateRaw();u.on("error",function(t){setImmediate(function(){c||p.emit("error",t)})}),u.pipe(p),this.validateEntrySizes?(l=new w(s),p.on("error",function(t){setImmediate(function(){c||l.emit("error",t)})}),p.pipe(l)):l=p,x(l,function(){c=!0,p!==l&&p.unpipe(l),u.unpipe(p),u.destroy()})}a(null,l)},h.prototype.readLocalFileHeader=function(t,e,r){var o=this;null==r&&(r=e,e=null),null==e&&(e={}),o.reader.ref();var i=n(30);g(o.reader,i,0,i.length,t.relativeOffsetOfLocalHeader,function(s){try{if(s)return r(s);var a=i.readUInt32LE(0);if(67324752!==a)return r(Error("invalid local file header signature: 0x"+a.toString(16)));var u=i.readUInt16LE(26),l=i.readUInt16LE(28),c=t.relativeOffsetOfLocalHeader+30+u+l;if(c+t.compressedSize>o.fileSize)return r(Error("file data overflows file bounds: "+c+" + "+t.compressedSize+" > "+o.fileSize));if(e.minimal)return r(null,{fileDataStart:c});var p=new m;p.fileDataStart=c,p.versionNeededToExtract=i.readUInt16LE(4),p.generalPurposeBitFlag=i.readUInt16LE(6),p.compressionMethod=i.readUInt16LE(8),p.lastModFileTime=i.readUInt16LE(10),p.lastModFileDate=i.readUInt16LE(12),p.crc32=i.readUInt32LE(14),p.compressedSize=i.readUInt32LE(18),p.uncompressedSize=i.readUInt32LE(22),p.fileNameLength=u,p.extraFieldLength=l,i=n(u+l),o.reader.ref(),g(o.reader,i,0,i.length,t.relativeOffsetOfLocalHeader+30,function(t){try{if(t)return r(t);return p.fileName=i.subarray(0,u),p.extraField=i.subarray(u),r(null,p)}finally{o.reader.unref()}})}finally{o.reader.unref()}})},y.prototype.getLastModDate=function(t){if(null==t&&(t={}),!t.forceDosFormat)for(var e=0;e<this.extraFields.length;e++){var r=this.extraFields[e];if(21589===r.id){var n=r.data;if(n.length<5||!(1&n[0]))continue;return new Date(1e3*n.readInt32LE(1))}if(10===r.id)for(var n=r.data,o=4;o<n.length+4;){var i=n.readUInt16LE(o);o+=2;var s=n.readUInt16LE(o);if(o+=2,1!==i){o+=s;continue}if(s<8||o+s>n.length)break;return new Date((4294967296*n.readInt32LE(o+4)+n.readUInt32LE(o))/1e4-116444736e5)}}return function(t,e,r){var n=31&t,o=(t>>5&15)-1,i=(t>>9&127)+1980,s=(31&e)*2,a=e>>5&63,u=e>>11&31;if(null==r||"local"===r)return new Date(i,o,n,u,a,s,0);if("UTC"===r)return new Date(Date.UTC(i,o,n,u,a,s,0));throw Error("unrecognized options.timezone: "+options.timezone)}(this.lastModFileDate,this.lastModFileTime,t.timezone)},y.prototype.isEncrypted=function(){return(1&this.generalPurposeBitFlag)!=0},y.prototype.isCompressed=function(){return 8===this.compressionMethod},a.inherits(w,l),w.prototype._transform=function(t,e,r){if(this.actualByteCount+=t.length,this.actualByteCount>this.expectedByteCount)return r(Error("too many bytes in the stream. expected "+this.expectedByteCount+". got at least "+this.actualByteCount));r(null,t)},w.prototype._flush=function(t){if(this.actualByteCount<this.expectedByteCount)return t(Error("not enough bytes in the stream. expected "+this.expectedByteCount+". got only "+this.actualByteCount));t()},a.inherits(b,u),b.prototype.ref=function(){this.refCount+=1},b.prototype.unref=function(){var t=this;if(t.refCount-=1,!(t.refCount>0)){if(t.refCount<0)throw Error("invalid unref");t.close(function(e){if(e)return t.emit("error",e);t.emit("close")})}},b.prototype.createReadStream=function(t){null==t&&(t={});var e=t.start,r=t.end;if(e===r){var n=new c;return setImmediate(function(){n.end()}),n}var o=this._readStreamForRange(e,r),i=!1,s=new v(this);o.on("error",function(t){setImmediate(function(){i||s.emit("error",t)})}),x(s,function(){o.unpipe(s),s.unref(),o.destroy()});var a=new w(r-e);return s.on("error",function(t){setImmediate(function(){i||a.emit("error",t)})}),x(a,function(){i=!0,s.unpipe(a),s.destroy()}),o.pipe(s).pipe(a)},b.prototype._readStreamForRange=function(t,e){throw Error("not implemented")},b.prototype.read=function(t,e,r,n,o){var i=this.createReadStream({start:n,end:n+r}),s=new p,a=0;s._write=function(r,n,o){r.copy(t,e+a,0,r.length),a+=r.length,o()},s.on("finish",o),i.on("error",function(t){o(t)}),i.pipe(s)},b.prototype.close=function(t){setImmediate(t)},a.inherits(v,c),v.prototype._flush=function(t){this.unref(),t()},v.prototype.unref=function(t){this.unreffedYet||(this.unreffedYet=!0,this.context.unref())},"function"==typeof Buffer.allocUnsafe?n=function(t){return Buffer.allocUnsafe(t)}:n=function(t){return new Buffer(t)}},82227:(t,e,r)=>{"use strict";r.d(e,{DK:()=>s,GV:()=>i});class n{async addToQueue(t,e,r,n,o){let i=this.getPriorityFromPlan(r),s=`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return new Promise((r,a)=>{let u={id:s,userId:t,priority:i,requestType:e,payload:n,resolve:async t=>{try{let t=await o();r(t)}catch(t){a(t)}finally{this.processing.delete(s),this.processNext()}},reject:t=>{this.processing.delete(s),a(t),this.processNext()},timestamp:new Date};this.insertByPriority(u),console.log(`[Queue] Added ${e} request for user ${t} with priority ${i}`),this.processNext()})}getQueueStats(t){let e=t?this.getUserPosition(t):null,r=this.queue.reduce((t,e)=>(1===e.priority?t.high++:2===e.priority?t.medium++:t.low++,t),{high:0,medium:0,low:0}),n=e?e*this.averageProcessingTime:this.queue.length*this.averageProcessingTime;return{totalItems:this.queue.length,priorityBreakdown:r,estimatedWaitTime:n}}getUserPosition(t){let e=this.queue.findIndex(e=>e.userId===t);return -1===e?null:e+1}processNext(){if(this.processing.size>=this.maxConcurrent||0===this.queue.length)return;let t=this.queue.shift();t&&(this.processing.set(t.id,!0),console.log(`[Queue] Processing ${t.requestType} for user ${t.userId} (priority ${t.priority})`),setTimeout(()=>{t.resolve(null)},100))}insertByPriority(t){let e=0;for(let r=0;r<this.queue.length;r++){let n=this.queue[r];if(t.priority<n.priority)break;t.priority===n.priority&&t.timestamp>=n.timestamp?e=r+1:t.priority>n.priority&&(e=r+1)}this.queue.splice(e,0,t)}getPriorityFromPlan(t){switch(t){case"pro":return 1;case"student":return 2;default:return 3}}removeFromQueue(t){let e=this.queue.length;return this.queue=this.queue.filter(e=>e.userId!==t),this.queue.length<e}updateAverageProcessingTime(t){this.averageProcessingTime=.8*this.averageProcessingTime+.2*t}getSystemLoad(){let t=this.processing.size,e=this.maxConcurrent;return{queueLength:this.queue.length,processing:t,capacity:e,loadPercentage:t/e*100}}constructor(){this.queue=[],this.processing=new Map,this.maxConcurrent=3,this.averageProcessingTime=90}}let o=new n;async function i(t,e,r,n){return o.addToQueue(t,r,e,{},n)}function s(t){return{stats:o.getQueueStats(t),position:t?o.getUserPosition(t):null,systemLoad:o.getSystemLoad()}}}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),n=e.X(0,[9276,5972,3517,4769,5605,5074,8285,1215],()=>r(32476));module.exports=n})();