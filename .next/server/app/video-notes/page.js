(()=>{var e={};e.id=5121,e.ids=[5121],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},65257:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(49381),s(55801),s(35866);var r=s(23191),a=s(88716),o=s(37922),i=s.n(o),n=s(95231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=["",{children:["video-notes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,49381)),"/Users/janjedrach/Cursor/eduscribe/src/app/video-notes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,55801)),"/Users/janjedrach/Cursor/eduscribe/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/janjedrach/Cursor/eduscribe/src/app/video-notes/page.tsx"],u="/video-notes/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/video-notes/page",pathname:"/video-notes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55141:(e,t,s)=>{Promise.resolve().then(s.bind(s,56643))},56643:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(10326),a=s(17577),o=s(35047),i=s(48193),n=s(73189),l=s(83640),d=s(33947),c=s(21027),u=s(75991);function x(){let e=(0,o.useRouter)(),t=(0,o.useSearchParams)(),s=t?.get("id"),{user:x,supabase:m}=(0,n.$)(),{canUseQuizzes:h}=(0,l.m)(),[p,g]=(0,a.useState)(null),[b,j]=(0,a.useState)(!0),[v,N]=(0,a.useState)(""),[y,f]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!0),[D,C]=(0,a.useState)("video-notes"),q=async()=>{if(s&&x)try{let{data:{session:t}}=await m.auth.getSession(),r=t?.access_token;if(!r)throw Error("No authentication token available");console.log(`[VideoNotesPage] Deleting note with ID: ${s}`);let a=await fetch(`${"upload-video"===D?"/api/upload-video":"/api/video-notes"}?id=${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to delete note")}console.log(`[VideoNotesPage] Successfully deleted note: ${s}`),e.push("/dashboard")}catch(e){console.error("[VideoNotesPage] Error deleting note:",e),N(e.message||"Failed to delete note"),f(!1)}};return x?b?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("main",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 border-t-4 border-b-4 border-blue-600 rounded-full animate-spin mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Loading your video notes..."})]})})})}):v?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("main",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-2",children:"Error"}),r.jsx("p",{className:"text-red-600 mb-4",children:v}),(0,r.jsxs)("div",{className:"flex justify-center gap-4",children:[r.jsx("button",{onClick:()=>e.push("/dashboard"),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Back to Dashboard"}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"Try Again"})]})]})})})}):p?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("main",{className:"container mx-auto px-4 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-2xl",children:"\uD83C\uDFA5"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:[p.title||"Video Notes"," â€“ ",new Date(p.created_at).toLocaleDateString()]}),p.video_url&&r.jsx("a",{href:p.video_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"\uD83D\uDD17 View Original Video"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Created: ",new Date(p.created_at).toLocaleString()]})]}),r.jsx("div",{className:"flex flex-col justify-end",children:r.jsx(u.Z,{noteId:p.id,noteType:"upload-video"===D?"video-upload":"video",noteTitle:p.title||"Video Notes",noteContent:w?p.content:p.summary||p.content,className:"text-sm"})})]})}),p.thumbnail_url&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Video Preview"}),r.jsx("img",{src:p.thumbnail_url,alt:"Video thumbnail",className:"w-full max-w-md mx-auto rounded-lg shadow-sm"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Generated Notes"}),r.jsx("div",{className:"flex items-center gap-3",children:p.summary&&(0,r.jsxs)("div",{className:"note-view-toggle",children:[r.jsx("button",{onClick:()=>k(!0),className:w?"active":"",children:"\uD83D\uDCD6 View Full Notes"}),r.jsx("button",{onClick:()=>k(!1),className:w?"":"active",children:"\uD83D\uDCDD View Summary"})]})})]}),r.jsx("div",{className:"prose max-w-none",children:w?r.jsx(i.UG,{children:p.content}):(0,r.jsxs)("div",{className:"summary-section",children:[r.jsx("h3",{children:"\uD83D\uDCDD Summary Version"}),r.jsx(i.UG,{children:p.summary||"Summary not available."})]})})]}),p.quiz&&p.quiz.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\uD83D\uDCDD Test Your Knowledge"}),h?r.jsx(d.Z,{questions:p.quiz,noteId:p.id,noteType:"video",onComplete:(e,t)=>{console.log(`Quiz completed: ${e}% (${e*t/100}/${t})`)}}):r.jsx(c.Z,{questionCount:p.quiz.length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("button",{onClick:()=>e.push("/dashboard"),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700",children:"â† Back to Dashboard"}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)("button",{onClick:()=>f(!0),className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete Note"]}),r.jsx("button",{onClick:()=>e.push("/generate/youtube"),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Generate More Notes â†’"})]})]})]})}),y&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Note"})]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to delete "',r.jsx("strong",{children:p?.title}),'"? This action cannot be undone.']}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),r.jsx("button",{onClick:q,className:"px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:"Delete Note"})]})]})})]}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("main",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Note not found"}),r.jsx("button",{onClick:()=>e.push("/dashboard"),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Back to Dashboard"})]})})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Please log in to view notes"}),r.jsx("button",{onClick:()=>e.push("/"),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Go to Login"})]})})}},75991:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(10326),a=s(17577);function o({noteId:e,noteType:t,noteTitle:s,noteContent:o,className:i=""}){let[n,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),u=async()=>{if(!n){l(!0);try{let e=`EDUSCRIBE: ${s}

${"=".repeat(50)}

${o}

${"=".repeat(50)}
Generated by EduScribe - AI-powered note generation
`.replace(/#{1,6}\s+/g,"").replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/`(.*?)`/g,"$1").replace(/\[(.*?)\]\(.*?\)/g,"$1").replace(/---+/g,"â”€".repeat(50)).replace(/â€¢/g,"- ").replace(/ðŸ“|ðŸ“–|ðŸŽ¥|ðŸ“¹|ðŸ“„|ðŸ“|ðŸ§ |â­|ðŸ”¥/g,"").trim(),t=new Blob([e],{type:"text/plain;charset=utf-8"}),r=URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="eduscribe_note.txt",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),c(!0),setTimeout(()=>c(!1),3e3)}catch(e){console.error("Failed to export note:",e)}finally{l(!1)}}};return d?r.jsx("div",{className:"relative group",children:(0,r.jsxs)("button",{disabled:!0,className:`bg-green-600 text-white px-3 py-1.5 rounded-md flex items-center gap-2 ${i}`,children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Downloaded!"]})}):n?r.jsx("div",{className:"relative group",children:(0,r.jsxs)("button",{disabled:!0,className:`bg-purple-600 text-white px-3 py-1.5 rounded-md flex items-center gap-2 ${i}`,children:[r.jsx("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Exporting..."]})}):(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)("button",{onClick:u,className:`bg-purple-600 text-white px-3 py-1.5 rounded-md hover:bg-purple-700 transition-colors flex items-center gap-2 ${i}`,children:[r.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export to Notatnik"]}),r.jsx("div",{className:"absolute bottom-full right-0 mb-2 hidden group-hover:block z-10",children:(0,r.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap",children:["Downloads as .txt file - open with Notepad or any text editor",r.jsx("div",{className:"absolute top-full right-6 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})})]})}},49381:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(68570).createProxy)(String.raw`/Users/janjedrach/Cursor/eduscribe/src/app/video-notes/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[9276,8486,8193,8796,4896],()=>s(65257));module.exports=r})();